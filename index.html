<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LearnCraft â€” Build Your Future with Code</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,400&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
<!-- â–¶ Clerk Auth SDK -->
<script async crossorigin="anonymous" data-clerk-publishable-key=pk_test_ZnVuLWxhcmstOTguY2xlcmsuYWNjb3VudHMuZGV2JA src="https://cdn.jsdelivr.net/npm/@clerk/clerk-js@latest/dist/clerk.browser.js"></script>
<!-- â–¶ Supabase Client -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
<style>
:root {
  --black: #0a0a0a;
  --white: #f5f3ef;
  --accent: #ff5c35;
  --accent2: #3b5bff;
  --yellow: #f7e04b;
  --green: #2dcc87;
  --card-bg: #121212;
  --border: rgba(255,255,255,0.08);
  --muted: #7a7a7a;
  --sidebar: #0e0e0e;
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{background:var(--black);color:var(--white);font-family:'DM Sans',sans-serif;font-size:16px;line-height:1.6;overflow-x:hidden}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ VIEWS â”€â”€ */
.view{display:none}
.view.active{display:block}
/* â”€â”€â”€ AUTH VIEWS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.auth-view{min-height:100vh;display:grid;grid-template-columns:1fr 1fr;background:var(--black)}
@media(max-width:768px){.auth-view{grid-template-columns:1fr}}
.auth-brand{background:linear-gradient(135deg,#0a0a0a 0%,#111 50%,#0d0d0d 100%);padding:4rem;display:flex;flex-direction:column;justify-content:space-between;position:relative;overflow:hidden;border-right:1px solid var(--border)}
.auth-brand::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse at 20% 80%,rgba(255,92,53,0.08) 0%,transparent 60%),radial-gradient(ellipse at 80% 20%,rgba(59,91,255,0.06) 0%,transparent 60%);pointer-events:none}
.auth-brand-logo{font-family:'Syne',sans-serif;font-size:1.6rem;font-weight:800;color:var(--white);position:relative;z-index:1;cursor:pointer}
.auth-brand-logo span{color:var(--accent)}
.auth-brand-content{position:relative;z-index:1}
.auth-brand-content h2{font-family:'Syne',sans-serif;font-size:2.4rem;font-weight:800;line-height:1.15;margin-bottom:1.2rem}
.auth-brand-content p{color:rgba(255,255,255,0.5);font-size:0.95rem;line-height:1.7;max-width:380px}
.auth-brand-stats{display:flex;gap:2.5rem;position:relative;z-index:1;margin-top:2rem}
.abs{display:flex;flex-direction:column;gap:0.2rem}
.abs-num{font-family:'Syne',sans-serif;font-size:1.8rem;font-weight:800;color:var(--white)}
.abs-label{font-size:0.78rem;color:var(--muted);text-transform:uppercase;letter-spacing:0.06em}
.auth-testimonial{background:var(--card-bg);border:1px solid var(--border);border-radius:12px;padding:1.4rem;position:relative;z-index:1;margin-top:2.5rem}
.auth-testimonial p{font-size:0.87rem;color:rgba(255,255,255,0.75);line-height:1.7;font-style:italic}
.auth-testimonial-footer{display:flex;align-items:center;gap:0.7rem;margin-top:1rem}
.auth-testimonial-avatar{width:32px;height:32px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--yellow));display:flex;align-items:center;justify-content:center;font-size:0.72rem;font-weight:700;color:#000}
.auth-testimonial-name{font-size:0.82rem;font-weight:600}
.auth-testimonial-role{font-size:0.75rem;color:var(--muted)}
.auth-form-panel{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:3rem 2rem;background:var(--black)}
.auth-form-box{width:100%;max-width:420px}
.auth-form-box h1{font-family:'Syne',sans-serif;font-size:1.85rem;font-weight:800;margin-bottom:0.4rem}
.auth-form-box .auth-sub{color:var(--muted);font-size:0.9rem;margin-bottom:2rem}
.auth-form-box .auth-sub a{color:var(--yellow);text-decoration:none;font-weight:600;cursor:pointer}
.auth-form-box .auth-sub a:hover{text-decoration:underline}
.auth-social-btns{display:flex;flex-direction:column;gap:0.75rem;margin-bottom:1.5rem}
.auth-social-btn{display:flex;align-items:center;justify-content:center;gap:0.7rem;padding:0.82rem;border:1px solid var(--border);border-radius:10px;background:var(--card-bg);color:var(--white);font-size:0.9rem;font-weight:500;cursor:pointer;transition:border-color 0.2s,background 0.2s;width:100%}
.auth-social-btn:hover{border-color:rgba(255,255,255,0.2);background:#1a1a1a}
.auth-social-btn svg{width:18px;height:18px;flex-shrink:0}
.auth-divider{display:flex;align-items:center;gap:1rem;margin-bottom:1.5rem}
.auth-divider::before,.auth-divider::after{content:'';flex:1;height:1px;background:var(--border)}
.auth-divider span{font-size:0.78rem;color:var(--muted);white-space:nowrap}
.auth-field{margin-bottom:1rem}
.auth-field label{display:block;font-size:0.82rem;font-weight:600;margin-bottom:0.4rem;color:rgba(255,255,255,0.7)}
.auth-field input{width:100%;background:var(--card-bg);border:1px solid var(--border);border-radius:9px;padding:0.82rem 1rem;color:var(--white);font-size:0.9rem;font-family:'DM Sans',sans-serif;outline:none;transition:border-color 0.2s}
.auth-field input:focus{border-color:rgba(247,224,75,0.5);box-shadow:0 0 0 3px rgba(247,224,75,0.06)}
.auth-field input::placeholder{color:var(--muted)}
.auth-field-row{display:grid;grid-template-columns:1fr 1fr;gap:0.75rem}
.auth-submit{width:100%;background:var(--accent);color:white;border:none;border-radius:10px;padding:0.9rem;font-family:'Syne',sans-serif;font-weight:700;font-size:0.95rem;cursor:pointer;transition:opacity 0.2s,transform 0.2s;margin-top:0.5rem}
.auth-submit:hover{opacity:0.88;transform:translateY(-1px)}
.auth-submit:disabled{opacity:0.5;cursor:not-allowed;transform:none}
.auth-error{background:rgba(255,92,53,0.1);border:1px solid rgba(255,92,53,0.3);border-radius:8px;padding:0.75rem 1rem;font-size:0.83rem;color:var(--accent);margin-bottom:1rem;display:none}
.auth-error.show{display:block}
.auth-success{background:rgba(45,204,135,0.1);border:1px solid rgba(45,204,135,0.3);border-radius:8px;padding:0.75rem 1rem;font-size:0.83rem;color:var(--green);margin-bottom:1rem;display:none}
.auth-success.show{display:block}
.auth-forgot{font-size:0.8rem;color:var(--muted);text-align:right;cursor:pointer;margin-top:-0.4rem;margin-bottom:1rem}
.auth-forgot:hover{color:var(--yellow)}
.auth-terms{font-size:0.75rem;color:var(--muted);text-align:center;margin-top:1.2rem;line-height:1.6}
.auth-terms a{color:var(--muted);text-decoration:underline}
/* Loading spinner */
.auth-spinner{display:inline-block;width:16px;height:16px;border:2px solid rgba(255,255,255,0.3);border-top-color:white;border-radius:50%;animation:spin 0.8s linear infinite;margin-right:6px;vertical-align:middle}
/* User menu dropdown */
.nav-user-menu{position:relative;display:inline-block}
.nav-dropdown{position:absolute;top:calc(100% + 8px);right:0;background:var(--card-bg);border:1px solid var(--border);border-radius:10px;min-width:200px;padding:0.5rem;z-index:1000;box-shadow:0 20px 40px rgba(0,0,0,0.4);display:none}
.nav-dropdown.open{display:block}
.nav-dropdown-item{padding:0.55rem 0.85rem;border-radius:7px;font-size:0.85rem;cursor:pointer;transition:background 0.15s;color:rgba(255,255,255,0.8)}
.nav-dropdown-item:hover{background:rgba(255,255,255,0.06)}
.nav-dropdown-item.danger{color:var(--accent)}
.nav-dropdown-sep{height:1px;background:var(--border);margin:0.35rem 0}
.nav-user-info{padding:0.6rem 0.85rem 0.5rem;border-bottom:1px solid var(--border);margin-bottom:0.4rem}
.nav-user-name{font-weight:600;font-size:0.85rem}
.nav-user-email{font-size:0.75rem;color:var(--muted)}
/* Pyodide runner */
.py-run-btn{background:rgba(45,204,135,0.12);border:1px solid rgba(45,204,135,0.25);color:var(--green);padding:0.4rem 1rem;border-radius:7px;font-size:0.82rem;font-weight:600;cursor:pointer;transition:all 0.2s;font-family:'DM Sans',sans-serif}
.py-run-btn:hover{background:rgba(45,204,135,0.2)}
.py-run-btn:disabled{opacity:0.5;cursor:not-allowed}
.py-loading{color:var(--muted);font-size:0.78rem;font-family:'DM Mono',monospace;margin-top:0.4rem}


/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ NAV â”€â”€ */
nav{position:fixed;top:0;left:0;right:0;z-index:200;display:flex;align-items:center;justify-content:space-between;padding:1rem 2.5rem;background:rgba(10,10,10,0.92);backdrop-filter:blur(14px);border-bottom:1px solid var(--border)}
.logo{font-family:'Syne',sans-serif;font-weight:800;font-size:1.4rem;letter-spacing:-0.03em;color:var(--white);text-decoration:none;cursor:pointer}
.logo span{color:var(--accent)}
.nav-links{list-style:none;display:flex;gap:2rem;align-items:center}
.nav-links a{color:var(--muted);text-decoration:none;font-size:0.9rem;font-weight:500;transition:color 0.2s;cursor:pointer}
.nav-links a:hover,.nav-links a.active-link{color:var(--white)}
.nav-cta{background:var(--accent);color:white!important;padding:0.5rem 1.3rem;border-radius:6px;font-weight:600!important}
.nav-cta:hover{opacity:0.85}
.nav-user{display:none;align-items:center;gap:1rem}
.nav-user.show{display:flex}
.nav-avatar{width:34px;height:34px;border-radius:50%;background:linear-gradient(135deg,var(--yellow),var(--accent));display:flex;align-items:center;justify-content:center;font-weight:700;font-size:0.85rem;color:#000;cursor:pointer}
.xp-badge{background:rgba(247,224,75,0.12);border:1px solid rgba(247,224,75,0.3);color:var(--yellow);padding:0.2rem 0.7rem;border-radius:100px;font-size:0.75rem;font-family:'DM Mono',monospace}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
/*  LANDING PAGE                               */
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.hero{min-height:100vh;display:flex;align-items:center;padding:8rem 2.5rem 4rem;position:relative;overflow:hidden}
.hero::before{content:'';position:absolute;top:-200px;right:-200px;width:700px;height:700px;background:radial-gradient(circle,rgba(59,91,255,0.15) 0%,transparent 70%);pointer-events:none}
.hero::after{content:'';position:absolute;bottom:-100px;left:10%;width:500px;height:500px;background:radial-gradient(circle,rgba(255,92,53,0.1) 0%,transparent 70%);pointer-events:none}
.hero-inner{max-width:1200px;margin:0 auto;width:100%;display:grid;grid-template-columns:1fr 1fr;gap:4rem;align-items:center}
.hero-eyebrow{display:inline-flex;align-items:center;gap:0.5rem;background:rgba(255,92,53,0.12);border:1px solid rgba(255,92,53,0.3);color:var(--accent);padding:0.35rem 1rem;border-radius:100px;font-size:0.8rem;font-weight:600;letter-spacing:0.05em;text-transform:uppercase;margin-bottom:1.5rem}
.hero-eyebrow::before{content:'â—';font-size:0.5rem;animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.3}}
h1{font-family:'Syne',sans-serif;font-size:clamp(2.6rem,4.5vw,4.2rem);font-weight:800;line-height:1.05;letter-spacing:-0.03em;margin-bottom:1.5rem}
h1 .accent{color:var(--accent)}
h1 .blue{color:var(--accent2)}
.hero-sub{font-size:1.05rem;color:var(--muted);max-width:480px;margin-bottom:2.5rem;line-height:1.7}
.hero-actions{display:flex;gap:1rem;flex-wrap:wrap}
.btn-primary{background:var(--accent);color:white;padding:0.9rem 2rem;border-radius:8px;font-family:'Syne',sans-serif;font-weight:700;font-size:1rem;text-decoration:none;cursor:pointer;border:none;transition:transform 0.2s,box-shadow 0.2s;display:inline-block}
.btn-primary:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(255,92,53,0.4)}
.btn-secondary{background:transparent;color:var(--yellow);padding:0.9rem 2rem;border-radius:8px;font-family:'Syne',sans-serif;font-weight:700;font-size:1rem;cursor:pointer;border:1px solid rgba(247,224,75,0.35);transition:all 0.2s;display:inline-block}
.btn-secondary:hover{background:rgba(247,224,75,0.08);border-color:var(--yellow)}
.btn-ghost{background:transparent;color:var(--white);padding:0.9rem 2rem;border-radius:8px;font-family:'Syne',sans-serif;font-weight:700;font-size:1rem;text-decoration:none;border:1px solid var(--border);cursor:pointer;transition:border-color 0.2s,background 0.2s;display:inline-block}
.btn-ghost:hover{border-color:var(--white);background:rgba(255,255,255,0.05)}
.code-window{background:#111;border:1px solid var(--border);border-radius:16px;overflow:hidden;box-shadow:0 40px 80px rgba(0,0,0,0.5);animation:float 6s ease-in-out infinite}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-12px)}}
.window-bar{background:#1a1a1a;padding:0.8rem 1rem;display:flex;align-items:center;gap:0.6rem;border-bottom:1px solid var(--border)}
.dot{width:12px;height:12px;border-radius:50%}
.dot.r{background:#ff5f57}.dot.y{background:#febc2e}.dot.g{background:#28c840}
.window-title{margin-left:0.5rem;font-family:'DM Mono',monospace;font-size:0.78rem;color:var(--muted)}
.code-body{padding:1.5rem;font-family:'DM Mono',monospace;font-size:0.82rem;line-height:1.8}
.kw{color:#c792ea}.fn{color:#82aaff}.str{color:#c3e88d}.num{color:#f78c6c}.cmt{color:#546e7a}.vr{color:#eeffff}
.cursor{display:inline-block;width:2px;height:1em;background:var(--accent);vertical-align:middle;animation:blink 1s step-end infinite}
@keyframes blink{0%,100%{opacity:1}50%{opacity:0}}
.output-line{background:rgba(45,204,135,0.1);border-left:2px solid var(--green);padding:0.4rem 0.8rem;margin-top:0.5rem;border-radius:0 4px 4px 0;color:var(--green);font-size:0.8rem}

.logos-bar{padding:2.5rem 2.5rem;border-top:1px solid var(--border);border-bottom:1px solid var(--border)}
.logos-inner{max-width:1200px;margin:0 auto}
.logos-label{text-align:center;color:var(--muted);font-size:0.78rem;letter-spacing:0.08em;text-transform:uppercase;margin-bottom:1.5rem}
.logos-row{display:flex;align-items:center;justify-content:center;gap:3rem;flex-wrap:wrap;opacity:0.35}
.logo-item{font-family:'Syne',sans-serif;font-weight:700;font-size:1.05rem;color:var(--white)}

section{padding:5.5rem 2.5rem}
.section-inner{max-width:1200px;margin:0 auto}
.section-label{font-family:'DM Mono',monospace;font-size:0.78rem;color:var(--accent);letter-spacing:0.1em;text-transform:uppercase;margin-bottom:0.8rem}
h2{font-family:'Syne',sans-serif;font-size:clamp(1.9rem,3vw,2.8rem);font-weight:800;letter-spacing:-0.03em;line-height:1.1;margin-bottom:0.8rem}
.section-sub{color:var(--muted);font-size:1rem;max-width:500px;margin-bottom:3rem;line-height:1.7}

/* STATS BAR */
.stats-bar{display:grid;grid-template-columns:repeat(3,1fr);gap:1px;background:var(--border);border:1px solid var(--border);border-radius:16px;overflow:hidden;margin-bottom:4rem}
.stat-item{background:var(--card-bg);padding:2rem;text-align:center}
.stat-num{font-family:'Syne',sans-serif;font-size:2.3rem;font-weight:800;letter-spacing:-0.04em;margin-bottom:0.2rem}
.stat-label{color:var(--muted);font-size:0.83rem}

/* COURSE CATALOG */
.catalog-filters{display:flex;gap:0.5rem;flex-wrap:wrap;margin-bottom:2rem}
.filter-chip{padding:0.4rem 1rem;border-radius:100px;border:1px solid var(--border);font-size:0.82rem;cursor:pointer;background:transparent;color:var(--muted);font-family:'DM Sans',sans-serif;transition:all 0.2s}
.filter-chip:hover{border-color:rgba(255,255,255,0.25);color:var(--white)}
.filter-chip.active{background:var(--accent);border-color:var(--accent);color:white;font-weight:600}

.paths-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1rem}
.path-card{background:var(--card-bg);border:1px solid var(--border);border-radius:12px;padding:1.5rem;cursor:pointer;transition:border-color 0.25s,transform 0.25s;text-decoration:none;color:inherit;display:block}
.path-card:hover{border-color:rgba(255,255,255,0.2);transform:translateY(-3px)}
.path-icon{width:44px;height:44px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:1.3rem;margin-bottom:1rem}
.path-card h3{font-family:'Syne',sans-serif;font-size:1rem;font-weight:700;margin-bottom:0.4rem}
.path-card p{color:var(--muted);font-size:0.84rem;line-height:1.5}
.path-meta{margin-top:1.2rem;display:flex;gap:0.8rem;align-items:center;flex-wrap:wrap}
.badge{font-size:0.7rem;font-weight:600;padding:0.18rem 0.6rem;border-radius:100px;font-family:'DM Mono',monospace}
.badge.beginner{background:rgba(45,204,135,0.15);color:var(--green)}
.badge.intermediate{background:rgba(247,224,75,0.15);color:var(--yellow)}
.badge.advanced{background:rgba(255,92,53,0.15);color:var(--accent)}
.path-hours{font-size:0.78rem;color:var(--muted)}
.path-lessons{font-size:0.78rem;color:var(--muted)}
.path-progress{margin-top:0.8rem;height:3px;background:rgba(255,255,255,0.08);border-radius:2px;overflow:hidden}
.path-progress-fill{height:100%;background:linear-gradient(90deg,var(--accent),var(--yellow));border-radius:2px;transition:width 0.5s ease}

/* TESTIMONIALS */
.testimonials-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1.5rem}
.testimonial-card{background:var(--card-bg);border:1px solid var(--border);border-radius:12px;padding:1.8rem;position:relative}
.testimonial-card::before{content:'"';font-family:'Syne',sans-serif;font-size:5rem;color:rgba(255,92,53,0.12);position:absolute;top:0.5rem;left:1.2rem;line-height:1}
.testimonial-text{font-size:0.9rem;color:rgba(255,255,255,0.8);line-height:1.7;margin-top:1.5rem;margin-bottom:1.5rem}
.testimonial-author{display:flex;align-items:center;gap:0.8rem}
.avatar{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:0.9rem;flex-shrink:0}
.author-name{font-weight:600;font-size:0.88rem}
.author-role{color:var(--muted);font-size:0.78rem}

/* PRICING */
.pricing-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem}
.pricing-card{background:var(--card-bg);border:1px solid var(--border);border-radius:16px;padding:2rem;position:relative;transition:transform 0.2s}
.pricing-card:hover{transform:translateY(-4px)}
.pricing-card.featured{border-color:var(--accent);background:linear-gradient(135deg,rgba(255,92,53,0.07),var(--card-bg))}
.featured-badge{position:absolute;top:-1px;left:50%;transform:translateX(-50%);background:var(--accent);color:white;font-size:0.7rem;font-weight:700;padding:0.22rem 0.9rem;border-radius:0 0 8px 8px;letter-spacing:0.05em;text-transform:uppercase}
.plan-name{font-family:'Syne',sans-serif;font-weight:800;font-size:1.1rem;margin-bottom:0.8rem;margin-top:0.8rem}
.plan-price{font-family:'Syne',sans-serif;font-size:2.6rem;font-weight:800;letter-spacing:-0.04em;line-height:1;margin-bottom:0.25rem}
.plan-period{color:var(--muted);font-size:0.83rem;margin-bottom:1.5rem}
.plan-features{list-style:none;margin-bottom:2rem}
.plan-features li{padding:0.45rem 0;font-size:0.87rem;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:0.6rem}
.plan-features li:last-child{border-bottom:none}
.feat-icon{color:var(--green);font-size:0.9rem}
.plan-btn{display:block;text-align:center;padding:0.85rem;border-radius:8px;font-family:'Syne',sans-serif;font-weight:700;font-size:0.9rem;text-decoration:none;cursor:pointer;border:none;transition:all 0.2s;width:100%}
.plan-btn.accent{background:var(--accent);color:white}
.plan-btn.accent:hover{opacity:0.85}
.plan-btn.outline{border:1px solid var(--border);color:var(--white);background:transparent}
.plan-btn.outline:hover{border-color:var(--white)}

/* CTA BANNER */
.cta-banner{background:#0d0d0d;border-top:1px solid var(--border);border-bottom:1px solid var(--border);text-align:center;padding:6rem 2.5rem;position:relative;overflow:hidden}
.cta-banner::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse at center,rgba(59,91,255,0.09) 0%,transparent 70%)}
.cta-banner h2{margin-bottom:1rem}
.cta-banner p{color:var(--muted);margin-bottom:2.5rem;font-size:1rem}

/* FOOTER */
footer{background:#060606;padding:4rem 2.5rem 2rem;border-top:1px solid var(--border)}
.footer-grid{max-width:1200px;margin:0 auto;display:grid;grid-template-columns:1.5fr repeat(4,1fr);gap:3rem;margin-bottom:3rem}
.footer-brand p{color:var(--muted);font-size:0.85rem;margin-top:0.8rem;line-height:1.7;max-width:240px}
.footer-col h4{font-family:'Syne',sans-serif;font-weight:700;font-size:0.85rem;margin-bottom:1rem;color:var(--white)}
.footer-col ul{list-style:none}
.footer-col li{margin-bottom:0.6rem}
.footer-col a{color:var(--muted);text-decoration:none;font-size:0.83rem;transition:color 0.2s}
.footer-col a:hover{color:var(--white)}
.footer-bottom{max-width:1200px;margin:0 auto;padding-top:2rem;border-top:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}
.footer-bottom p{color:var(--muted);font-size:0.8rem}
.footer-links{display:flex;gap:1.5rem}
.footer-links a{color:var(--muted);text-decoration:none;font-size:0.8rem}
.footer-links a:hover{color:var(--white)}

/* FADE UP */
.fade-up{opacity:0;transform:translateY(30px);transition:opacity 0.6s ease,transform 0.6s ease}
.fade-up.visible{opacity:1;transform:translateY(0)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
/*  DASHBOARD                                  */
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.dashboard-layout{display:grid;grid-template-columns:260px 1fr;min-height:100vh;padding-top:64px}
.sidebar{background:var(--sidebar);border-right:1px solid var(--border);padding:1.5rem 0;position:sticky;top:64px;height:calc(100vh - 64px);overflow-y:auto}
.sidebar-section{padding:0.5rem 1.2rem;margin-bottom:0.3rem}
.sidebar-section-label{font-family:'DM Mono',monospace;font-size:0.68rem;color:var(--muted);text-transform:uppercase;letter-spacing:0.1em;padding:0.5rem 0.8rem;margin-bottom:0.2rem}
.sidebar-item{display:flex;align-items:center;gap:0.7rem;padding:0.6rem 0.8rem;border-radius:8px;cursor:pointer;font-size:0.88rem;color:var(--muted);transition:all 0.15s}
.sidebar-item:hover{background:rgba(255,255,255,0.05);color:var(--white)}
.sidebar-item.active{background:rgba(255,92,53,0.12);color:var(--accent);font-weight:600}
.sidebar-item .si-icon{font-size:1rem;width:20px;text-align:center}
.sidebar-item .si-badge{margin-left:auto;background:var(--accent);color:white;font-size:0.65rem;font-weight:700;padding:0.1rem 0.45rem;border-radius:100px}
.dash-content{padding:2rem 2.5rem}

/* Dashboard welcome */
.dash-welcome{margin-bottom:2rem}
.dash-welcome h2{font-family:'Syne',sans-serif;font-size:1.8rem;font-weight:800;letter-spacing:-0.02em}
.dash-welcome p{color:var(--muted);margin-top:0.3rem}
.dash-streak{display:inline-flex;align-items:center;gap:0.4rem;background:rgba(247,224,75,0.1);border:1px solid rgba(247,224,75,0.2);color:var(--yellow);padding:0.3rem 0.8rem;border-radius:100px;font-size:0.8rem;font-weight:600;margin-top:0.6rem}

.dash-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;margin-bottom:2rem}
.dash-stat-card{background:var(--card-bg);border:1px solid var(--border);border-radius:12px;padding:1.2rem 1.4rem}
.dash-stat-card .dsc-label{font-size:0.78rem;color:var(--muted);margin-bottom:0.3rem}
.dash-stat-card .dsc-val{font-family:'Syne',sans-serif;font-size:1.8rem;font-weight:800;letter-spacing:-0.03em}
.dash-stat-card .dsc-sub{font-size:0.75rem;color:var(--muted);margin-top:0.1rem}

.continue-section{margin-bottom:2rem}
.continue-section h3{font-family:'Syne',sans-serif;font-weight:700;font-size:1.1rem;margin-bottom:1rem}
.continue-card{background:var(--card-bg);border:1px solid var(--border);border-radius:12px;padding:1.3rem 1.5rem;display:flex;align-items:center;gap:1.2rem;cursor:pointer;transition:border-color 0.2s}
.continue-card:hover{border-color:rgba(255,255,255,0.18)}
.continue-icon{width:50px;height:50px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.4rem;flex-shrink:0}
.continue-info h4{font-family:'Syne',sans-serif;font-weight:700;font-size:0.95rem}
.continue-info p{font-size:0.82rem;color:var(--muted);margin-top:0.15rem}
.continue-progress{margin-top:0.6rem;height:3px;background:rgba(255,255,255,0.08);border-radius:2px;width:220px}
.continue-progress-fill{height:100%;background:linear-gradient(90deg,var(--accent),var(--yellow));border-radius:2px}
.continue-arrow{margin-left:auto;color:var(--muted);font-size:1.2rem}

/* All courses grid in dashboard */
.courses-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:1rem}
.course-card{background:var(--card-bg);border:1px solid var(--border);border-radius:12px;overflow:hidden;cursor:pointer;transition:transform 0.2s,border-color 0.2s}
.course-card:hover{transform:translateY(-3px);border-color:rgba(255,255,255,0.18)}
.course-card-banner{height:80px;display:flex;align-items:center;justify-content:center;font-size:2.2rem}
.course-card-body{padding:1.2rem}
.course-card-body h4{font-family:'Syne',sans-serif;font-weight:700;font-size:0.95rem;margin-bottom:0.3rem}
.course-card-body p{font-size:0.8rem;color:var(--muted);line-height:1.5;margin-bottom:0.8rem}
.course-card-meta{display:flex;gap:0.6rem;align-items:center;flex-wrap:wrap}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
/*  COURSE LESSON PAGE                         */
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.lesson-layout{display:grid;grid-template-columns:280px 1fr 1fr;height:calc(100vh - 64px);padding-top:64px;overflow:hidden}
.lesson-sidebar{background:var(--sidebar);border-right:1px solid var(--border);overflow-y:auto;padding:1rem 0}
.lesson-sidebar-title{font-family:'Syne',sans-serif;font-weight:700;font-size:0.95rem;padding:0.8rem 1.2rem;border-bottom:1px solid var(--border);margin-bottom:0.5rem}
.lesson-sidebar-title span{color:var(--muted);font-family:'DM Mono',monospace;font-size:0.72rem;font-weight:400;display:block;margin-top:0.2rem}
.lesson-item{display:flex;align-items:center;gap:0.6rem;padding:0.6rem 1.2rem;cursor:pointer;font-size:0.84rem;color:var(--muted);transition:all 0.15s;border-left:2px solid transparent}
.lesson-item:hover{background:rgba(255,255,255,0.04);color:var(--white)}
.lesson-item.active{color:var(--white);border-left-color:var(--accent);background:rgba(255,92,53,0.06)}
.lesson-item.completed .li-check{color:var(--green)}
.lesson-item .li-num{font-family:'DM Mono',monospace;font-size:0.7rem;color:var(--muted);width:20px;flex-shrink:0}
.lesson-item .li-check{font-size:0.8rem;margin-left:auto}
.lesson-section-header{font-family:'DM Mono',monospace;font-size:0.66rem;color:var(--muted);text-transform:uppercase;letter-spacing:0.1em;padding:1rem 1.2rem 0.3rem}

.lesson-instructions{padding:2rem;overflow-y:auto;border-right:1px solid var(--border)}
.lesson-top-bar{display:flex;align-items:center;justify-content:space-between;margin-bottom:1.5rem}
.lesson-breadcrumb{font-size:0.8rem;color:var(--muted);font-family:'DM Mono',monospace}
.lesson-nav-btns{display:flex;gap:0.5rem}
.lesson-nav-btn{background:var(--card-bg);border:1px solid var(--border);color:var(--white);padding:0.4rem 0.9rem;border-radius:6px;font-size:0.8rem;cursor:pointer;font-family:'DM Sans',sans-serif;transition:border-color 0.2s}
.lesson-nav-btn:hover{border-color:rgba(255,255,255,0.3)}
.lesson-nav-btn.primary{background:var(--accent);border-color:var(--accent);font-weight:600}
.lesson-title{font-family:'Syne',sans-serif;font-size:1.4rem;font-weight:800;margin-bottom:1rem;letter-spacing:-0.02em}
.lesson-body{font-size:0.9rem;color:rgba(255,255,255,0.82);line-height:1.8}
.lesson-body h4{font-family:'Syne',sans-serif;font-weight:700;margin:1.5rem 0 0.6rem}
.lesson-body p{margin-bottom:0.9rem}
.lesson-body code{background:rgba(255,255,255,0.08);padding:0.1em 0.45em;border-radius:4px;font-family:'DM Mono',monospace;font-size:0.85em;color:#c3e88d}
.lesson-body pre{background:#0d0d0d;border:1px solid var(--border);border-radius:10px;padding:1.2rem;margin:1rem 0;overflow-x:auto;font-family:'DM Mono',monospace;font-size:0.82rem;line-height:1.7}
.lesson-body ul{margin:0.5rem 0 1rem 1.2rem}
.lesson-body li{margin-bottom:0.4rem}
.task-checklist{background:rgba(59,91,255,0.07);border:1px solid rgba(59,91,255,0.2);border-radius:10px;padding:1rem 1.2rem;margin-top:1.5rem}
.task-checklist h4{font-family:'Syne',sans-serif;font-size:0.85rem;font-weight:700;color:var(--accent2);margin-bottom:0.7rem}
.task-check-item{display:flex;align-items:flex-start;gap:0.6rem;margin-bottom:0.5rem;font-size:0.85rem;color:rgba(255,255,255,0.75);cursor:pointer}
.task-check-item input[type=checkbox]{accent-color:var(--accent2);width:15px;height:15px;flex-shrink:0;margin-top:0.15rem}
.task-check-item.done{text-decoration:line-through;opacity:0.5}
.run-btn{background:var(--green);color:#000;border:none;padding:0.7rem 1.5rem;border-radius:8px;font-family:'Syne',sans-serif;font-weight:700;font-size:0.9rem;cursor:pointer;transition:all 0.2s;margin-top:1rem;display:flex;align-items:center;gap:0.5rem}
.run-btn:hover{background:#25b872;transform:translateY(-1px)}

/* Editor panel */
.editor-panel{display:flex;flex-direction:column;overflow:hidden}
.editor-tabs{display:flex;border-bottom:1px solid var(--border);background:#0e0e0e}
.editor-tab{padding:0.65rem 1.2rem;font-size:0.82rem;cursor:pointer;color:var(--muted);border-bottom:2px solid transparent;font-family:'DM Mono',monospace;transition:all 0.2s}
.editor-tab.active{color:var(--white);border-bottom-color:var(--accent)}
.editor-area{flex:1;display:flex;flex-direction:column;overflow:hidden}
.code-editor{flex:1;background:#0d0d0d;padding:1.2rem;font-family:'DM Mono',monospace;font-size:0.82rem;line-height:1.8;color:#eeffff;resize:none;border:none;outline:none;overflow-y:auto;min-height:0}
.output-panel{background:#070707;border-top:1px solid var(--border);height:160px;overflow-y:auto;padding:1rem}
.output-panel-label{font-family:'DM Mono',monospace;font-size:0.68rem;color:var(--muted);text-transform:uppercase;letter-spacing:0.1em;margin-bottom:0.6rem;display:flex;align-items:center;justify-content:space-between}
.output-text{font-family:'DM Mono',monospace;font-size:0.82rem;line-height:1.7;color:var(--green)}
.output-text.error{color:var(--accent)}
.output-text.info{color:var(--muted)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
/*  ASSESSMENT (LinkedIn-style)               */
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.assessment-layout{max-width:900px;margin:0 auto;padding:2rem 2.5rem;padding-top:calc(64px + 2rem)}
.assessment-header-card{background:var(--card-bg);border:1px solid var(--border);border-radius:16px;padding:2rem;margin-bottom:1.5rem;display:flex;align-items:center;gap:1.5rem}
.assessment-icon-big{width:70px;height:70px;border-radius:16px;display:flex;align-items:center;justify-content:center;font-size:2rem;flex-shrink:0}
.assessment-header-info h2{font-family:'Syne',sans-serif;font-size:1.5rem;font-weight:800;letter-spacing:-0.02em}
.assessment-header-info p{color:var(--muted);font-size:0.88rem;margin-top:0.3rem;line-height:1.6}
.assessment-meta-row{display:flex;gap:1rem;margin-top:0.8rem;flex-wrap:wrap}
.assessment-meta-item{display:flex;align-items:center;gap:0.4rem;font-size:0.8rem;color:var(--muted)}
.assessment-meta-item strong{color:var(--white)}

.quiz-progress-bar{height:4px;background:var(--border);border-radius:2px;overflow:hidden;margin-bottom:1.5rem}
.quiz-progress-fill{height:100%;background:linear-gradient(90deg,var(--accent2),var(--green));border-radius:2px;transition:width 0.4s ease}

.quiz-card{background:var(--card-bg);border:1px solid var(--border);border-radius:16px;padding:2rem;margin-bottom:1rem}
.quiz-q-num{font-family:'DM Mono',monospace;font-size:0.75rem;color:var(--muted);text-transform:uppercase;letter-spacing:0.08em;margin-bottom:0.7rem}
.quiz-question{font-family:'Syne',sans-serif;font-size:1.1rem;font-weight:700;line-height:1.4;margin-bottom:1.5rem;letter-spacing:-0.01em}
.quiz-code{background:#0d0d0d;border:1px solid var(--border);border-radius:8px;padding:1rem 1.2rem;font-family:'DM Mono',monospace;font-size:0.8rem;line-height:1.7;margin-bottom:1.5rem;overflow-x:auto;white-space:pre}

.quiz-options{display:flex;flex-direction:column;gap:0.6rem}
.quiz-option{display:flex;align-items:flex-start;gap:0.9rem;padding:0.9rem 1.1rem;border-radius:10px;border:1px solid var(--border);cursor:pointer;font-size:0.9rem;transition:all 0.2s;background:transparent;text-align:left;color:var(--white);font-family:'DM Sans',sans-serif;width:100%}
.quiz-option:hover{border-color:rgba(255,255,255,0.22);background:rgba(255,255,255,0.03)}
.quiz-option.selected{border-color:var(--accent2);background:rgba(59,91,255,0.1)}
.quiz-option.correct{border-color:var(--green);background:rgba(45,204,135,0.1);color:var(--green)}
.quiz-option.wrong{border-color:var(--accent);background:rgba(255,92,53,0.1);color:var(--accent)}
.quiz-option.revealed-correct{border-color:var(--green);background:rgba(45,204,135,0.08)}
.option-letter{width:26px;height:26px;border-radius:6px;background:rgba(255,255,255,0.07);display:flex;align-items:center;justify-content:center;font-family:'DM Mono',monospace;font-size:0.75rem;font-weight:700;flex-shrink:0}
.quiz-option.selected .option-letter{background:var(--accent2);color:white}
.quiz-option.correct .option-letter{background:var(--green);color:#000}
.quiz-option.wrong .option-letter{background:var(--accent);color:white}
.quiz-explanation{background:rgba(45,204,135,0.07);border:1px solid rgba(45,204,135,0.2);border-radius:10px;padding:1rem 1.2rem;margin-top:1rem;font-size:0.87rem;color:rgba(255,255,255,0.8);line-height:1.6;display:none}
.quiz-explanation.show{display:block}
.quiz-explanation strong{color:var(--green)}

.quiz-actions{display:flex;justify-content:space-between;align-items:center;margin-top:1.5rem}
.quiz-timer{font-family:'DM Mono',monospace;font-size:0.85rem;color:var(--muted);display:flex;align-items:center;gap:0.4rem}
.quiz-timer.urgent{color:var(--accent);animation:pulse 1s infinite}
.quiz-submit-btn{background:var(--accent2);color:white;border:none;padding:0.75rem 2rem;border-radius:8px;font-family:'Syne',sans-serif;font-weight:700;font-size:0.95rem;cursor:pointer;transition:all 0.2s}
.quiz-submit-btn:hover{background:#2a4aee;transform:translateY(-1px)}
.quiz-submit-btn:disabled{opacity:0.4;cursor:not-allowed;transform:none}

/* Results screen */
.results-card{background:var(--card-bg);border:1px solid var(--border);border-radius:16px;padding:3rem;text-align:center}
.results-score-ring{width:120px;height:120px;border-radius:50%;margin:0 auto 1.5rem;display:flex;align-items:center;justify-content:center;position:relative}
.results-score-ring svg{position:absolute;top:0;left:0;width:100%;height:100%;transform:rotate(-90deg)}
.results-score-ring .score-text{font-family:'Syne',sans-serif;font-size:2rem;font-weight:800;position:relative;z-index:1}
.results-title{font-family:'Syne',sans-serif;font-size:1.5rem;font-weight:800;margin-bottom:0.5rem}
.results-sub{color:var(--muted);font-size:0.9rem;margin-bottom:2rem}
.results-breakdown{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;margin-bottom:2rem}
.rb-item{background:#1a1a1a;border-radius:10px;padding:1rem;text-align:center}
.rb-val{font-family:'Syne',sans-serif;font-size:1.5rem;font-weight:800;margin-bottom:0.2rem}
.rb-label{font-size:0.78rem;color:var(--muted)}
.cert-banner{background:linear-gradient(135deg,rgba(247,224,75,0.1),rgba(255,92,53,0.08));border:1px solid rgba(247,224,75,0.25);border-radius:12px;padding:1.2rem;margin-bottom:2rem;display:flex;align-items:center;gap:1rem;text-align:left}
.cert-icon{font-size:2rem;flex-shrink:0}
.cert-info h4{font-family:'Syne',sans-serif;font-weight:700;font-size:0.95rem;margin-bottom:0.2rem}
.cert-info p{font-size:0.82rem;color:var(--muted)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
/*  AI INTERVIEW (preserved from before)       */
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.interview-section{background:#080808;position:relative;overflow:hidden;padding:5.5rem 2.5rem}
.interview-section::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:radial-gradient(ellipse at 20% 50%,rgba(247,224,75,0.06) 0%,transparent 60%),radial-gradient(ellipse at 80% 20%,rgba(59,91,255,0.07) 0%,transparent 60%);pointer-events:none}
.interview-grid{display:grid;grid-template-columns:300px 1fr;gap:2rem;align-items:start}
.interview-setup{display:flex;flex-direction:column;gap:1rem}
.setup-card{background:var(--card-bg);border:1px solid var(--border);border-radius:14px;padding:1.3rem}
.setup-card h4{font-family:'Syne',sans-serif;font-size:0.82rem;font-weight:700;margin-bottom:0.8rem;color:var(--muted);text-transform:uppercase;letter-spacing:0.08em}
.role-chips{display:flex;flex-wrap:wrap;gap:0.4rem}
.role-chip{padding:0.35rem 0.8rem;border-radius:100px;border:1px solid var(--border);font-size:0.78rem;cursor:pointer;transition:all 0.2s;background:transparent;color:var(--muted);font-family:'DM Sans',sans-serif}
.role-chip:hover{border-color:var(--yellow);color:var(--yellow)}
.role-chip.active{background:rgba(247,224,75,0.15);border-color:var(--yellow);color:var(--yellow);font-weight:600}
.difficulty-row{display:flex;gap:0.4rem}
.diff-btn{flex:1;padding:0.45rem;border-radius:7px;border:1px solid var(--border);background:transparent;color:var(--muted);font-size:0.78rem;cursor:pointer;font-family:'DM Sans',sans-serif;transition:all 0.2s;text-align:center}
.diff-btn.active.easy{background:rgba(45,204,135,0.15);border-color:var(--green);color:var(--green)}
.diff-btn.active.medium{background:rgba(247,224,75,0.15);border-color:var(--yellow);color:var(--yellow)}
.diff-btn.active.hard{background:rgba(255,92,53,0.15);border-color:var(--accent);color:var(--accent)}
.type-select{display:flex;flex-direction:column;gap:0.35rem}
.type-opt{display:flex;align-items:center;gap:0.6rem;padding:0.6rem 0.8rem;border-radius:8px;border:1px solid var(--border);cursor:pointer;transition:all 0.2s;font-size:0.83rem;color:var(--muted);background:transparent;text-align:left;font-family:'DM Sans',sans-serif;width:100%}
.type-opt:hover{border-color:rgba(255,255,255,0.2);color:var(--white)}
.type-opt.active{background:rgba(247,224,75,0.1);border-color:var(--yellow);color:var(--white)}
.start-btn{width:100%;padding:0.9rem;background:var(--yellow);color:#000;border:none;border-radius:10px;font-family:'Syne',sans-serif;font-weight:800;font-size:0.95rem;cursor:pointer;transition:all 0.2s}
.start-btn:hover{background:#ffe930;transform:translateY(-2px);box-shadow:0 8px 25px rgba(247,224,75,0.25)}
.start-btn:disabled{opacity:0.5;cursor:not-allowed;transform:none;box-shadow:none}
.interview-window{background:var(--card-bg);border:1px solid var(--border);border-radius:16px;overflow:hidden;display:flex;flex-direction:column;height:600px;position:relative}
.interview-topbar{background:#1a1a1a;border-bottom:1px solid var(--border);padding:0.9rem 1.3rem;display:flex;align-items:center;justify-content:space-between}
.interviewer-info{display:flex;align-items:center;gap:0.8rem}
.ai-avatar{width:34px;height:34px;border-radius:50%;background:linear-gradient(135deg,var(--yellow),var(--accent));display:flex;align-items:center;justify-content:center;font-size:0.95rem;flex-shrink:0;position:relative}
.ai-avatar::after{content:'';position:absolute;bottom:0;right:0;width:9px;height:9px;background:var(--green);border-radius:50%;border:2px solid #1a1a1a}
.ai-name{font-family:'Syne',sans-serif;font-weight:700;font-size:0.88rem}
.ai-status{font-size:0.72rem;color:var(--green)}
.session-info{display:flex;align-items:center;gap:0.8rem}
.session-badge{background:rgba(255,255,255,0.06);border:1px solid var(--border);padding:0.25rem 0.7rem;border-radius:100px;font-size:0.72rem;color:var(--muted);font-family:'DM Mono',monospace;display:none}
.session-badge.visible{display:block}
.messages-area{flex:1;overflow-y:auto;padding:1.2rem;display:flex;flex-direction:column;gap:1rem;scroll-behavior:smooth}
.messages-area::-webkit-scrollbar{width:3px}
.messages-area::-webkit-scrollbar-thumb{background:var(--border);border-radius:2px}
.welcome-state{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;text-align:center;gap:0.8rem;color:var(--muted)}
.welcome-state .big-icon{font-size:2.5rem;margin-bottom:0.3rem}
.welcome-state h3{font-family:'Syne',sans-serif;font-weight:700;font-size:1.1rem;color:var(--white)}
.welcome-state p{font-size:0.85rem;max-width:300px;line-height:1.6}
.msg{display:flex;gap:0.7rem;animation:msgIn 0.3s ease}
@keyframes msgIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
.msg.user{flex-direction:row-reverse}
.msg-av{width:30px;height:30px;border-radius:50%;flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:0.75rem;font-weight:700}
.msg.ai .msg-av{background:linear-gradient(135deg,var(--yellow),var(--accent));color:#000}
.msg.user .msg-av{background:var(--accent2);color:white}
.msg-bubble{max-width:78%;padding:0.8rem 1rem;border-radius:12px;font-size:0.86rem;line-height:1.65}
.msg.ai .msg-bubble{background:#1e1e1e;border:1px solid var(--border);border-top-left-radius:4px;color:rgba(255,255,255,0.85)}
.msg.user .msg-bubble{background:var(--accent2);color:white;border-top-right-radius:4px}
.msg.feedback .msg-bubble{background:rgba(45,204,135,0.07);border:1px solid rgba(45,204,135,0.22);color:rgba(255,255,255,0.85);width:100%;max-width:100%}
.feedback-header{display:flex;align-items:center;gap:0.4rem;font-family:'Syne',sans-serif;font-weight:700;font-size:0.78rem;color:var(--green);margin-bottom:0.5rem;text-transform:uppercase;letter-spacing:0.06em}
.score-pills{display:flex;gap:0.4rem;flex-wrap:wrap;margin-top:0.7rem}
.score-pill{padding:0.18rem 0.6rem;border-radius:100px;font-size:0.7rem;font-weight:600;font-family:'DM Mono',monospace}
.score-pill.good{background:rgba(45,204,135,0.15);color:var(--green)}
.score-pill.improve{background:rgba(255,92,53,0.15);color:var(--accent)}
.typing-indicator{display:flex;align-items:center;gap:0.7rem;padding:0.3rem 0}
.typing-dots{display:flex;gap:4px;background:#1e1e1e;border:1px solid var(--border);padding:0.6rem 0.9rem;border-radius:12px;border-top-left-radius:4px}
.typing-dots span{width:5px;height:5px;background:var(--muted);border-radius:50%;animation:bounce 1.2s infinite}
.typing-dots span:nth-child(2){animation-delay:0.2s}
.typing-dots span:nth-child(3){animation-delay:0.4s}
@keyframes bounce{0%,60%,100%{transform:translateY(0)}30%{transform:translateY(-5px);background:var(--yellow)}}
.interview-input-area{border-top:1px solid var(--border);padding:0.9rem 1.2rem;background:#111}
.input-row{display:flex;gap:0.7rem;align-items:flex-end}
.answer-input{flex:1;background:#1a1a1a;border:1px solid var(--border);border-radius:10px;padding:0.7rem 0.9rem;color:var(--white);font-family:'DM Sans',sans-serif;font-size:0.88rem;resize:none;min-height:40px;max-height:120px;line-height:1.5;outline:none;transition:border-color 0.2s}
.answer-input:focus{border-color:rgba(255,255,255,0.2)}
.answer-input::placeholder{color:var(--muted)}
.answer-input:disabled{opacity:0.4;cursor:not-allowed}
.send-btn{width:40px;height:40px;border-radius:9px;background:var(--yellow);border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:1rem;transition:all 0.2s;flex-shrink:0;color:#000}
.send-btn:hover{background:#ffe930;transform:scale(1.05)}
.send-btn:disabled{opacity:0.4;cursor:not-allowed;transform:none}
.progress-bar-wrap{height:3px;background:var(--border);overflow:hidden}
.progress-bar-fill{height:100%;background:linear-gradient(90deg,var(--yellow),var(--accent));transition:width 0.5s ease;width:0%}

@media(max-width:900px){
  .hero-inner,.interview-grid{grid-template-columns:1fr}
  .code-window{display:none}
  .footer-grid{grid-template-columns:1fr 1fr}
  .nav-links{display:none}
  .dashboard-layout,.lesson-layout{grid-template-columns:1fr}
  .sidebar,.lesson-sidebar{display:none}
  .dash-grid,.results-breakdown{grid-template-columns:1fr 1fr}
  .lesson-layout{grid-template-columns:1fr}
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
/*  INTERVIEW QUESTIONS HUB â€” PREMIUM         */
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.iq-layout{display:grid;grid-template-columns:270px 1fr;min-height:100vh;padding-top:64px}
.iq-sidebar{background:var(--sidebar);border-right:1px solid var(--border);padding:1rem 0;position:sticky;top:64px;height:calc(100vh - 64px);overflow-y:auto}
.iq-sidebar::-webkit-scrollbar{width:3px}.iq-sidebar::-webkit-scrollbar-thumb{background:var(--border)}
.iq-sidebar-section{font-family:'DM Mono',monospace;font-size:0.63rem;color:var(--muted);text-transform:uppercase;letter-spacing:0.12em;padding:0.9rem 1.2rem 0.25rem;margin-top:0.2rem}
.iq-sidebar-item{display:flex;align-items:center;gap:0.7rem;padding:0.6rem 1.2rem;cursor:pointer;font-size:0.85rem;color:var(--muted);transition:all 0.15s;border-left:3px solid transparent;position:relative}
.iq-sidebar-item:hover{background:rgba(255,255,255,0.04);color:var(--white)}
.iq-sidebar-item.active{background:rgba(247,224,75,0.07);color:var(--yellow);border-left-color:var(--yellow);font-weight:600}
.iq-sidebar-item .iq-icon{width:22px;text-align:center;flex-shrink:0}
.iq-sidebar-item .iq-count{margin-left:auto;background:rgba(255,255,255,0.07);padding:0.1rem 0.5rem;border-radius:100px;font-family:'DM Mono',monospace;font-size:0.65rem;color:var(--muted)}
.iq-sidebar-item.active .iq-count{background:rgba(247,224,75,0.15);color:var(--yellow)}
.iq-sidebar-divider{height:1px;background:var(--border);margin:0.5rem 1.2rem}

.iq-content{overflow-y:auto;max-height:calc(100vh - 64px)}
.iq-content::-webkit-scrollbar{width:4px}.iq-content::-webkit-scrollbar-thumb{background:var(--border)}

/* Search bar */
.iq-search-bar{position:sticky;top:0;z-index:10;background:rgba(10,10,10,0.95);backdrop-filter:blur(12px);border-bottom:1px solid var(--border);padding:1rem 2.5rem}
.iq-search-inner{display:flex;align-items:center;gap:1rem;max-width:800px}
.iq-search-input{flex:1;background:rgba(255,255,255,0.05);border:1px solid var(--border);border-radius:8px;padding:0.6rem 1rem 0.6rem 2.5rem;font-family:'DM Sans',sans-serif;font-size:0.88rem;color:var(--white);outline:none;transition:border-color 0.2s}
.iq-search-input::placeholder{color:var(--muted)}
.iq-search-input:focus{border-color:rgba(247,224,75,0.4)}
.iq-search-wrap{position:relative;flex:1}
.iq-search-wrap::before{content:'ğŸ”';position:absolute;left:0.75rem;top:50%;transform:translateY(-50%);font-size:0.85rem;pointer-events:none}
.iq-search-count{font-family:'DM Mono',monospace;font-size:0.75rem;color:var(--muted);white-space:nowrap}

.iq-main{padding:2rem 2.5rem 3rem}

/* Hero */
.iq-hero{margin-bottom:2rem}
.iq-hero-eyebrow{display:inline-flex;align-items:center;gap:0.5rem;background:rgba(247,224,75,0.1);border:1px solid rgba(247,224,75,0.25);color:var(--yellow);padding:0.3rem 0.9rem;border-radius:100px;font-size:0.73rem;font-weight:700;letter-spacing:0.07em;text-transform:uppercase;margin-bottom:1rem}
.iq-hero h2{font-family:'Syne',sans-serif;font-size:1.8rem;font-weight:800;letter-spacing:-0.03em;margin-bottom:0.4rem}
.iq-hero p{color:var(--muted);font-size:0.87rem;line-height:1.6}
.iq-hero-stats{display:flex;gap:1.5rem;margin-top:1rem;flex-wrap:wrap}
.iq-hero-stat{font-family:'DM Mono',monospace;font-size:0.75rem;color:var(--muted);display:flex;align-items:center;gap:0.35rem}
.iq-hero-stat strong{color:var(--white)}

/* Type filter tabs */
.iq-type-tabs{display:flex;gap:0.4rem;flex-wrap:wrap;margin-bottom:1.5rem}
.iq-type-tab{padding:0.35rem 0.9rem;border-radius:100px;border:1px solid var(--border);font-size:0.78rem;cursor:pointer;font-family:'DM Sans',sans-serif;font-weight:500;background:transparent;color:var(--muted);transition:all 0.2s}
.iq-type-tab:hover{border-color:rgba(255,255,255,0.2);color:var(--white)}
.iq-type-tab.active{background:var(--yellow);color:#000;border-color:var(--yellow);font-weight:700}

/* Must Prepare Banner */
.must-banner{background:linear-gradient(135deg,rgba(255,92,53,0.1),rgba(247,224,75,0.06));border:1px solid rgba(255,92,53,0.22);border-radius:14px;padding:1.4rem 1.6rem;margin-bottom:2rem;display:flex;align-items:flex-start;gap:1.2rem}
.must-banner-icon{font-size:2rem;flex-shrink:0;line-height:1}
.must-banner-info h3{font-family:'Syne',sans-serif;font-weight:800;font-size:1rem;color:var(--accent);margin-bottom:0.3rem}
.must-banner-info p{font-size:0.83rem;color:rgba(255,255,255,0.65);line-height:1.6}
.company-tags{display:flex;gap:0.4rem;flex-wrap:wrap;margin-top:0.7rem}
.co-tag{font-size:0.68rem;font-weight:700;padding:0.18rem 0.6rem;border-radius:4px;font-family:'DM Mono',monospace;letter-spacing:0.03em}
.co-google{background:rgba(66,133,244,0.15);color:#4285f4}
.co-meta{background:rgba(24,119,242,0.15);color:#1877f2}
.co-amazon{background:rgba(255,153,0,0.15);color:#ff9900}
.co-microsoft{background:rgba(0,120,212,0.15);color:#0078d4}
.co-netflix{background:rgba(229,9,20,0.15);color:#e50914}
.co-apple{background:rgba(255,255,255,0.1);color:rgba(255,255,255,0.7)}

/* Section Header */
.iq-section-hdr{display:flex;align-items:center;gap:0.8rem;margin-bottom:1rem;padding-bottom:0.7rem;border-bottom:1px solid var(--border)}
.iq-section-hdr-title{font-family:'Syne',sans-serif;font-weight:800;font-size:1.1rem;letter-spacing:-0.02em;display:flex;align-items:center;gap:0.5rem}
.iq-section-hdr-count{font-family:'DM Mono',monospace;font-size:0.7rem;color:var(--muted);background:rgba(255,255,255,0.06);padding:0.15rem 0.55rem;border-radius:100px;margin-left:0.2rem}
.iq-section-desc{font-size:0.82rem;color:var(--muted);margin-left:auto}

/* Question list */
.iq-questions{display:flex;flex-direction:column;gap:0.55rem;margin-bottom:2.5rem}

/* Question Card â€” premium version */
.iq-q-card{border:1px solid var(--border);border-radius:11px;overflow:hidden;transition:border-color 0.2s,box-shadow 0.2s;background:var(--card-bg)}
.iq-q-card:hover{border-color:rgba(255,255,255,0.14)}
.iq-q-card.must{border-left:3px solid var(--accent)}
.iq-q-card.must:hover{border-color:rgba(255,92,53,0.4);box-shadow:0 4px 24px rgba(255,92,53,0.08)}
.iq-q-card.open{border-color:rgba(247,224,75,0.25)}
.iq-q-card.open.must{border-color:rgba(255,92,53,0.4)}

.iq-q-header{display:flex;align-items:flex-start;gap:0.9rem;padding:1rem 1.2rem;cursor:pointer;user-select:none}
.iq-q-num{font-family:'DM Mono',monospace;font-size:0.68rem;color:var(--muted);width:26px;flex-shrink:0;padding-top:0.18rem}
.iq-q-body{flex:1;min-width:0}
.iq-q-text{font-size:0.9rem;font-weight:500;line-height:1.45;color:var(--white);margin-bottom:0.5rem}
.iq-q-meta{display:flex;align-items:center;gap:0.5rem;flex-wrap:wrap}
.iq-q-arrow{color:var(--muted);font-size:0.7rem;transition:transform 0.2s;flex-shrink:0;margin-top:0.2rem;padding:0.3rem}
.iq-share-icon{color:rgba(255,255,255,0.2);flex-shrink:0;padding:0.4rem;border-radius:6px;transition:all 0.2s;display:flex;align-items:center;justify-content:center}
.iq-share-icon:hover{color:#1d9bf0;background:rgba(29,155,240,0.12)}
.iq-q-card.open .iq-q-arrow{transform:rotate(180deg);color:var(--yellow)}

/* Tags */
.iq-tag{font-size:0.63rem;font-weight:700;padding:0.13rem 0.5rem;border-radius:100px;font-family:'DM Mono',monospace;white-space:nowrap;letter-spacing:0.03em}
.iq-tag.must{background:rgba(255,92,53,0.15);color:var(--accent)}
.iq-tag.theory{background:rgba(59,91,255,0.15);color:#7c9eff}
.iq-tag.tech{background:rgba(45,204,135,0.15);color:var(--green)}
.iq-tag.star{background:rgba(247,224,75,0.12);color:var(--yellow)}
.iq-tag.hard{background:rgba(255,92,53,0.1);color:var(--accent)}
.iq-tag.medium{background:rgba(247,224,75,0.1);color:var(--yellow)}
.iq-tag.easy{background:rgba(45,204,135,0.1);color:var(--green)}
.iq-tag.dsa{background:rgba(168,85,247,0.15);color:#c084fc}
.iq-tag.react{background:rgba(97,218,251,0.12);color:#61dafb}

/* Frequency dots */
.iq-freq{display:flex;align-items:center;gap:0.2rem}
.freq-dot{width:6px;height:6px;border-radius:50%;background:rgba(255,255,255,0.1)}
.freq-dot.lit{background:var(--yellow)}
.freq-label{font-family:'DM Mono',monospace;font-size:0.62rem;color:var(--muted);margin-left:0.2rem}

/* Answer panel */
.iq-q-answer{display:none;border-top:1px solid var(--border);padding:1.2rem 1.2rem 1.4rem 1.2rem}
.iq-q-card.open .iq-q-answer{display:block}
.iq-q-answer p{font-size:0.86rem;color:rgba(255,255,255,0.78);line-height:1.75;margin-bottom:0.7rem}
.iq-q-answer p:last-child{margin-bottom:0}
.iq-q-answer code{background:rgba(255,255,255,0.08);padding:0.1em 0.42em;border-radius:4px;font-family:'DM Mono',monospace;font-size:0.82em;color:#c3e88d}
.iq-q-answer pre{background:#080808;border:1px solid rgba(255,255,255,0.06);border-radius:8px;padding:1rem 1.2rem;margin:0.7rem 0;overflow-x:auto;font-family:'DM Mono',monospace;font-size:0.78rem;line-height:1.72;color:#eeffff;white-space:pre}
.iq-q-answer strong{color:var(--white);font-weight:600}
.iq-q-answer ul,ol{margin:0.4rem 0 0.7rem 1.1rem}
.iq-q-answer li{font-size:0.86rem;color:rgba(255,255,255,0.75);margin-bottom:0.3rem;line-height:1.6}
.iq-q-answer h4{font-family:'Syne',sans-serif;font-weight:700;font-size:0.88rem;margin:1rem 0 0.4rem;color:var(--white)}

/* Complexity badge */
.complexity-row{display:flex;gap:0.6rem;margin-bottom:0.8rem;flex-wrap:wrap}
.complexity-pill{display:flex;align-items:center;gap:0.3rem;background:rgba(168,85,247,0.1);border:1px solid rgba(168,85,247,0.2);padding:0.2rem 0.6rem;border-radius:6px;font-family:'DM Mono',monospace;font-size:0.72rem;color:#c084fc}

/* Answer footer */
.iq-answer-footer{margin-top:1rem;display:flex;align-items:center;gap:0.8rem;padding-top:0.8rem;border-top:1px solid rgba(255,255,255,0.06)}
.iq-answer-footer span{font-size:0.74rem;color:var(--muted)}
.iq-answer-footer .co-tags{display:flex;gap:0.3rem}
.iq-practice-btn{background:rgba(247,224,75,0.12);border:1px solid rgba(247,224,75,0.22);color:var(--yellow);padding:0.3rem 0.85rem;border-radius:6px;font-size:0.74rem;font-weight:600;cursor:pointer;font-family:'DM Sans',sans-serif;transition:all 0.2s;white-space:nowrap}
.iq-practice-btn:hover{background:rgba(247,224,75,0.22)}
.iq-tweet-btn{background:rgba(29,155,240,0.1);border:1px solid rgba(29,155,240,0.25);color:#1d9bf0;padding:0.3rem 0.85rem;border-radius:6px;font-size:0.74rem;font-weight:600;cursor:pointer;font-family:'DM Sans',sans-serif;transition:all 0.2s;white-space:nowrap;display:flex;align-items:center;gap:0.35rem;text-decoration:none}
.iq-tweet-btn:hover{background:rgba(29,155,240,0.18)}

/* STAR framework box */
.star-box{background:rgba(59,91,255,0.06);border:1px solid rgba(59,91,255,0.18);border-radius:8px;padding:1rem 1.1rem;margin:0.8rem 0}
.star-box h5{font-family:'Syne',sans-serif;font-size:0.75rem;font-weight:700;color:#7c9eff;margin-bottom:0.6rem;text-transform:uppercase;letter-spacing:0.07em}
.star-row{display:grid;grid-template-columns:80px 1fr;gap:0.35rem 0.8rem}
.star-label{font-family:'DM Mono',monospace;font-size:0.7rem;color:#7c9eff;font-weight:700;padding-top:0.1rem}
.star-text{font-size:0.83rem;color:rgba(255,255,255,0.73);line-height:1.55}

/* Empty state */
.iq-empty{text-align:center;padding:4rem 2rem;color:var(--muted)}
.iq-empty .iq-empty-icon{font-size:3rem;margin-bottom:1rem}
.iq-empty p{font-size:0.9rem}

/* Most Asked callout section */
.most-asked-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:0.6rem;margin-bottom:2rem}
.most-asked-chip{background:var(--card-bg);border:1px solid var(--border);border-radius:10px;padding:0.9rem 1rem;cursor:pointer;transition:all 0.2s}
.most-asked-chip:hover{border-color:rgba(255,255,255,0.18);transform:translateY(-2px)}
.mac-icon{font-size:1.5rem;margin-bottom:0.4rem}
.mac-label{font-family:'Syne',sans-serif;font-weight:700;font-size:0.83rem;margin-bottom:0.2rem}
.mac-count{font-family:'DM Mono',monospace;font-size:0.68rem;color:var(--muted)}
.mac-freq{height:3px;border-radius:2px;margin-top:0.6rem}

@media(max-width:900px){
  .iq-layout{grid-template-columns:1fr}
  .iq-sidebar{display:none}
  .iq-main{padding:1.2rem}
  .iq-search-bar{padding:0.8rem 1.2rem}
}
</style>
<!-- â–¶ Pyodide Python Runner (lazy-loaded) -->
<script>
  // Pyodide is loaded lazily on first "Run Code" click to avoid slowing page load
  function loadPyodide(opts) {
    return new Promise((res, rej) => {
      if (window.loadPyodide && window.loadPyodide._loaded) return res(window._pyodide);
      const s = document.createElement('script');
      s.src = 'https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js';
      s.onload = async () => {
        try {
          const py = await window.loadPyodide(opts);
          window._pyodide = py;
          window.loadPyodide._loaded = true;
          res(py);
        } catch(e) { rej(e); }
      };
      s.onerror = rej;
      document.head.appendChild(s);
    });
  }
</script>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!--  VIEW: LOGIN                            -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="view" id="view-login">
  <div class="auth-view">
    <div class="auth-brand">
      <div class="auth-brand-logo" onclick="showView('landing')">Learn<span>Craft</span></div>
      <div class="auth-brand-content">
        <h2>Build skills that<br><span style="color:var(--accent)">get you hired.</span></h2>
        <p>Interactive courses, real projects, AI interview practice, and 140+ curated interview questions â€” everything you need to land your dream tech job.</p>
        <div class="auth-brand-stats">
          <div class="abs"><div class="abs-num">50M+</div><div class="abs-label">Learners</div></div>
          <div class="abs"><div class="abs-num">600+</div><div class="abs-label">Courses</div></div>
          <div class="abs"><div class="abs-num">95%</div><div class="abs-label">Satisfaction</div></div>
        </div>
        <div class="auth-testimonial">
          <p>"I went from zero coding knowledge to a junior dev role in under a year. The hands-on approach made concepts actually stick."</p>
          <div class="auth-testimonial-footer">
            <div class="auth-testimonial-avatar">AK</div>
            <div><div class="auth-testimonial-name">Anjali Kumar</div><div class="auth-testimonial-role">Junior Dev Â· Bangalore</div></div>
          </div>
        </div>
      </div>
      <div></div>
    </div>
    <div class="auth-form-panel">
      <div class="auth-form-box">
        <h1>Welcome back</h1>
        <p class="auth-sub">Don't have an account? <a onclick="showView('signup')">Sign up free â†’</a></p>
        <div class="auth-social-btns">
          <button class="auth-social-btn" onclick="authWithGoogle()">
            <svg viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
            Continue with Google
          </button>
          <button class="auth-social-btn" onclick="authWithGitHub()">
            <svg viewBox="0 0 24 24" fill="white"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0 0 24 12c0-6.63-5.37-12-12-12z"/></svg>
            Continue with GitHub
          </button>
        </div>
        <div class="auth-divider"><span>or sign in with email</span></div>
        <div class="auth-error" id="loginError"></div>
        <div class="auth-field">
          <label>Email address</label>
          <input type="email" id="loginEmail" placeholder="you@example.com" autocomplete="email">
        </div>
        <div class="auth-field">
          <label>Password</label>
          <input type="password" id="loginPassword" placeholder="Your password" autocomplete="current-password">
        </div>
        <div class="auth-forgot" onclick="handleForgotPassword()">Forgot password?</div>
        <button class="auth-submit" id="loginBtn" onclick="handleLogin()">Sign in to LearnCraft</button>
        <p class="auth-terms">By continuing, you agree to our <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a>.</p>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!--  VIEW: SIGNUP                           -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="view" id="view-signup">
  <div class="auth-view">
    <div class="auth-brand">
      <div class="auth-brand-logo" onclick="showView('landing')">Learn<span>Craft</span></div>
      <div class="auth-brand-content">
        <h2>Start learning.<br><span style="color:var(--yellow)">For free.</span></h2>
        <p>No credit card required. Get instant access to 50+ free courses, AI interview practice, and 140+ curated FAANG interview questions.</p>
        <div style="display:flex;flex-direction:column;gap:0.9rem;margin-top:2rem">
          <div style="display:flex;align-items:center;gap:0.9rem;font-size:0.9rem"><div style="width:32px;height:32px;border-radius:8px;background:rgba(45,204,135,0.12);display:flex;align-items:center;justify-content:center;color:var(--green);font-size:1rem;flex-shrink:0">âœ“</div><span>In-browser coding â€” no setup, runs instantly</span></div>
          <div style="display:flex;align-items:center;gap:0.9rem;font-size:0.9rem"><div style="width:32px;height:32px;border-radius:8px;background:rgba(45,204,135,0.12);display:flex;align-items:center;justify-content:center;color:var(--green);font-size:1rem;flex-shrink:0">âœ“</div><span>AI Interview Practice with live feedback</span></div>
          <div style="display:flex;align-items:center;gap:0.9rem;font-size:0.9rem"><div style="width:32px;height:32px;border-radius:8px;background:rgba(45,204,135,0.12);display:flex;align-items:center;justify-content:center;color:var(--green);font-size:1rem;flex-shrink:0">âœ“</div><span>XP system â€” track your progress every lesson</span></div>
          <div style="display:flex;align-items:center;gap:0.9rem;font-size:0.9rem"><div style="width:32px;height:32px;border-radius:8px;background:rgba(45,204,135,0.12);display:flex;align-items:center;justify-content:center;color:var(--green);font-size:1rem;flex-shrink:0">âœ“</div><span>LinkedIn-style skill certificates you can share</span></div>
        </div>
      </div>
      <div></div>
    </div>
    <div class="auth-form-panel">
      <div class="auth-form-box">
        <h1>Create your account</h1>
        <p class="auth-sub">Already have an account? <a onclick="showView('login')">Sign in â†’</a></p>
        <div class="auth-social-btns">
          <button class="auth-social-btn" onclick="authWithGoogle()">
            <svg viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
            Sign up with Google
          </button>
          <button class="auth-social-btn" onclick="authWithGitHub()">
            <svg viewBox="0 0 24 24" fill="white"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0 0 24 12c0-6.63-5.37-12-12-12z"/></svg>
            Sign up with GitHub
          </button>
        </div>
        <div class="auth-divider"><span>or sign up with email</span></div>
        <div class="auth-error" id="signupError"></div>
        <div class="auth-success" id="signupSuccess"></div>
        <div class="auth-field-row">
          <div class="auth-field">
            <label>First name</label>
            <input type="text" id="signupFirst" placeholder="Alex" autocomplete="given-name">
          </div>
          <div class="auth-field">
            <label>Last name</label>
            <input type="text" id="signupLast" placeholder="Kim" autocomplete="family-name">
          </div>
        </div>
        <div class="auth-field">
          <label>Email address</label>
          <input type="email" id="signupEmail" placeholder="you@example.com" autocomplete="email">
        </div>
        <div class="auth-field">
          <label>Password</label>
          <input type="password" id="signupPassword" placeholder="At least 8 characters" autocomplete="new-password">
        </div>
        <button class="auth-submit" id="signupBtn" onclick="handleSignup()">Create free account â†’</button>
        <p class="auth-terms">By creating an account, you agree to our <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a>. We'll never spam you.</p>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!--  GLOBAL NAV                             -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<nav>
  <a class="logo" onclick="showView('landing')">Learn<span>Craft</span></a>
  <ul class="nav-links" id="navLinks">
    <li><a onclick="showView('landing');scrollToSection('courses')">Courses</a></li>
    <li><a onclick="showView('landing');scrollToSection('platform')">Platform</a></li>
    <li><a onclick="showView('assessment-select')">ğŸ“ Assessments</a></li>
    <li><a onclick="showView('interview-questions')" style="color:var(--yellow);font-weight:600">ğŸ”¥ Interview Qs</a></li>
    <li><a onclick="showView('landing');scrollToSection('interview')">ğŸ™ AI Interview</a></li>
    <li><a onclick="showView('landing');scrollToSection('pricing')">Pricing</a></li>
    <li><a class="nav-cta" onclick="showView('signup')">Start Free</a></li>
  </ul>
  <div class="nav-user" id="navUser">
    <span class="xp-badge" id="xpBadge">âš¡ 0 XP</span>
    <div class="nav-user-menu">
      <div class="nav-avatar" id="navAvatar" onclick="toggleUserMenu()" title="Account">LC</div>
      <div class="nav-dropdown" id="navDropdown">
        <div class="nav-user-info">
          <div class="nav-user-name" id="ddName">Learner</div>
          <div class="nav-user-email" id="ddEmail"></div>
        </div>
        <div class="nav-dropdown-item" onclick="showView('dashboard');closeUserMenu()">ğŸ“Š Dashboard</div>
        <div class="nav-dropdown-item" onclick="showView('interview-questions');closeUserMenu()">ğŸ”¥ Interview Questions</div>
        <div class="nav-dropdown-item" onclick="showView('assessment-select');closeUserMenu()">ğŸ“ Assessments</div>
        <div class="nav-dropdown-sep"></div>
        <div class="nav-dropdown-item danger" onclick="handleLogout()">â†© Sign out</div>
      </div>
    </div>
  </div>
</nav>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!--  VIEW: LANDING                          -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="view active" id="view-landing">

  <!-- HERO -->
  <section class="hero">
    <div class="hero-inner">
      <div>
        <div class="hero-eyebrow">Now with AI Interview Practice</div>
        <h1>Build skills that <span class="accent">actually</span> get you <span class="blue">hired.</span></h1>
        <p class="hero-sub">Interactive courses, real projects, LinkedIn-style assessments, and an AI interviewer â€” all in one place. Learn by doing.</p>
        <div class="hero-actions">
          <button class="btn-primary" onclick="simulateLogin()">Start for free â†’</button>
          <button class="btn-ghost" onclick="scrollToSection('courses')">Browse courses</button>
        </div>
      </div>
      <div>
        <div class="code-window">
          <div class="window-bar">
            <div class="dot r"></div><div class="dot y"></div><div class="dot g"></div>
            <span class="window-title">lesson_01.py</span>
          </div>
          <div class="code-body">
<span class="cmt"># Your first Python function ğŸ</span><br><br>
<span class="kw">def</span> <span class="fn">greet</span>(<span class="vr">name</span>):<br>
&nbsp;&nbsp;<span class="kw">return</span> <span class="str">f"Hello, {<span class="vr">name</span>}! ğŸš€"</span><br><br>
<span class="vr">msg</span> = <span class="fn">greet</span>(<span class="str">"World"</span>)<br>
<span class="fn">print</span>(<span class="vr">msg</span>)<span class="cursor"></span>
<div class="output-line">â–¶ Hello, World! ğŸš€</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- LOGOS -->
  <div class="logos-bar">
    <div class="logos-inner">
      <p class="logos-label">Our learners work at</p>
      <div class="logos-row">
        <span class="logo-item">Google</span><span class="logo-item">Meta</span>
        <span class="logo-item">Microsoft</span><span class="logo-item">Apple</span>
        <span class="logo-item">Spotify</span><span class="logo-item">Amazon</span><span class="logo-item">IBM</span>
      </div>
    </div>
  </div>

  <!-- HOW IT WORKS -->
  <section style="background:#0d0d0d;border-top:1px solid var(--border)">
    <div class="section-inner">
      <div class="section-label">How it works</div>
      <h2>A smarter way<br>to learn.</h2>
      <p class="section-sub">No passive video watching. LearnCraft puts you in the driver's seat with an active, structured approach.</p>
      <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:1.2rem;margin-top:2.5rem">
        <div style="background:var(--card-bg);border:1px solid var(--border);border-radius:14px;padding:1.8rem;position:relative;overflow:hidden">
          <div style="font-size:2rem;margin-bottom:0.6rem">ğŸ—ºï¸</div>
          <div style="font-family:'Syne',sans-serif;font-size:4rem;font-weight:900;color:rgba(255,255,255,0.04);position:absolute;top:0.5rem;right:1rem;line-height:1;pointer-events:none;user-select:none">01</div>
          <h4 style="font-family:'Syne',sans-serif;font-weight:700;font-size:1.05rem;margin-bottom:0.6rem">Pick your path</h4>
          <p style="color:var(--muted);font-size:0.85rem;line-height:1.6">Take our quiz to find the right course, or browse by subject. We'll guide you from beginner to job-ready.</p>
        </div>
        <div style="background:var(--card-bg);border:1px solid var(--border);border-radius:14px;padding:1.8rem;position:relative;overflow:hidden">
          <div style="font-size:2rem;margin-bottom:0.6rem">ğŸ’»</div>
          <div style="font-family:'Syne',sans-serif;font-size:4rem;font-weight:900;color:rgba(255,255,255,0.04);position:absolute;top:0.5rem;right:1rem;line-height:1;pointer-events:none;user-select:none">02</div>
          <h4 style="font-family:'Syne',sans-serif;font-weight:700;font-size:1.05rem;margin-bottom:0.6rem">Learn by doing</h4>
          <p style="color:var(--muted);font-size:0.85rem;line-height:1.6">Every lesson has interactive exercises you complete right in the browser. No setup. Just code.</p>
        </div>
        <div style="background:var(--card-bg);border:1px solid var(--border);border-radius:14px;padding:1.8rem;position:relative;overflow:hidden">
          <div style="font-size:2rem;margin-bottom:0.6rem">ğŸ—ï¸</div>
          <div style="font-family:'Syne',sans-serif;font-size:4rem;font-weight:900;color:rgba(255,255,255,0.04);position:absolute;top:0.5rem;right:1rem;line-height:1;pointer-events:none;user-select:none">03</div>
          <h4 style="font-family:'Syne',sans-serif;font-weight:700;font-size:1.05rem;margin-bottom:0.6rem">Build real projects</h4>
          <p style="color:var(--muted);font-size:0.85rem;line-height:1.6">Capstone projects that go in your portfolio. Show employers real work, not just certificates.</p>
        </div>
      </div>
      <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:1.2rem;margin-top:1.2rem">
        <div style="background:var(--card-bg);border:1px solid var(--border);border-radius:14px;padding:1.8rem;position:relative;overflow:hidden;border-color:rgba(255,92,53,0.2)">
          <div style="font-size:2rem;margin-bottom:0.6rem">ğŸš€</div>
          <div style="font-family:'Syne',sans-serif;font-size:4rem;font-weight:900;color:rgba(255,255,255,0.04);position:absolute;top:0.5rem;right:1rem;line-height:1;pointer-events:none;user-select:none">04</div>
          <h4 style="font-family:'Syne',sans-serif;font-weight:700;font-size:1.05rem;margin-bottom:0.6rem">Land the job</h4>
          <p style="color:var(--muted);font-size:0.85rem;line-height:1.6">Career resources, interview prep, and a network of learners to help you cross the finish line.</p>
        </div>
        <div style="background:var(--card-bg);border:1px solid var(--border);border-radius:14px;padding:1.8rem;position:relative;overflow:hidden">
          <div style="font-size:2rem;margin-bottom:0.6rem">ğŸ™ï¸</div>
          <div style="font-family:'Syne',sans-serif;font-size:4rem;font-weight:900;color:rgba(255,255,255,0.04);position:absolute;top:0.5rem;right:1rem;line-height:1;pointer-events:none;user-select:none">05</div>
          <h4 style="font-family:'Syne',sans-serif;font-weight:700;font-size:1.05rem;margin-bottom:0.6rem">Practice interviews</h4>
          <p style="color:var(--muted);font-size:0.85rem;line-height:1.6">Our AI interviewer asks real questions and gives structured feedback â€” just like a real interview.</p>
        </div>
        <div style="background:var(--card-bg);border:1px solid var(--border);border-radius:14px;padding:1.8rem;position:relative;overflow:hidden">
          <div style="font-size:2rem;margin-bottom:0.6rem">ğŸ…</div>
          <div style="font-family:'Syne',sans-serif;font-size:4rem;font-weight:900;color:rgba(255,255,255,0.04);position:absolute;top:0.5rem;right:1rem;line-height:1;pointer-events:none;user-select:none">06</div>
          <h4 style="font-family:'Syne',sans-serif;font-weight:700;font-size:1.05rem;margin-bottom:0.6rem">Earn certificates</h4>
          <p style="color:var(--muted);font-size:0.85rem;line-height:1.6">Pass skill assessments to earn verified badges. Share them directly on LinkedIn to stand out.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- COURSES -->
  <section id="courses">
    <div class="section-inner">
      <div class="stats-bar fade-up">
        <div class="stat-item"><div class="stat-num" style="color:var(--accent)">50M+</div><div class="stat-label">Learners worldwide</div></div>
        <div class="stat-item"><div class="stat-num" style="color:var(--accent2)">600+</div><div class="stat-label">Courses & paths</div></div>
        <div class="stat-item"><div class="stat-num" style="color:var(--green)">95%</div><div class="stat-label">Satisfaction rate</div></div>
      </div>
      <div class="section-label">What you can learn</div>
      <h2>Every skill. One platform.</h2>
      <p class="section-sub">From your first line of code to landing your dream job â€” we've got the full path.</p>
      <div class="catalog-filters">
        <button class="filter-chip active" onclick="filterCatalog(this,'all')">All</button>
        <button class="filter-chip" onclick="filterCatalog(this,'beginner')">Beginner</button>
        <button class="filter-chip" onclick="filterCatalog(this,'intermediate')">Intermediate</button>
        <button class="filter-chip" onclick="filterCatalog(this,'advanced')">Advanced</button>
        <button class="filter-chip" onclick="filterCatalog(this,'python')">Python</button>
        <button class="filter-chip" onclick="filterCatalog(this,'web')">Web Dev</button>
        <button class="filter-chip" onclick="filterCatalog(this,'data')">Data & AI</button>
        <button class="filter-chip" onclick="filterCatalog(this,'security')">Cybersecurity</button>
      </div>
      <div class="paths-grid" id="catalogGrid"></div>
    </div>
  </section>

  <!-- PLATFORM SECTION -->
  <section id="platform" style="background:#0d0d0d">
    <div class="section-inner">
      <div class="section-label">The platform</div>
      <h2>Learn by doing â€” right in the browser.</h2>
      <p class="section-sub">Instructions, live code editor, output panel, and AI help â€” all side by side. No setup ever.</p>
      <div style="display:grid;grid-template-columns:1fr 1.6fr;gap:3rem;align-items:center">
        <div style="display:flex;flex-direction:column;gap:0.5rem">
          <div class="setup-card" style="border-color:rgba(255,92,53,0.3)"><h4 style="color:var(--accent)">ğŸ“– Step-by-step lessons</h4><p style="font-size:0.85rem;color:var(--muted);margin-top:0.3rem">Clear instructions, hints, and concept explanations at every step.</p></div>
          <div class="setup-card"><h4>âœï¸ In-browser code editor</h4><p style="font-size:0.85rem;color:var(--muted);margin-top:0.3rem">Write and run code instantly â€” no downloads, zero friction.</p></div>
          <div class="setup-card"><h4>â–¶ Live output &amp; tests</h4><p style="font-size:0.85rem;color:var(--muted);margin-top:0.3rem">See results and test cases pass in real time as you code.</p></div>
          <div class="setup-card"><h4>ğŸ¤– AI Learning Assistant</h4><p style="font-size:0.85rem;color:var(--muted);margin-top:0.3rem">Get unstuck, understand errors, and check your solutions.</p></div>
        </div>
        <div style="background:var(--card-bg);border:1px solid var(--border);border-radius:16px;overflow:hidden;box-shadow:0 30px 60px rgba(0,0,0,0.4)">
          <div class="window-bar"><div class="dot r"></div><div class="dot y"></div><div class="dot g"></div><span class="window-title" style="margin-left:0.5rem">Python Â· Lesson 3 / 12</span></div>
          <div style="display:grid;grid-template-columns:1fr 1fr;height:280px">
            <div style="border-right:1px solid var(--border);padding:1.2rem;overflow:auto">
              <div style="font-family:'DM Mono',monospace;font-size:0.68rem;color:var(--muted);text-transform:uppercase;letter-spacing:0.1em;margin-bottom:0.8rem;border-bottom:1px solid var(--border);padding-bottom:0.5rem">Instructions</div>
              <div style="font-size:0.84rem;color:rgba(255,255,255,0.75);line-height:1.7">Create a function <code style="background:rgba(255,255,255,0.08);padding:0.1em 0.4em;border-radius:4px;font-family:'DM Mono',monospace;font-size:0.82em;color:#c3e88d">calculate_area</code> that returns the area of a circle given its radius.</div>
              <div style="margin-top:1rem;display:flex;align-items:center;gap:0.5rem;font-size:0.82rem;color:var(--green)">âœ… Define function</div>
              <div style="display:flex;align-items:center;gap:0.5rem;font-size:0.82rem;color:var(--green)">âœ… Accept radius param</div>
              <div style="display:flex;align-items:center;gap:0.5rem;font-size:0.82rem;color:var(--muted)">â¬œ Return correct value</div>
            </div>
            <div style="padding:1.2rem">
              <div style="font-family:'DM Mono',monospace;font-size:0.68rem;color:var(--muted);text-transform:uppercase;letter-spacing:0.1em;margin-bottom:0.8rem;border-bottom:1px solid var(--border);padding-bottom:0.5rem">Editor</div>
              <div style="font-family:'DM Mono',monospace;font-size:0.8rem;line-height:1.9;color:#eeffff">
                <span style="color:#546e7a"># Write your function below</span><br>
                <span style="color:#c792ea">def</span> <span style="color:#82aaff">calculate_area</span>(<span style="color:#eeffff">r</span>):<br>
                &nbsp;&nbsp;<span style="color:#c792ea">return</span> <span style="color:#f78c6c">3.14159</span> * r ** <span style="color:#f78c6c">2</span><span class="cursor"></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ASSESSMENTS PROMO -->
  <section id="assessments-promo">
    <div class="section-inner">
      <div class="section-label" style="color:var(--accent2)">LinkedIn-style</div>
      <h2>Prove your skills.<br><span style="color:var(--accent2)">Earn certificates.</span></h2>
      <p class="section-sub">Take timed assessments modelled after LinkedIn's skill tests. Pass and earn a verified badge to share on your profile.</p>
      <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:1rem;margin-bottom:2rem" id="assessmentPromoGrid"></div>
      <button class="btn-primary" onclick="showView('assessment-select')">View all assessments â†’</button>
    </div>
  </section>

  <!-- INTERVIEW QUESTIONS PROMO -->
  <section style="background:#0a0a0a;border-top:1px solid var(--border)">
    <div class="section-inner">
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:4rem;align-items:start">
        <div>
          <div class="section-label" style="color:var(--yellow)">Interview Prep Hub</div>
          <h2>140+ questions.<br><span style="color:var(--yellow)">Zero fluff.</span></h2>
          <p class="section-sub" style="margin-bottom:1.5rem">Real interview questions from Google, Meta, Amazon & Microsoft â€” curated from thousands of interview reports. Theoretical, technical, behavioral, system design, DSA, SQL, and React â€” all in one place.</p>
          <div style="display:flex;flex-direction:column;gap:0.6rem;margin-bottom:1.5rem">
            <div style="display:flex;align-items:center;gap:0.8rem;font-size:0.9rem"><span style="color:var(--accent);font-size:1.1rem">ğŸ”¥</span><span>Top 30 <strong>must-prepare</strong> questions curated by FAANG frequency</span></div>
            <div style="display:flex;align-items:center;gap:0.8rem;font-size:0.9rem"><span style="color:var(--accent2);font-size:1.1rem">ğŸ“–</span><span><strong>Theoretical</strong> â€” concepts, internals, "how does X work"</span></div>
            <div style="display:flex;align-items:center;gap:0.8rem;font-size:0.9rem"><span style="color:var(--green);font-size:1.1rem">ğŸ’»</span><span><strong>Technical / Coding</strong> â€” working solutions with Big O analysis</span></div>
            <div style="display:flex;align-items:center;gap:0.8rem;font-size:0.9rem"><span style="color:var(--yellow);font-size:1.1rem">â­</span><span><strong>STAR Behavioral</strong> â€” structured answer frameworks with real stories</span></div>
            <div style="display:flex;align-items:center;gap:0.8rem;font-size:0.9rem"><span style="color:#1d9bf0;font-size:1.1rem">ğ•</span><span><strong>Tweet any question</strong> â€” challenge your network with 1-click sharing</span></div>
          </div>
          <div style="display:flex;gap:0.7rem;flex-wrap:wrap">
            <button class="btn-primary" onclick="showView('interview-questions')">Browse All Questions â†’</button>
            <button class="btn-secondary" onclick="iqShowCategory('mustprepare',null);showView('interview-questions')">ğŸ”¥ Top 30 Must-Prepare</button>
          </div>
        </div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:0.7rem">
          <div onclick="iqShowCategory('python',null);showView('interview-questions')" class="iq-promo-card" style="background:var(--card-bg);border:1px solid var(--border);border-radius:12px;padding:1.1rem;cursor:pointer;transition:transform 0.2s,border-color 0.2s" onmouseover="this.style.transform='translateY(-3px)';this.style.borderColor='rgba(255,255,255,0.18)'" onmouseout="this.style.transform='';this.style.borderColor=''">
            <div style="width:38px;height:38px;border-radius:9px;background:rgba(255,92,53,0.12);display:flex;align-items:center;justify-content:center;font-size:1.2rem;margin-bottom:0.7rem">ğŸ</div>
            <div style="font-family:'Syne',sans-serif;font-weight:700;font-size:0.88rem;margin-bottom:0.2rem">Python</div>
            <div style="font-family:'DM Mono',monospace;font-size:0.68rem;color:var(--muted)">28 Qs</div>
          </div>
          <div onclick="iqShowCategory('javascript',null);showView('interview-questions')" class="iq-promo-card" style="background:var(--card-bg);border:1px solid var(--border);border-radius:12px;padding:1.1rem;cursor:pointer;transition:transform 0.2s,border-color 0.2s" onmouseover="this.style.transform='translateY(-3px)';this.style.borderColor='rgba(255,255,255,0.18)'" onmouseout="this.style.transform='';this.style.borderColor=''">
            <div style="width:38px;height:38px;border-radius:9px;background:rgba(247,224,75,0.1);display:flex;align-items:center;justify-content:center;font-size:1.2rem;margin-bottom:0.7rem">âš¡</div>
            <div style="font-family:'Syne',sans-serif;font-weight:700;font-size:0.88rem;margin-bottom:0.2rem">JavaScript</div>
            <div style="font-family:'DM Mono',monospace;font-size:0.68rem;color:var(--muted)">20 Qs</div>
          </div>
          <div onclick="iqShowCategory('react',null);showView('interview-questions')" class="iq-promo-card" style="background:var(--card-bg);border:1px solid var(--border);border-radius:12px;padding:1.1rem;cursor:pointer;transition:transform 0.2s,border-color 0.2s" onmouseover="this.style.transform='translateY(-3px)';this.style.borderColor='rgba(255,255,255,0.18)'" onmouseout="this.style.transform='';this.style.borderColor=''">
            <div style="width:38px;height:38px;border-radius:9px;background:rgba(97,218,251,0.1);display:flex;align-items:center;justify-content:center;font-size:1.2rem;margin-bottom:0.7rem">âš›ï¸</div>
            <div style="font-family:'Syne',sans-serif;font-weight:700;font-size:0.88rem;margin-bottom:0.2rem">React.js</div>
            <div style="font-family:'DM Mono',monospace;font-size:0.68rem;color:var(--muted)">19 Qs</div>
          </div>
          <div onclick="iqShowCategory('dsa',null);showView('interview-questions')" class="iq-promo-card" style="background:var(--card-bg);border:1px solid var(--border);border-radius:12px;padding:1.1rem;cursor:pointer;transition:transform 0.2s,border-color 0.2s" onmouseover="this.style.transform='translateY(-3px)';this.style.borderColor='rgba(255,255,255,0.18)'" onmouseout="this.style.transform='';this.style.borderColor=''">
            <div style="width:38px;height:38px;border-radius:9px;background:rgba(168,85,247,0.12);display:flex;align-items:center;justify-content:center;font-size:1.2rem;margin-bottom:0.7rem">ğŸ§ </div>
            <div style="font-family:'Syne',sans-serif;font-weight:700;font-size:0.88rem;margin-bottom:0.2rem">DSA / LeetCode</div>
            <div style="font-family:'DM Mono',monospace;font-size:0.68rem;color:var(--muted)">22 Qs</div>
          </div>
          <div onclick="iqShowCategory('system',null);showView('interview-questions')" class="iq-promo-card" style="background:var(--card-bg);border:1px solid var(--border);border-radius:12px;padding:1.1rem;cursor:pointer;transition:transform 0.2s,border-color 0.2s" onmouseover="this.style.transform='translateY(-3px)';this.style.borderColor='rgba(255,255,255,0.18)'" onmouseout="this.style.transform='';this.style.borderColor=''">
            <div style="width:38px;height:38px;border-radius:9px;background:rgba(45,204,135,0.1);display:flex;align-items:center;justify-content:center;font-size:1.2rem;margin-bottom:0.7rem">ğŸ—ï¸</div>
            <div style="font-family:'Syne',sans-serif;font-weight:700;font-size:0.88rem;margin-bottom:0.2rem">System Design</div>
            <div style="font-family:'DM Mono',monospace;font-size:0.68rem;color:var(--muted)">20 Qs</div>
          </div>
          <div onclick="iqShowCategory('sql',null);showView('interview-questions')" class="iq-promo-card" style="background:var(--card-bg);border:1px solid var(--border);border-radius:12px;padding:1.1rem;cursor:pointer;transition:transform 0.2s,border-color 0.2s" onmouseover="this.style.transform='translateY(-3px)';this.style.borderColor='rgba(255,255,255,0.18)'" onmouseout="this.style.transform='';this.style.borderColor=''">
            <div style="width:38px;height:38px;border-radius:9px;background:rgba(59,91,255,0.12);display:flex;align-items:center;justify-content:center;font-size:1.2rem;margin-bottom:0.7rem">ğŸ—„ï¸</div>
            <div style="font-family:'Syne',sans-serif;font-weight:700;font-size:0.88rem;margin-bottom:0.2rem">SQL & Databases</div>
            <div style="font-family:'DM Mono',monospace;font-size:0.68rem;color:var(--muted)">14 Qs</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- AI INTERVIEW SECTION -->
  <div id="interview" class="interview-section">
    <div class="section-inner" style="position:relative;z-index:1">
      <div class="section-label" style="color:var(--yellow)">AI-powered</div>
      <h2>Practice interviews.<br><span style="color:var(--yellow)">Get hired faster.</span></h2>
      <p class="section-sub">Our AI interviewer asks real questions and gives structured feedback â€” just like a real interview, without the pressure.</p>
      <div class="interview-grid">
        <div class="interview-setup">
          <div class="setup-card">
            <h4>ğŸ¯ Role</h4>
            <div class="role-chips">
              <button class="role-chip active" onclick="selectRole(this,'Frontend Dev')">Frontend Dev</button>
              <button class="role-chip" onclick="selectRole(this,'Backend Dev')">Backend Dev</button>
              <button class="role-chip" onclick="selectRole(this,'Data Scientist')">Data Scientist</button>
              <button class="role-chip" onclick="selectRole(this,'DevOps')">DevOps</button>
              <button class="role-chip" onclick="selectRole(this,'Cybersecurity')">Cybersecurity</button>
              <button class="role-chip" onclick="selectRole(this,'ML Engineer')">ML Engineer</button>
            </div>
          </div>
          <div class="setup-card">
            <h4>âš¡ Difficulty</h4>
            <div class="difficulty-row">
              <button class="diff-btn active easy" onclick="selectDiff(this,'Easy','easy')">Easy</button>
              <button class="diff-btn" onclick="selectDiff(this,'Medium','medium')">Medium</button>
              <button class="diff-btn" onclick="selectDiff(this,'Hard','hard')">Hard</button>
            </div>
          </div>
          <div class="setup-card">
            <h4>ğŸ“‹ Type</h4>
            <div class="type-select">
              <button class="type-opt active" onclick="selectType(this,'technical')"><span>ğŸ’»</span> Technical / Coding</button>
              <button class="type-opt" onclick="selectType(this,'behavioral')"><span>ğŸ¤</span> Behavioral (STAR)</button>
              <button class="type-opt" onclick="selectType(this,'system_design')"><span>ğŸ—ï¸</span> System Design</button>
            </div>
          </div>
          <button class="start-btn" id="startBtn" onclick="startInterview()">Start Interview â†’</button>
          <div style="text-align:center;font-size:0.76rem;color:var(--muted)">Powered by Claude AI</div>
        </div>
        <div class="interview-window">
          <div class="progress-bar-wrap"><div class="progress-bar-fill" id="progressFill"></div></div>
          <div class="interview-topbar">
            <div class="interviewer-info">
              <div class="ai-avatar">ğŸ¤–</div>
              <div><div class="ai-name">Alex â€” AI Interviewer</div><div class="ai-status" id="aiStatus">Ready to start</div></div>
            </div>
            <div class="session-info">
              <div class="session-badge" id="sessionBadge">Q 1 / 5</div>
              <button onclick="resetInterview()" id="resetBtn" style="display:none;background:rgba(255,92,53,0.1);border:1px solid rgba(255,92,53,0.2);color:var(--accent);padding:0.25rem 0.7rem;border-radius:6px;font-size:0.73rem;cursor:pointer;font-family:'DM Sans',sans-serif">End</button>
            </div>
          </div>
          <div class="messages-area" id="messagesArea">
            <div class="welcome-state" id="welcomeState">
              <div class="big-icon">ğŸ™ï¸</div>
              <h3>Your AI interviewer is ready</h3>
              <p>Configure your session, then hit <strong>Start Interview</strong> to begin with live AI feedback.</p>
              <div style="display:flex;gap:0.4rem;flex-wrap:wrap;justify-content:center;margin-top:0.4rem">
                <span class="badge beginner">Live AI feedback</span>
                <span class="badge intermediate">5 questions</span>
                <span class="badge beginner">Scores &amp; tips</span>
              </div>
            </div>
          </div>
          <div class="interview-input-area">
            <div class="input-row">
              <textarea class="answer-input" id="answerInput" placeholder="Start the interview to begin answeringâ€¦" disabled rows="2" onkeydown="handleKey(event)" oninput="autoResize(this)"></textarea>
              <button class="send-btn" id="sendBtn" onclick="sendAnswer()" disabled>â¤</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- TESTIMONIALS -->
  <section>
    <div class="section-inner">
      <div class="section-label">Real learners</div>
      <h2>Success stories.</h2>
      <p class="section-sub">Millions of learners, real career changes.</p>
      <div class="testimonials-grid">
        <div class="testimonial-card fade-up"><div class="testimonial-text">I went from zero coding knowledge to a junior dev role in under a year. The hands-on approach made concepts actually stick.</div><div class="testimonial-author"><div class="avatar" style="background:rgba(255,92,53,0.2);color:var(--accent)">AK</div><div><div class="author-name">Anjali Kumar</div><div class="author-role">Junior Dev Â· Bangalore, India</div></div></div></div>
        <div class="testimonial-card fade-up"><div class="testimonial-text">The cybersecurity path was incredible for my Security+ cert. Projects felt like the real thing, not toy exercises.</div><div class="testimonial-author"><div class="avatar" style="background:rgba(59,91,255,0.2);color:var(--accent2)">MR</div><div><div class="author-name">Marcus Reid</div><div class="author-role">SOC Analyst Â· London, UK</div></div></div></div>
        <div class="testimonial-card fade-up"><div class="testimonial-text">As a researcher, I went from zero to writing useful data scripts in 6 weeks. The structured path made all the difference.</div><div class="testimonial-author"><div class="avatar" style="background:rgba(45,204,135,0.2);color:var(--green)">SL</div><div><div class="author-name">Sofia Lund</div><div class="author-role">Research Scientist Â· Stockholm</div></div></div></div>
      </div>
    </div>
  </section>

  <!-- PRICING -->
  <section id="pricing" style="background:#0d0d0d">
    <div class="section-inner">
      <div class="section-label">Pricing</div>
      <h2>Start free. Grow on your terms.</h2>
      <p class="section-sub">No hidden fees. Cancel anytime.</p>
      <div class="pricing-grid">
        <div class="pricing-card fade-up">
          <div class="plan-name">Free</div>
          <div class="plan-price">$0</div>
          <div class="plan-period">forever</div>
          <ul class="plan-features">
            <li><span class="feat-icon">âœ“</span>50+ free courses</li>
            <li><span class="feat-icon">âœ“</span>In-browser code editor</li>
            <li><span class="feat-icon">âœ“</span>3 skill assessments/month</li>
            <li style="opacity:0.4"><span>âœ—</span>Full career paths</li>
            <li style="opacity:0.4"><span>âœ—</span>AI Interview Practice</li>
          </ul>
          <button class="plan-btn outline" onclick="simulateLogin()">Get started</button>
        </div>
        <div class="pricing-card featured fade-up">
          <div class="featured-badge">Most Popular</div>
          <div class="plan-name">Pro</div>
          <div class="plan-price" style="color:var(--accent)">$17</div>
          <div class="plan-period">per month, billed annually</div>
          <ul class="plan-features">
            <li><span class="feat-icon">âœ“</span>Everything in Free</li>
            <li><span class="feat-icon">âœ“</span>600+ courses &amp; paths</li>
            <li><span class="feat-icon">âœ“</span>Unlimited assessments</li>
            <li><span class="feat-icon">âœ“</span>AI Interview Practice</li>
            <li><span class="feat-icon">âœ“</span>Verified certificates</li>
          </ul>
          <button class="plan-btn accent" onclick="simulateLogin()">Start Pro free â†’</button>
        </div>
        <div class="pricing-card fade-up">
          <div class="plan-name">Teams</div>
          <div class="plan-price">$25</div>
          <div class="plan-period">per seat/month</div>
          <ul class="plan-features">
            <li><span class="feat-icon">âœ“</span>Everything in Pro</li>
            <li><span class="feat-icon">âœ“</span>Admin dashboard</li>
            <li><span class="feat-icon">âœ“</span>Content assignment</li>
            <li><span class="feat-icon">âœ“</span>Progress tracking</li>
            <li><span class="feat-icon">âœ“</span>Priority support</li>
          </ul>
          <button class="plan-btn outline">Contact sales</button>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA -->
  <div class="cta-banner">
    <div class="section-inner" style="position:relative;z-index:1">
      <h2>Your future self starts coding today.</h2>
      <p>Join millions of learners building in-demand skills. Free to start.</p>
      <button class="btn-primary" onclick="simulateLogin()">Create your free account â†’</button>
    </div>
  </div>

  <!-- FOOTER -->
  <footer>
    <div class="footer-grid">
      <div class="footer-brand">
        <div class="logo" style="cursor:default">Learn<span style="color:var(--accent)">Craft</span></div>
        <p>Building in-demand tech skills for everyone. From first line of code to career-changing opportunities.</p>
      </div>
      <div class="footer-col"><h4>Learn</h4><ul><li><a>Catalog</a></li><li><a>Career Paths</a></li><li><a>Assessments</a></li><li><a>Certifications</a></li></ul></div>
      <div class="footer-col"><h4>Resources</h4><ul><li><a>Blog</a></li><li><a>Cheatsheets</a></li><li><a>Docs</a></li><li><a>Projects</a></li></ul></div>
      <div class="footer-col"><h4>Company</h4><ul><li><a>About</a></li><li><a>Careers</a></li><li><a>Affiliates</a></li><li><a>Press</a></li></ul></div>
      <div class="footer-col"><h4>Support</h4><ul><li><a>Help Center</a></li><li><a>Community</a></li><li><a>Privacy</a></li><li><a>Terms</a></li></ul></div>
    </div>
    <div class="footer-bottom"><p>Â© 2026 LearnCraft, Inc. Made with â¤ï¸</p><div class="footer-links"><a>Privacy</a><a>Terms</a><a>Cookies</a></div></div>
  </footer>
</div><!-- end landing -->

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!--  VIEW: DASHBOARD                        -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="view" id="view-dashboard">
  <div class="dashboard-layout">
    <div class="sidebar">
      <div class="sidebar-section-label">Main</div>
      <div class="sidebar-item active" onclick="showDashTab('home',this)"><span class="si-icon">ğŸ </span> Dashboard</div>
      <div class="sidebar-item" onclick="showDashTab('my-courses',this)"><span class="si-icon">ğŸ“š</span> My Courses<span class="si-badge" id="sb-courses">3</span></div>
      <div class="sidebar-item" onclick="showDashTab('all-courses',this)"><span class="si-icon">ğŸ—ºï¸</span> All Courses</div>
      <div class="sidebar-section-label">Practice</div>
      <div class="sidebar-item" onclick="showView('assessment-select')"><span class="si-icon">ğŸ“</span> Assessments</div>
      <div class="sidebar-item" onclick="showView('interview-questions')"><span class="si-icon">ğŸ”¥</span> Interview Questions</div>
      <div class="sidebar-item" onclick="showView('landing');setTimeout(()=>scrollToSection('interview'),100)"><span class="si-icon">ğŸ™ï¸</span> AI Interview</div>
      <div class="sidebar-section-label">Progress</div>
      <div class="sidebar-item" onclick="showDashTab('certificates',this)"><span class="si-icon">ğŸ†</span> Certificates</div>
      <div class="sidebar-item" onclick="showDashTab('streak',this)"><span class="si-icon">ğŸ”¥</span> Streak</div>
    </div>
    <div class="dash-content" id="dashContent"><!-- filled by JS --></div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!--  VIEW: COURSE LESSON                    -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="view" id="view-course">
  <div class="lesson-layout" id="lessonLayout"><!-- filled by JS --></div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!--  VIEW: ASSESSMENT SELECT                -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="view" id="view-assessment-select">
  <div class="assessment-layout">
    <div style="margin-bottom:1.5rem">
      <button onclick="showView('dashboard')" style="background:none;border:none;color:var(--muted);cursor:pointer;font-size:0.85rem;font-family:'DM Sans',sans-serif;display:flex;align-items:center;gap:0.4rem;margin-bottom:1rem">â† Back to Dashboard</button>
      <div class="section-label" style="color:var(--accent2)">LinkedIn-style Skill Assessments</div>
      <h2 style="font-family:'Syne',sans-serif;font-weight:800;letter-spacing:-0.03em;font-size:2rem">Prove your skills.</h2>
      <p style="color:var(--muted);margin-top:0.3rem;font-size:0.9rem">Timed multiple-choice assessments. Score in the top 30% to earn a verified skill badge.</p>
    </div>
    <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:1rem" id="assessmentSelectGrid"></div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!--  VIEW: ASSESSMENT QUIZ                  -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="view" id="view-assessment-quiz">
  <div class="assessment-layout" id="quizContainer"><!-- filled by JS --></div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!--  VIEW: ASSESSMENT RESULTS               -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="view" id="view-assessment-results">
  <div class="assessment-layout" id="resultsContainer"><!-- filled by JS --></div>
</div>


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!--  VIEW: INTERVIEW QUESTIONS HUB          -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="view" id="view-interview-questions">
  <div class="iq-layout">

    <!-- Sidebar -->
    <div class="iq-sidebar">
      <div class="iq-sidebar-section">â­ Featured</div>
      <div class="iq-sidebar-item active" onclick="iqShowCategory('mustprepare',this)"><span class="iq-icon">ğŸ”¥</span>Top 30 Must-Prepare<span class="iq-count">30</span></div>
      <div class="iq-sidebar-item" onclick="iqShowCategory('mostasked',this)"><span class="iq-icon">ğŸ“ˆ</span>Most Asked 2025<span class="iq-count">40</span></div>

      <div class="iq-sidebar-divider"></div>
      <div class="iq-sidebar-section">By Language / Topic</div>
      <div class="iq-sidebar-item" onclick="iqShowCategory('python',this)"><span class="iq-icon">ğŸ</span>Python<span class="iq-count">30</span></div>
      <div class="iq-sidebar-item" onclick="iqShowCategory('javascript',this)"><span class="iq-icon">âš¡</span>JavaScript<span class="iq-count">30</span></div>
      <div class="iq-sidebar-item" onclick="iqShowCategory('react',this)"><span class="iq-icon">âš›ï¸</span>React.js<span class="iq-count">25</span></div>
      <div class="iq-sidebar-item" onclick="iqShowCategory('dsa',this)"><span class="iq-icon">ğŸ§ </span>DSA / LeetCode<span class="iq-count">25</span></div>
      <div class="iq-sidebar-item" onclick="iqShowCategory('system',this)"><span class="iq-icon">ğŸ—ï¸</span>System Design<span class="iq-count">20</span></div>
      <div class="iq-sidebar-item" onclick="iqShowCategory('sql',this)"><span class="iq-icon">ğŸ—„ï¸</span>SQL & Databases<span class="iq-count">15</span></div>

      <div class="iq-sidebar-divider"></div>
      <div class="iq-sidebar-section">By Interview Type</div>
      <div class="iq-sidebar-item" onclick="iqShowCategory('theoretical',this)"><span class="iq-icon">ğŸ“–</span>Theoretical</div>
      <div class="iq-sidebar-item" onclick="iqShowCategory('technical',this)"><span class="iq-icon">ğŸ’»</span>Technical / Coding</div>
      <div class="iq-sidebar-item" onclick="iqShowCategory('behavioral',this)"><span class="iq-icon">ğŸ¤</span>Behavioral / STAR<span class="iq-count">20</span></div>

      <div class="iq-sidebar-divider"></div>
      <div class="iq-sidebar-section">Practice</div>
      <div class="iq-sidebar-item" onclick="showView('assessment-select')"><span class="iq-icon">ğŸ“</span>Take a Timed Quiz</div>
      <div class="iq-sidebar-item" onclick="showView('landing');setTimeout(()=>scrollToSection('interview'),100)"><span class="iq-icon">ğŸ™ï¸</span>AI Mock Interview</div>
      <div class="iq-sidebar-item" onclick="showView('dashboard')"><span class="iq-icon">â†</span>Back to Dashboard</div>
    </div>

    <!-- Main Content: search bar + content area -->
    <div class="iq-content">
      <div class="iq-search-bar">
        <div class="iq-search-inner">
          <div class="iq-search-wrap">
            <input class="iq-search-input" id="iqSearchInput" type="text" placeholder="Search any question, e.g. 'closure', 'binary search', 'deadlock'â€¦" oninput="iqSearch(this.value)">
          </div>
          <span class="iq-search-count" id="iqSearchCount"></span>
        </div>
      </div>
      <div class="iq-main" id="iqContent"><!-- Filled by JS --></div>
    </div>
  </div>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const COURSES = [
  {
    id:'python', icon:'ğŸ', title:'Python Fundamentals',
    desc:'Learn Python 3 from scratch â€” variables, loops, functions, OOP, and real projects.',
    level:'beginner', tags:['python','beginner'], hours:24, lessons:48,
    color:'rgba(255,92,53,0.15)', progress:35,
    modules:[
      { title:'Getting Started', lessons:[
        {id:'py-1-1', title:'Welcome to Python', done:true},
        {id:'py-1-2', title:'Your First Program', done:true},
        {id:'py-1-3', title:'Variables & Data Types', done:true},
        {id:'py-1-4', title:'User Input & Output', done:false},
      ]},
      { title:'Control Flow', lessons:[
        {id:'py-2-1', title:'if / elif / else', done:false},
        {id:'py-2-2', title:'for Loops', done:false},
        {id:'py-2-3', title:'while Loops', done:false},
        {id:'py-2-4', title:'break & continue', done:false},
      ]},
      { title:'Functions', lessons:[
        {id:'py-3-1', title:'Defining Functions', done:false},
        {id:'py-3-2', title:'Parameters & Arguments', done:false},
        {id:'py-3-3', title:'Return Values', done:false},
        {id:'py-3-4', title:'Lambda Functions', done:false},
      ]},
      { title:'Data Structures', lessons:[
        {id:'py-4-1', title:'Lists', done:false},
        {id:'py-4-2', title:'Dictionaries', done:false},
        {id:'py-4-3', title:'Tuples & Sets', done:false},
        {id:'py-4-4', title:'List Comprehensions', done:false},
      ]},
      { title:'OOP', lessons:[
        {id:'py-5-1', title:'Classes & Objects', done:false},
        {id:'py-5-2', title:'Inheritance', done:false},
        {id:'py-5-3', title:'Encapsulation', done:false},
        {id:'py-5-4', title:'Capstone Project', done:false},
      ]},
    ]
  },
  {
    id:'js', icon:'âš¡', title:'JavaScript & the Web',
    desc:'Master JS from basics to async/await, DOM manipulation, and modern ES6+ features.',
    level:'beginner', tags:['web','beginner'], hours:35, lessons:56,
    color:'rgba(247,224,75,0.15)', progress:0,
    modules:[ { title:'Basics', lessons:[ {id:'js-1-1',title:'Variables & Types',done:false},{id:'js-1-2',title:'Functions',done:false},{id:'js-1-3',title:'Arrays & Objects',done:false},{id:'js-1-4',title:'DOM Manipulation',done:false} ] } ]
  },
  {
    id:'ml', icon:'ğŸ¤–', title:'Machine Learning & AI',
    desc:'Algorithms, neural networks, scikit-learn, and building real ML models.',
    level:'intermediate', tags:['data','intermediate'], hours:60, lessons:72,
    color:'rgba(59,91,255,0.15)', progress:0,
    modules:[ { title:'Foundations', lessons:[ {id:'ml-1-1',title:'What is ML?',done:false},{id:'ml-1-2',title:'Linear Regression',done:false},{id:'ml-1-3',title:'Classification',done:false},{id:'ml-1-4',title:'Model Evaluation',done:false} ] } ]
  },
  {
    id:'cyber', icon:'ğŸ”', title:'Cybersecurity',
    desc:'Threats, encryption, pentesting, and Security+ certification prep.',
    level:'intermediate', tags:['security','intermediate'], hours:45, lessons:60,
    color:'rgba(45,204,135,0.15)', progress:0,
    modules:[ { title:'Foundations', lessons:[ {id:'cy-1-1',title:'CIA Triad',done:false},{id:'cy-1-2',title:'Network Security',done:false},{id:'cy-1-3',title:'Cryptography Basics',done:false},{id:'cy-1-4',title:'Ethical Hacking Intro',done:false} ] } ]
  },
  {
    id:'ds', icon:'ğŸ“Š', title:'Data Science',
    desc:'Python, pandas, NumPy, matplotlib â€” work with real data from day one.',
    level:'intermediate', tags:['data','intermediate'], hours:55, lessons:64,
    color:'rgba(255,92,53,0.15)', progress:0,
    modules:[ { title:'Foundations', lessons:[ {id:'ds-1-1',title:'NumPy Basics',done:false},{id:'ds-1-2',title:'Pandas DataFrames',done:false},{id:'ds-1-3',title:'Data Cleaning',done:false},{id:'ds-1-4',title:'Visualization',done:false} ] } ]
  },
  {
    id:'cloud', icon:'â˜ï¸', title:'Cloud Computing (AWS)',
    desc:'Core AWS services, architecture patterns, and AWS Solutions Architect prep.',
    level:'advanced', tags:['advanced'], hours:40, lessons:48,
    color:'rgba(247,224,75,0.15)', progress:0,
    modules:[ { title:'AWS Foundations', lessons:[ {id:'cl-1-1',title:'EC2 & S3',done:false},{id:'cl-1-2',title:'IAM & Security',done:false},{id:'cl-1-3',title:'VPC Networking',done:false},{id:'cl-1-4',title:'RDS & DynamoDB',done:false} ] } ]
  },
];

// â”€â”€ Lesson Content (Python Fundamentals, detailed) â”€â”€
const LESSON_CONTENT = {
  'py-1-1': {
    title:'Welcome to Python',
    body:`<p>Python is one of the world's most popular programming languages, known for its clean syntax and extraordinary versatility. It powers everything from web apps to AI models to scientific research.</p>
<h4>Why Python?</h4>
<ul><li>Readable, English-like syntax that's easy to learn</li><li>Massive ecosystem of libraries (NumPy, Django, TensorFlowâ€¦)</li><li>Used by Google, Instagram, NASA, and Netflix</li><li>Perfect first language AND a top professional choice</li></ul>
<h4>How Python Runs</h4>
<p>Python is an <strong>interpreted</strong> language â€” your code is read and executed line by line by the Python interpreter. You don't need to compile it first.</p>
<pre><span class="cmt"># This is your first Python program</span>
<span class="fn">print</span>(<span class="str">"Hello, World!"</span>)</pre>
<p>The <code>print()</code> function outputs text to the screen. The text inside quotes is called a <strong>string</strong>.</p>`,
    tasks:['Run the starter code in the editor','Change the message to your own text','Add a second print() statement'],
    starterCode:`# Welcome to Python!
# Run this code with the Run button below

print("Hello, World!")
print("I'm learning Python with LearnCraft!")`,
  },
  'py-1-2': {
    title:'Your First Program',
    body:`<p>Every line of Python code does something. Let's break down the anatomy of a real Python program.</p>
<h4>Comments</h4>
<p>Lines starting with <code>#</code> are <strong>comments</strong> â€” Python ignores them. Use them to explain your code.</p>
<pre><span class="cmt"># This is a comment â€” Python won't run this</span>
<span class="fn">print</span>(<span class="str">"This line WILL run"</span>)  <span class="cmt"># inline comment</span></pre>
<h4>The print() Function</h4>
<p><code>print()</code> is a built-in function that displays output. You can print strings, numbers, or any value.</p>
<pre><span class="fn">print</span>(<span class="str">"Hello!"</span>)
<span class="fn">print</span>(<span class="num">42</span>)
<span class="fn">print</span>(<span class="num">3.14</span>)
<span class="fn">print</span>(<span class="str">"I am"</span>, <span class="num">25</span>, <span class="str">"years old"</span>)</pre>`,
    tasks:['Print your name','Print your age as a number','Print a sentence combining two words'],
    starterCode:`# Your First Python Program
# Complete the tasks in the task list

print("My name is: ")   # Add your name inside the quotes
print()                  # Print your age
print("I am", , "years old")  # Fill in your age`,
  },
  'py-1-3': {
    title:'Variables & Data Types',
    body:`<p><strong>Variables</strong> store data so you can use it later. Think of them as labelled boxes.</p>
<h4>Creating Variables</h4>
<pre><span class="vr">name</span> = <span class="str">"Alex"</span>        <span class="cmt"># string</span>
<span class="vr">age</span> = <span class="num">25</span>            <span class="cmt"># integer</span>
<span class="vr">height</span> = <span class="num">5.9</span>        <span class="cmt"># float</span>
<span class="vr">is_student</span> = <span class="kw">True</span>   <span class="cmt"># boolean</span>
<span class="fn">print</span>(<span class="vr">name</span>, <span class="vr">age</span>)</pre>
<h4>The 4 Core Data Types</h4>
<ul>
<li><code>str</code> â€” text: <code>"hello"</code></li>
<li><code>int</code> â€” whole number: <code>42</code></li>
<li><code>float</code> â€” decimal: <code>3.14</code></li>
<li><code>bool</code> â€” True or False</li>
</ul>
<h4>Checking the Type</h4>
<pre><span class="fn">print</span>(<span class="fn">type</span>(<span class="str">"hello"</span>))   <span class="cmt"># &lt;class 'str'&gt;</span>
<span class="fn">print</span>(<span class="fn">type</span>(<span class="num">42</span>))       <span class="cmt"># &lt;class 'int'&gt;</span></pre>`,
    tasks:['Create a variable for your name','Create a variable for your age','Print both variables in one print() call','Use type() to check what type your variables are'],
    starterCode:`# Variables & Data Types

name = ""          # Your name here
age =              # Your age here
is_learning = True

print(name, "is", age, "years old")
print(type(name))
print(type(age))`,
  },
  'py-1-4': {
    title:'User Input & Output',
    body:`<p>Programs become interactive when they can receive input from the user. The <code>input()</code> function pauses the program and waits for the user to type something.</p>
<h4>Getting Input</h4>
<pre><span class="vr">name</span> = <span class="fn">input</span>(<span class="str">"What is your name? "</span>)
<span class="fn">print</span>(<span class="str">"Hello,"</span>, <span class="vr">name</span>)</pre>
<h4>Converting Input Types</h4>
<p><code>input()</code> always returns a <strong>string</strong>. Convert it if you need a number:</p>
<pre><span class="vr">age</span> = <span class="fn">int</span>(<span class="fn">input</span>(<span class="str">"Enter your age: "</span>))
<span class="vr">year_born</span> = <span class="num">2026</span> - <span class="vr">age</span>
<span class="fn">print</span>(<span class="str">f"You were born in {<span class="vr">year_born</span>}"</span>)</pre>
<h4>f-Strings (Formatted Strings)</h4>
<p>Put an <code>f</code> before the quote and use <code>{variable}</code> inside to embed values:</p>
<pre><span class="vr">name</span> = <span class="str">"Alex"</span>
<span class="fn">print</span>(<span class="str">f"Hello, {<span class="vr">name</span>}! Welcome to Python."</span>)</pre>`,
    tasks:['Use input() to ask for the user\'s name','Use input() and int() to ask for their age','Use an f-string to print a greeting with both values'],
    starterCode:`# User Input & Output

name = input("What is your name? ")
age = int(input("How old are you? "))

# Use an f-string to greet the user
print(f"")  # Fill this in!
print(f"In 10 years, you will be {age + 10} years old!")`,
  },
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ASSESSMENTS DATA (LinkedIn-style questions)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const ASSESSMENTS = [
  {
    id:'python-assess', icon:'ğŸ', title:'Python (Programming Language)',
    desc:'Validate your Python skills across data types, OOP, error handling, and more.',
    color:'rgba(255,92,53,0.2)', level:'Beginnerâ€“Intermediate', time:15, questions:15,
    qs:[
      {
        q:'What is the output of the following code?\n\nx = [1, 2, 3]\ny = x\ny.append(4)\nprint(x)',
        code:'x = [1, 2, 3]\ny = x\ny.append(4)\nprint(x)',
        opts:['[1, 2, 3]','[1, 2, 3, 4]','[4, 3, 2, 1]','Error'],
        ans:1, exp:'In Python, <strong>y = x</strong> does not copy the list â€” both y and x point to the same list object in memory. So appending to y also modifies x. Output: [1, 2, 3, 4].'
      },
      {
        q:'Which of the following is used to handle exceptions in Python?',
        opts:['try/catch','try/except','try/handle','try/error'],
        ans:1, exp:'Python uses <strong>try/except</strong> blocks to handle exceptions â€” not try/catch like Java or JavaScript.'
      },
      {
        q:'What does the "self" parameter represent in a Python class method?',
        opts:['A reference to the class itself','A reference to the current instance','A global variable','A reserved keyword with no meaning'],
        ans:1, exp:'<strong>self</strong> refers to the specific instance of the class that called the method, allowing access to its attributes and other methods.'
      },
      {
        q:'What is the output of: print(type(3/2))?',
        opts:["<class 'int'>","<class 'float'>","<class 'double'>","<class 'number'>"],
        ans:1, exp:'In Python 3, dividing two integers with / always returns a <strong>float</strong>, even if the result is a whole number. Use // for integer division.'
      },
      {
        q:'Which list comprehension correctly squares all even numbers from 0 to 9?',
        opts:[
          '[x*x for x in range(10) if x%2=0]',
          '[x**2 for x in range(10) if x%2==0]',
          '[x^2 for x in range(10) if x%2==0]',
          '[x*x if x%2==0 for x in range(10)]'
        ],
        ans:1, exp:'The correct syntax uses ** for exponentiation, == for comparison, and the if clause comes after the for clause: <strong>[x**2 for x in range(10) if x%2==0]</strong>.'
      },
      {
        q:'What is a decorator in Python?',
        opts:[
          'A way to add CSS styling to terminal output',
          'A function that takes another function and extends its behaviour',
          'A class that inherits from multiple parents',
          'A built-in module for UI rendering'
        ],
        ans:1, exp:'A <strong>decorator</strong> is a function that wraps another function, allowing you to add behaviour before or after it runs, using the @decorator syntax.'
      },
      {
        q:'What does the following code return?\n\nprint(bool(0), bool(""), bool([]))',
        code:'print(bool(0), bool(""), bool([]))',
        opts:['True True True','False False False','False True True','True False False'],
        ans:1, exp:'In Python, <strong>falsy</strong> values include 0, empty string "", empty list [], None, and False itself. All three evaluate to False.'
      },
      {
        q:'Which method would you use to get all keys of a dictionary?',
        opts:['dict.values()','dict.items()','dict.keys()','dict.all()'],
        ans:2, exp:'<strong>dict.keys()</strong> returns a view of all keys. dict.values() returns values, and dict.items() returns key-value pairs as tuples.'
      },
      {
        q:'What is the difference between *args and **kwargs?',
        opts:[
          '*args is for lists, **kwargs is for tuples',
          '*args accepts positional arguments as a tuple; **kwargs accepts keyword arguments as a dict',
          '*args is for integers only; **kwargs is for strings only',
          'They are identical â€” just different naming conventions'
        ],
        ans:1, exp:'<strong>*args</strong> collects extra positional arguments into a tuple. <strong>**kwargs</strong> collects extra keyword arguments into a dictionary.'
      },
      {
        q:'What will this code print?\n\nx = 5\ndef change():\n    x = 10\nchange()\nprint(x)',
        code:'x = 5\ndef change():\n    x = 10\nchange()\nprint(x)',
        opts:['5','10','None','Error'],
        ans:0, exp:'Without the <strong>global</strong> keyword, assigning x = 10 inside the function creates a local variable. The outer x remains 5.'
      },
      {
        q:'Which of the following creates a generator in Python?',
        opts:['[x for x in range(10)]','(x for x in range(10))','list(range(10))','range(10).generate()'],
        ans:1, exp:'Using <strong>parentheses</strong> instead of brackets creates a generator expression, which is memory-efficient because it produces values lazily, one at a time.'
      },
      {
        q:'What is the output of: "hello"[::-1]?',
        opts:['hello','olleh','h','Error'],
        ans:1, exp:'The slice <strong>[::-1]</strong> reverses a string (or list). It steps through with a step of -1, from the end to the beginning.'
      },
      {
        q:'What does the @staticmethod decorator do?',
        opts:[
          'Makes the method run when the class is imported',
          'Defines a method that doesn\'t receive self or cls â€” it belongs to the class but doesn\'t access instance/class state',
          'Makes a method private',
          'Allows the method to be called only once'
        ],
        ans:1, exp:'A <strong>@staticmethod</strong> is a method inside a class that doesn\'t access the instance (self) or class (cls). It\'s essentially a regular function grouped inside the class for organisation.'
      },
      {
        q:'What is the result of: 10 // 3?',
        opts:['3.33','3','4','3.0'],
        ans:1, exp:'The <strong>//</strong> operator performs floor division â€” it divides and rounds down to the nearest integer. 10 // 3 = 3.'
      },
      {
        q:'Which of these correctly opens a file for reading in Python?',
        opts:["open('file.txt')","open('file.txt', 'r')","Both A and B","open('file.txt', mode=read)"],
        ans:2, exp:'Both are correct. <strong>open(\'file.txt\')</strong> defaults to read mode (\'r\'), and <strong>open(\'file.txt\', \'r\')</strong> makes it explicit. Both are valid.'
      },
    ]
  },
  {
    id:'js-assess', icon:'âš¡', title:'JavaScript (Programming Language)',
    desc:'Test your JS fundamentals including closures, async/await, prototypes, and the DOM.',
    color:'rgba(247,224,75,0.2)', level:'Beginnerâ€“Intermediate', time:15, questions:15,
    qs:[
      {q:'What is the difference between == and === in JavaScript?',opts:['No difference','== checks value only; === checks value AND type','== checks type; === checks value','=== is not valid JavaScript'],ans:1,exp:'<strong>===</strong> (strict equality) checks both value and type without coercion. <strong>==</strong> performs type coercion before comparing.'},
      {q:'What does "closure" mean in JavaScript?',opts:['A function that calls itself','A function that has access to its outer scope even after that outer function has returned','A way to close a browser window','A method to terminate a loop'],ans:1,exp:'A <strong>closure</strong> is created when a function retains access to the variables of its enclosing scope even after that scope has finished executing.'},
      {q:'What is the output of: console.log(typeof null)?',opts:['null','undefined','object','string'],ans:2,exp:'This is a famous JavaScript bug. <strong>typeof null</strong> returns "object" â€” it\'s been this way since the beginning and can\'t be changed for backward compatibility.'},
      {q:'Which method converts a JSON string to a JavaScript object?',opts:['JSON.stringify()','JSON.parse()','JSON.convert()','JSON.toObject()'],ans:1,exp:'<strong>JSON.parse()</strong> converts a JSON string into a JS object. JSON.stringify() does the reverse.'},
      {q:'What does "hoisting" mean in JavaScript?',opts:['Moving HTML elements up the DOM','Variable and function declarations being moved to the top of their scope before execution','A CSS technique','A method to increase performance'],ans:1,exp:'<strong>Hoisting</strong> means JavaScript moves var declarations and function declarations to the top of their scope during the compilation phase, before code runs.'},
      {q:'What is the result of: [] + [] in JavaScript?',opts:['[]','""','0','Error'],ans:1,exp:'Adding two arrays coerces them to strings first. An empty array becomes an empty string, so "" + "" = "" (empty string).'},
      {q:'Which is correct to create a Promise in JavaScript?',opts:['new Promise(function(resolve, reject) {})','Promise.create()','new Promise()','Promise.new(function(){})'],ans:0,exp:'A Promise is created with <strong>new Promise()</strong> that takes an executor function with resolve and reject parameters.'},
      {q:'What is "event bubbling" in the DOM?',opts:['An animation effect','When an event fires on an element and propagates up to ancestor elements','When events are queued in a buffer','A type of CSS transition'],ans:1,exp:'<strong>Event bubbling</strong> means when an event fires on a child element, it then "bubbles up" through its parents in the DOM tree, potentially triggering their event listeners too.'},
      {q:'What does the spread operator (...) do?',opts:['Multiplies elements','Expands an iterable (array/object) into individual elements','Creates a copy of a function','Merges two classes'],ans:1,exp:'The <strong>spread operator</strong> (...) expands iterables. For arrays: [...arr1, ...arr2] merges them. For objects: {...obj1, ...obj2} merges properties.'},
      {q:'What is the difference between let, const, and var?',opts:['They are identical','var is function-scoped; let and const are block-scoped; const can\'t be reassigned','let is global; const is local; var is deprecated','var and let are identical; const prevents all mutations'],ans:1,exp:'<strong>var</strong> is function-scoped and hoisted. <strong>let</strong> and <strong>const</strong> are block-scoped. <strong>const</strong> prevents reassignment (but object/array contents can still be mutated).'},
      {q:'Which array method returns a new array with elements that pass a test?',opts:['.forEach()','.map()','.filter()','.find()'],ans:2,exp:'<strong>.filter()</strong> returns a new array containing only elements for which the callback returns true. .map() transforms elements, .forEach() just iterates.'},
      {q:'What is async/await used for?',opts:['Parallel computing','Writing asynchronous code that looks synchronous','Declaring global variables','DOM manipulation'],ans:1,exp:'<strong>async/await</strong> is syntactic sugar over Promises that lets you write asynchronous code in a synchronous style, making it much more readable.'},
      {q:'What does Object.freeze() do?',opts:['Deletes all object properties','Prevents new properties from being added or existing ones changed','Creates a deep copy','Converts an object to a string'],ans:1,exp:'<strong>Object.freeze()</strong> makes an object immutable â€” no properties can be added, removed, or changed. Note: it\'s shallow, so nested objects can still be mutated.'},
      {q:'What is the prototype chain in JavaScript?',opts:['A series of CSS rules','The chain of objects each object inherits from, used for property lookup','A list of event listeners','A way to chain array methods'],ans:1,exp:'The <strong>prototype chain</strong> is how JavaScript implements inheritance. When you access a property on an object, JS looks up the chain through prototypes until it finds the property or reaches null.'},
      {q:'What does the following return: Boolean("")?',opts:['true','false','undefined','null'],ans:1,exp:'An empty string is a <strong>falsy</strong> value in JavaScript. Boolean("") returns false. Other falsy values: 0, null, undefined, NaN, false.'},
    ]
  },
  {
    id:'sql-assess', icon:'ğŸ—„ï¸', title:'SQL (Database)',
    desc:'Test your knowledge of queries, joins, aggregations, and database design.',
    color:'rgba(59,91,255,0.2)', level:'Beginnerâ€“Intermediate', time:15, questions:10,
    qs:[
      {q:'What does SELECT DISTINCT do?',opts:['Selects the first row only','Returns only unique values, removing duplicates','Selects rows in alphabetical order','Makes the query case-sensitive'],ans:1,exp:'<strong>SELECT DISTINCT</strong> removes duplicate rows from the result set, returning only unique values for the specified columns.'},
      {q:'What is the difference between WHERE and HAVING?',opts:['No difference','WHERE filters rows before grouping; HAVING filters groups after GROUP BY','WHERE works on strings; HAVING works on numbers','HAVING is deprecated'],ans:1,exp:'<strong>WHERE</strong> filters individual rows before aggregation. <strong>HAVING</strong> filters groups after a GROUP BY clause, allowing you to filter based on aggregate functions like COUNT(), SUM().'},
      {q:'What type of JOIN returns all rows from both tables, with NULLs where there\'s no match?',opts:['INNER JOIN','LEFT JOIN','RIGHT JOIN','FULL OUTER JOIN'],ans:3,exp:'A <strong>FULL OUTER JOIN</strong> returns all rows from both tables. Where there\'s no match, the other table\'s columns are NULL.'},
      {q:'What does the GROUP BY clause do?',opts:['Sorts rows alphabetically','Groups rows that have the same values in specified columns, typically for aggregation','Limits the number of returned rows','Joins multiple tables'],ans:1,exp:'<strong>GROUP BY</strong> groups rows with identical values in the specified columns. It\'s used with aggregate functions (COUNT, SUM, AVG, MAX, MIN) to compute a summary for each group.'},
      {q:'What is a PRIMARY KEY?',opts:['The first column in a table','A column (or set of columns) that uniquely identifies each row â€” must be unique and NOT NULL','A foreign reference to another table','A column with the highest values'],ans:1,exp:'A <strong>PRIMARY KEY</strong> uniquely identifies every row in a table. It cannot contain NULL values and must be unique across all rows.'},
      {q:'Which function returns the total count of rows?',opts:['SUM()','TOTAL()','COUNT()','LENGTH()'],ans:2,exp:'<strong>COUNT()</strong> returns the number of rows. COUNT(*) counts all rows; COUNT(column) counts non-NULL values in that column.'},
      {q:'What does the LIMIT clause do?',opts:['Limits the size of the database','Restricts the number of rows returned by a query','Makes the query faster','Filters rows by a condition'],ans:1,exp:'<strong>LIMIT n</strong> restricts the result set to at most n rows. Very useful for pagination or checking a sample of data.'},
      {q:'What is a foreign key?',opts:['A key that only admins can access','A column that references the PRIMARY KEY of another table, establishing a relationship','An encrypted primary key','A key that can be NULL'],ans:1,exp:'A <strong>FOREIGN KEY</strong> links a column in one table to the PRIMARY KEY of another table, enforcing referential integrity between related records.'},
      {q:'What does the LIKE operator do in SQL?',opts:['Checks for exact string matches','Searches for a pattern in a string column using wildcards (% and _)','Converts strings to uppercase','Compares numeric values'],ans:1,exp:'<strong>LIKE</strong> is used with wildcards: % matches any sequence of characters, _ matches exactly one character. Example: WHERE name LIKE \'J%\' finds all names starting with J.'},
      {q:'What is an INDEX in SQL used for?',opts:['Organising columns alphabetically','Speeding up data retrieval at the cost of extra storage and write overhead','Enforcing unique values','Creating relationships between tables'],ans:1,exp:'An <strong>INDEX</strong> is a data structure that dramatically speeds up SELECT queries on large tables. The trade-off is more storage and slightly slower INSERT/UPDATE/DELETE operations.'},
    ]
  },
  {
    id:'git-assess', icon:'ğŸŒ¿', title:'Git (Version Control)',
    desc:'Prove your knowledge of branches, merges, rebasing, and Git workflows.',
    color:'rgba(45,204,135,0.2)', level:'Beginnerâ€“Intermediate', time:10, questions:10,
    qs:[
      {q:'What does "git clone" do?',opts:['Creates a new empty repository','Downloads a copy of a remote repository to your local machine','Deletes a remote repository','Merges two branches'],ans:1,exp:'<strong>git clone</strong> downloads an entire repository from a remote (like GitHub), including all history, branches, and files.'},
      {q:'What is the difference between "git fetch" and "git pull"?',opts:['They are identical','git fetch downloads changes but does not merge; git pull downloads AND merges','git pull is safer','git fetch is deprecated'],ans:1,exp:'<strong>git fetch</strong> downloads remote changes but leaves your working branch untouched. <strong>git pull</strong> is essentially git fetch + git merge â€” it downloads and integrates changes.'},
      {q:'What does "git stash" do?',opts:['Deletes uncommitted changes','Temporarily saves uncommitted changes so you can switch branches','Commits changes with a temporary message','Creates a backup branch'],ans:1,exp:'<strong>git stash</strong> temporarily shelves (stashes) changes you\'ve made but don\'t want to commit yet, letting you switch context and come back later with git stash pop.'},
      {q:'What is a "merge conflict"?',opts:['An error in the .gitignore file','When two branches have made different changes to the same part of the same file that Git can\'t auto-resolve','When you try to push without permission','A corrupted git history'],ans:1,exp:'A <strong>merge conflict</strong> occurs when two branches edit the same lines of a file differently. Git marks the conflicting sections and a developer must manually choose which version to keep.'},
      {q:'What does "git rebase" do?',opts:['Reverts the last commit','Moves or replays commits from one branch onto another, creating a linear history','Creates a new branch','Merges two branches'],ans:1,exp:'<strong>git rebase</strong> rewrites commit history by replaying commits on top of another branch. It creates a cleaner, linear history compared to a merge, but should not be used on shared public branches.'},
      {q:'Which command stages all changed files for the next commit?',opts:['git commit -a','git add .','git push --all','git stage all'],ans:1,exp:'<strong>git add .</strong> stages all changes in the current directory. Then git commit creates the snapshot.'},
      {q:'What is the HEAD in Git?',opts:['The first commit ever made','A pointer to the currently checked-out commit or branch','The main/master branch','The remote origin'],ans:1,exp:'<strong>HEAD</strong> is a special pointer that tells Git which commit you\'re currently working on. It typically points to the tip of the current branch.'},
      {q:'What does "git cherry-pick <commit>" do?',opts:['Deletes a specific commit','Applies the changes from a specific commit to the current branch','Shows commit details','Reverts a commit'],ans:1,exp:'<strong>git cherry-pick</strong> lets you apply the changes from a specific commit (identified by its hash) to your current branch, without merging the entire branch.'},
      {q:'What is .gitignore used for?',opts:['Listing collaborators','Specifying files and directories that Git should not track','Storing commit messages','Configuring the remote URL'],ans:1,exp:'<strong>.gitignore</strong> tells Git which files/folders to ignore â€” typically build artifacts, node_modules, .env files, and OS-generated files like .DS_Store.'},
      {q:'What does "git reset --hard HEAD~1" do?',opts:['Creates a new branch','Permanently removes the last commit and all its changes from the working directory','Shows the previous commit','Merges the last commit'],ans:1,exp:'<strong>git reset --hard HEAD~1</strong> moves the branch pointer back by one commit AND discards all changes. This is destructive â€” the changes are gone from the working tree too. Use with care.'},
    ]
  },
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let state = {
  loggedIn: false,
  xp: 0,
  currentCourse: null,
  currentLesson: null,
  currentAssessment: null,
  quizAnswers: {},
  quizCurrent: 0,
  quizTimer: null,
  quizTimeLeft: 0,
  quizRevealed: false,
  interviewState: {
    role:'Frontend Dev', difficulty:'Easy', diffClass:'easy', type:'technical',
    active:false, questionNum:0, history:[], awaitingAnswer:false, loading:false,
  }
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// VIEW ROUTING
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function scrollToSection(id) {
  setTimeout(() => {
    const el = document.getElementById(id);
    if (el) el.scrollIntoView({ behavior:'smooth', block:'start' });
  }, 100);
}

function simulateLogin() {
  state.loggedIn = true;
  document.getElementById('navLinks').innerHTML = `
    <li><a onclick="showView('dashboard')">Dashboard</a></li>
    <li><a onclick="showView('interview-questions')" style="color:var(--yellow);font-weight:600">ğŸ”¥ Interview Qs</a></li>
    <li><a onclick="showView('assessment-select')">ğŸ“ Assessments</a></li>
    <li><a onclick="showView('landing');setTimeout(()=>scrollToSection('interview'),100)">ğŸ™ AI Interview</a></li>
    <li><a onclick="showView('dashboard')" style="color:var(--muted)">Hi, Learner ğŸ‘‹</a></li>
  `;
  document.getElementById('navUser').classList.add('show');
  updateXP(0);
  showView('dashboard');
}

function updateXP(amount) {
  state.xp += amount;
  document.getElementById('xpBadge').textContent = `âš¡ ${state.xp} XP`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CATALOG RENDER (landing)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderCatalog(filter = 'all') {
  const grid = document.getElementById('catalogGrid');
  if (!grid) return;
  const filtered = filter === 'all' ? COURSES : COURSES.filter(c => c.tags.includes(filter) || c.level === filter);
  grid.innerHTML = filtered.map(c => `
    <div class="path-card" onclick="openCourse('${c.id}')">
      <div class="path-icon" style="background:${c.color}">${c.icon}</div>
      <h3>${c.title}</h3>
      <p>${c.desc}</p>
      <div class="path-meta">
        <span class="badge ${c.level}">${c.level.charAt(0).toUpperCase()+c.level.slice(1)}</span>
        <span class="path-hours">${c.hours}h</span>
        <span class="path-lessons">${c.lessons} lessons</span>
      </div>
      ${c.progress > 0 ? `<div class="path-progress"><div class="path-progress-fill" style="width:${c.progress}%"></div></div>` : ''}
    </div>`).join('');
}

function filterCatalog(btn, filter) {
  document.querySelectorAll('.filter-chip').forEach(c => c.classList.remove('active'));
  btn.classList.add('active');
  renderCatalog(filter);
}

// Assessment promo
function renderAssessmentPromo() {
  const g = document.getElementById('assessmentPromoGrid');
  if (!g) return;
  g.innerHTML = ASSESSMENTS.slice(0, 4).map(a => `
    <div class="path-card" onclick="showView('assessment-select')" style="cursor:pointer">
      <div class="path-icon" style="background:${a.color}">${a.icon}</div>
      <h3 style="font-size:0.9rem">${a.title}</h3>
      <div class="path-meta">
        <span class="badge intermediate">Assessment</span>
        <span class="path-hours">${a.time} min</span>
      </div>
    </div>`).join('');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// COURSE / LESSON
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function openCourse(courseId) {
  const course = COURSES.find(c => c.id === courseId);
  state.currentCourse = course;
  const firstLesson = course.modules[0].lessons[0];
  openLesson(courseId, firstLesson.id);
}

function openLesson(courseId, lessonId) {
  const course = COURSES.find(c => c.id === courseId);
  state.currentCourse = course;
  state.currentLesson = lessonId;
  const content = LESSON_CONTENT[lessonId] || {
    title: course.modules.flatMap(m=>m.lessons).find(l=>l.id===lessonId)?.title || 'Lesson',
    body:'<p>This lesson content is coming soon. Check back shortly!</p>',
    tasks:['Complete the exercise in the editor'],
    starterCode:'# Write your code here\n\n'
  };
  showView('course');
  document.getElementById('lessonLayout').innerHTML = buildLessonUI(course, lessonId, content);
  // syntax highlight textareas aren't real editors â€” set value
  const ed = document.getElementById('codeEditor');
  if (ed) ed.value = content.starterCode || '# Write your code here\n';
}

function buildLessonUI(course, activeId, content) {
  const sidebar = course.modules.map(mod => `
    <div class="lesson-section-header">${mod.title}</div>
    ${mod.lessons.map((l,i) => `
      <div class="lesson-item ${l.id === activeId ? 'active':''} ${l.done?'completed':''}" onclick="openLesson('${course.id}','${l.id}')">
        <span class="li-num">${String(i+1).padStart(2,'0')}</span>
        ${l.title}
        <span class="li-check">${l.done ? 'âœ…' : ''}</span>
      </div>`).join('')}
  `).join('');

  const tasks = (content.tasks||[]).map((t,i) => `
    <label class="task-check-item" id="task-${i}">
      <input type="checkbox" onchange="checkTask(${i},${content.tasks.length})"> ${t}
    </label>`).join('');

  return `
    <div class="lesson-sidebar">
      <div class="lesson-sidebar-title">${course.title}<span>${course.icon} ${course.level}</span></div>
      ${sidebar}
    </div>
    <div class="lesson-instructions">
      <div class="lesson-top-bar">
        <div class="lesson-breadcrumb">${course.title} â€º ${content.title}</div>
        <div class="lesson-nav-btns">
          <button class="lesson-nav-btn" onclick="showView('dashboard')">â† Back</button>
          <button class="lesson-nav-btn primary" onclick="markDone('${activeId}','${course.id}')">Mark Complete âœ“</button>
        </div>
      </div>
      <div class="lesson-title">${content.title}</div>
      <div class="lesson-body">${content.body}</div>
      <div class="task-checklist">
        <h4>ğŸ“‹ Tasks</h4>
        ${tasks}
      </div>
      <button class="run-btn" onclick="runCode()">â–¶ Run Code</button>
    </div>
    <div class="editor-panel">
      <div class="editor-tabs">
        <div class="editor-tab active">ğŸ“„ script.py</div>
        <div class="editor-tab">ğŸ§ª tests.py</div>
      </div>
      <div class="editor-area">
        <textarea class="code-editor" id="codeEditor" spellcheck="false">${content.starterCode||'# Write your code here\n'}</textarea>
        <div class="output-panel">
          <div class="output-panel-label">
            <span>â–¶ Output</span>
            <span onclick="clearOutput()" style="cursor:pointer;font-size:0.7rem;color:var(--muted)">Clear</span>
          </div>
          <div id="outputArea"><div class="output-text info">Run your code to see output here.</div></div>
        </div>
      </div>
    </div>`;
}

function checkTask(i, total) {
  const el = document.getElementById(`task-${i}`);
  if (el) el.classList.toggle('done', el.querySelector('input').checked);
}

// â”€â”€ Pyodide Python runner â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let pyodide = null;
let pyodideLoading = false;

async function loadPyodideIfNeeded() {
  if (pyodide) return pyodide;
  if (pyodideLoading) return null;
  pyodideLoading = true;
  const out = document.getElementById('outputArea');
  if (out) out.innerHTML = '<div class="output-text info"><span class="py-loading">âš™ Loading Python runtime (first run only)â€¦</span></div>';
  try {
    pyodide = await loadPyodide({ indexURL: 'https://cdn.jsdelivr.net/pyodide/v0.24.1/full/' });
    return pyodide;
  } catch(e) {
    pyodideLoading = false;
    return null;
  }
}

async function runCode() {
  const code = document.getElementById('codeEditor')?.value || '';
  const out = document.getElementById('outputArea');
  const btn = document.querySelector('.run-btn');
  if (!out) return;
  if (btn) btn.disabled = true;
  out.innerHTML = '<div class="output-text info">âš™ Runningâ€¦</div>';

  const py = await loadPyodideIfNeeded();
  if (!py) {
    // Fallback: simulate basic print() for offline / CDN blocked
    let printLines = [];
    code.split('\n').forEach(line => {
      const m = line.match(/print\((.+)\)/);
      if (m) {
        let val = m[1].trim().replace(/^[f]?["'](.*)["']$/, '$1');
        printLines.push(val);
      }
    });
    const output = printLines.length ? printLines.join('\n') : '(no output â€” Pyodide unavailable)';
    out.innerHTML = `<div class="output-text">${output.replace(/\n/g,'<br>')}</div>`;
    if (btn) btn.disabled = false;
    updateXP(5); saveProgressToSupabase();
    return;
  }

  // Capture stdout
  let stdout = [];
  py.globals.set('__stdout__', { write: (s) => { if (s.trim()) stdout.push(s); } });
  try {
    await py.runPythonAsync(`
import sys
class _Capture:
    def write(self, s):
        import js; js.globals['__stdout__'].write(s)
    def flush(self): pass
sys.stdout = _Capture()
${code}
`);
    const result = stdout.join('').trim();
    out.innerHTML = `<div class="output-text">${result ? result.replace(/\n/g,'<br>') : '(code ran â€” no output)'}</div>`;
    updateXP(5); saveProgressToSupabase();
  } catch(e) {
    const msg = String(e).replace(/File.*line \d+,?\s*/,'').replace(/\n/g,'<br>');
    out.innerHTML = `<div class="output-text error">âŒ ${msg}</div>`;
  }
  if (btn) btn.disabled = false;
}

function clearOutput() {
  const out = document.getElementById('outputArea');
  if (out) out.innerHTML = '<div class="output-text info">Run your code to see output here.</div>';
}

function markDone(lessonId, courseId) {
  const course = COURSES.find(c=>c.id===courseId);
  const lesson = course?.modules.flatMap(m=>m.lessons).find(l=>l.id===lessonId);
  if (lesson && !lesson.done) { lesson.done = true; updateXP(50); }
  // Move to next lesson
  const allLessons = course.modules.flatMap(m=>m.lessons);
  const idx = allLessons.findIndex(l=>l.id===lessonId);
  if (idx < allLessons.length - 1) openLesson(courseId, allLessons[idx+1].id);
  else showView('dashboard');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DASHBOARD
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderDashboard() {
  showDashTab('home', null);
}

function showDashTab(tab, el) {
  document.querySelectorAll('.sidebar-item').forEach(s=>s.classList.remove('active'));
  if (el) el.classList.add('active');
  const dc = document.getElementById('dashContent');
  const completedLessons = COURSES.flatMap(c=>c.modules.flatMap(m=>m.lessons)).filter(l=>l.done).length;

  if (tab === 'home') {
    dc.innerHTML = `
      <div class="dash-welcome">
        <h2>Welcome back ğŸ‘‹</h2>
        <p>Keep the momentum going. You're doing great!</p>
        <div class="dash-streak">ğŸ”¥ 3-day streak â€” keep it up!</div>
      </div>
      <div class="dash-grid">
        <div class="dash-stat-card"><div class="dsc-label">Lessons Completed</div><div class="dsc-val" style="color:var(--green)">${completedLessons}</div><div class="dsc-sub">of ${COURSES.flatMap(c=>c.modules.flatMap(m=>m.lessons)).length} total</div></div>
        <div class="dash-stat-card"><div class="dsc-label">XP Earned</div><div class="dsc-val" style="color:var(--yellow)">${state.xp}</div><div class="dsc-sub">keep going to level up</div></div>
        <div class="dash-stat-card"><div class="dsc-label">Assessments Passed</div><div class="dsc-val" style="color:var(--accent2)">0</div><div class="dsc-sub">try one now</div></div>
      </div>
      <div class="continue-section">
        <h3>Continue Learning</h3>
        ${COURSES.filter(c=>c.progress>0||c.modules.flatMap(m=>m.lessons).some(l=>l.done)).map(c=>`
          <div class="continue-card" onclick="openCourse('${c.id}')">
            <div class="continue-icon" style="background:${c.color}">${c.icon}</div>
            <div class="continue-info">
              <h4>${c.title}</h4>
              <p>${c.level} Â· ${c.hours}h course</p>
              <div class="continue-progress"><div class="continue-progress-fill" style="width:${c.progress}%"></div></div>
            </div>
            <div class="continue-arrow">â€º</div>
          </div>`).join('') || '<p style="color:var(--muted);font-size:0.9rem">No courses started yet. <a onclick="showDashTab(\'all-courses\',null)" style="color:var(--accent);cursor:pointer">Browse all courses â†’</a></p>'}
      </div>
      <div>
        <h3 style="font-family:\'Syne\',sans-serif;font-weight:700;font-size:1.1rem;margin-bottom:1rem">Recommended Next</h3>
        <div class="courses-grid">
          ${COURSES.slice(0,3).map(c=>`
            <div class="course-card" onclick="openCourse('${c.id}')">
              <div class="course-card-banner" style="background:${c.color}">${c.icon}</div>
              <div class="course-card-body">
                <h4>${c.title}</h4>
                <p>${c.desc.substring(0,70)}...</p>
                <div class="course-card-meta"><span class="badge ${c.level}">${c.level}</span><span class="path-hours">${c.hours}h</span></div>
              </div>
            </div>`).join('')}
        </div>
      </div>`;
  } else if (tab === 'all-courses') {
    dc.innerHTML = `
      <h2 style="font-family:'Syne',sans-serif;font-weight:800;font-size:1.6rem;margin-bottom:1.5rem;letter-spacing:-0.02em">All Courses</h2>
      <div class="courses-grid">
        ${COURSES.map(c=>`
          <div class="course-card" onclick="openCourse('${c.id}')">
            <div class="course-card-banner" style="background:${c.color}">${c.icon}</div>
            <div class="course-card-body">
              <h4>${c.title}</h4>
              <p>${c.desc.substring(0,65)}â€¦</p>
              <div class="course-card-meta"><span class="badge ${c.level}">${c.level}</span><span class="path-hours">${c.hours}h</span></div>
              ${c.progress>0?`<div class="path-progress" style="margin-top:0.6rem"><div class="path-progress-fill" style="width:${c.progress}%"></div></div>`:''}
            </div>
          </div>`).join('')}
      </div>`;
  } else if (tab === 'my-courses') {
    const started = COURSES.filter(c=>c.progress>0||c.modules.flatMap(m=>m.lessons).some(l=>l.done));
    dc.innerHTML = `
      <h2 style="font-family:'Syne',sans-serif;font-weight:800;font-size:1.6rem;margin-bottom:1.5rem;letter-spacing:-0.02em">My Courses</h2>
      ${started.length ? `<div class="courses-grid">${started.map(c=>`
        <div class="course-card" onclick="openCourse('${c.id}')">
          <div class="course-card-banner" style="background:${c.color}">${c.icon}</div>
          <div class="course-card-body">
            <h4>${c.title}</h4>
            <p>${c.desc.substring(0,65)}â€¦</p>
            <div class="course-card-meta"><span class="badge ${c.level}">${c.level}</span></div>
            <div class="path-progress" style="margin-top:0.6rem"><div class="path-progress-fill" style="width:${c.progress}%"></div></div>
          </div>
        </div>`).join('')}</div>` : `<p style="color:var(--muted)">You haven't started any courses yet. <a onclick="showDashTab('all-courses',null)" style="color:var(--accent);cursor:pointer">Browse all â†’</a></p>`}`;
  } else if (tab === 'certificates') {
    dc.innerHTML = `
      <h2 style="font-family:'Syne',sans-serif;font-weight:800;font-size:1.6rem;margin-bottom:0.5rem;letter-spacing:-0.02em">Certificates</h2>
      <p style="color:var(--muted);margin-bottom:2rem">Complete a course or pass an assessment to earn certificates.</p>
      <div style="text-align:center;padding:4rem;background:var(--card-bg);border:1px solid var(--border);border-radius:16px">
        <div style="font-size:3rem;margin-bottom:1rem">ğŸ†</div>
        <h3 style="font-family:'Syne',sans-serif;font-weight:700">No certificates yet</h3>
        <p style="color:var(--muted);margin-top:0.5rem;font-size:0.9rem">Finish a course or score top 30% on an assessment to earn your first badge.</p>
        <button class="btn-primary" onclick="showView('assessment-select')" style="margin-top:1.5rem">Take an Assessment â†’</button>
      </div>`;
  } else if (tab === 'streak') {
    const days = ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'];
    const activeD = [0,1,2];
    dc.innerHTML = `
      <h2 style="font-family:'Syne',sans-serif;font-weight:800;font-size:1.6rem;margin-bottom:0.5rem;letter-spacing:-0.02em">ğŸ”¥ Your Streak</h2>
      <p style="color:var(--muted);margin-bottom:2rem">Learn every day to build your streak. Miss a day and it resets!</p>
      <div style="background:var(--card-bg);border:1px solid var(--border);border-radius:16px;padding:2rem">
        <div style="text-align:center;margin-bottom:2rem">
          <div style="font-family:'Syne',sans-serif;font-size:4rem;font-weight:800;color:var(--yellow)">3</div>
          <div style="color:var(--muted)">day streak ğŸ”¥</div>
        </div>
        <div style="display:flex;justify-content:center;gap:0.8rem;flex-wrap:wrap">
          ${days.map((d,i)=>`
            <div style="text-align:center">
              <div style="width:44px;height:44px;border-radius:50%;background:${activeD.includes(i)?'var(--yellow)':'rgba(255,255,255,0.06)'};border:2px solid ${activeD.includes(i)?'var(--yellow)':'var(--border)'};display:flex;align-items:center;justify-content:center;font-size:1.1rem;margin:0 auto 0.4rem">${activeD.includes(i)?'ğŸ”¥':'â—‹'}</div>
              <div style="font-size:0.72rem;color:var(--muted);font-family:'DM Mono',monospace">${d}</div>
            </div>`).join('')}
        </div>
      </div>`;
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ASSESSMENTS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderAssessmentSelect() {
  const g = document.getElementById('assessmentSelectGrid');
  if (!g) return;
  g.innerHTML = ASSESSMENTS.map(a => `
    <div class="path-card" onclick="startAssessment('${a.id}')" style="cursor:pointer">
      <div class="path-icon" style="background:${a.color};width:52px;height:52px;font-size:1.5rem">${a.icon}</div>
      <h3>${a.title}</h3>
      <p style="font-size:0.83rem;color:var(--muted);margin-top:0.3rem;line-height:1.5">${a.desc}</p>
      <div class="path-meta" style="margin-top:1rem">
        <span class="badge intermediate">Assessment</span>
        <span class="path-hours">â± ${a.time} min</span>
        <span class="path-lessons">${a.questions} Qs</span>
      </div>
      <div style="margin-top:0.8rem;font-size:0.78rem;color:var(--muted)">${a.level}</div>
    </div>`).join('');
}

function startAssessment(id) {
  const a = ASSESSMENTS.find(x=>x.id===id);
  state.currentAssessment = a;
  state.quizAnswers = {};
  state.quizCurrent = 0;
  state.quizRevealed = false;
  state.quizTimeLeft = a.time * 60;
  showView('assessment-quiz');
  renderQuizHeader();
  renderQuestion(0);
  startTimer();
}

function renderQuizHeader() {
  const a = state.currentAssessment;
  const c = document.getElementById('quizContainer');
  // header only â€” question injected below
  c.innerHTML = `
    <button onclick="showView('assessment-select')" style="background:none;border:none;color:var(--muted);cursor:pointer;font-size:0.85rem;font-family:'DM Sans',sans-serif;display:flex;align-items:center;gap:0.4rem;margin-bottom:1rem">â† All assessments</button>
    <div class="assessment-header-card">
      <div class="assessment-icon-big" style="background:${a.color}">${a.icon}</div>
      <div class="assessment-header-info">
        <h2>${a.title}</h2>
        <p>${a.desc}</p>
        <div class="assessment-meta-row">
          <div class="assessment-meta-item">â± <strong>${a.time} min</strong></div>
          <div class="assessment-meta-item">â“ <strong>${a.qs.length} questions</strong></div>
          <div class="assessment-meta-item">ğŸ¯ <strong>Top 30% earns badge</strong></div>
        </div>
      </div>
    </div>
    <div class="quiz-progress-bar"><div class="quiz-progress-fill" id="qProgressFill" style="width:0%"></div></div>
    <div id="questionArea"></div>`;
}

function renderQuestion(idx) {
  const a = state.currentAssessment;
  const q = a.qs[idx];
  const pct = (idx/a.qs.length)*100;
  const fill = document.getElementById('qProgressFill');
  if (fill) fill.style.width = pct + '%';
  const area = document.getElementById('questionArea');
  if (!area) return;
  const selected = state.quizAnswers[idx];
  const letters = ['A','B','C','D'];
  area.innerHTML = `
    <div class="quiz-card">
      <div class="quiz-q-num">Question ${idx+1} of ${a.qs.length}</div>
      <div class="quiz-question">${q.q}</div>
      ${q.code ? `<div class="quiz-code">${q.code}</div>` : ''}
      <div class="quiz-options">
        ${q.opts.map((opt,i) => {
          let cls = '';
          if (state.quizRevealed) {
            if (i === q.ans) cls = 'revealed-correct';
            if (selected === i && i !== q.ans) cls = 'wrong';
            if (selected === i && i === q.ans) cls = 'correct';
          } else if (selected === i) cls = 'selected';
          return `<button class="quiz-option ${cls}" onclick="selectOption(${idx},${i})" ${state.quizRevealed?'disabled':''}>
            <span class="option-letter">${letters[i]}</span>${opt}
          </button>`;
        }).join('')}
      </div>
      ${state.quizRevealed && q.exp ? `<div class="quiz-explanation show">ğŸ’¡ <strong>Explanation:</strong> ${q.exp}</div>` : ''}
    </div>
    <div class="quiz-actions">
      <div class="quiz-timer" id="quizTimerEl">â± <span id="timerDisplay">${formatTime(state.quizTimeLeft)}</span></div>
      <div style="display:flex;gap:0.5rem">
        ${!state.quizRevealed && selected !== undefined ? `<button class="quiz-submit-btn" style="background:rgba(255,255,255,0.1);color:var(--white)" onclick="revealAnswer(${idx})">Check Answer</button>` : ''}
        ${state.quizRevealed && idx < a.qs.length-1 ? `<button class="quiz-submit-btn" onclick="nextQuestion(${idx})">Next Question â†’</button>` : ''}
        ${state.quizRevealed && idx === a.qs.length-1 ? `<button class="quiz-submit-btn" style="background:var(--green);color:#000" onclick="finishAssessment()">See Results ğŸ‰</button>` : ''}
        ${!state.quizRevealed && selected === undefined ? `<button class="quiz-submit-btn" disabled>Select an answer</button>` : ''}
      </div>
    </div>`;
}

function selectOption(qIdx, optIdx) {
  if (state.quizRevealed) return;
  state.quizAnswers[qIdx] = optIdx;
  renderQuestion(qIdx);
}

function revealAnswer(idx) {
  state.quizRevealed = true;
  renderQuestion(idx);
}

function nextQuestion(idx) {
  state.quizRevealed = false;
  state.quizCurrent = idx + 1;
  renderQuestion(state.quizCurrent);
}

function finishAssessment() {
  clearInterval(state.quizTimer);
  const a = state.currentAssessment;
  let correct = 0;
  a.qs.forEach((q,i) => { if (state.quizAnswers[i] === q.ans) correct++; });
  const score = Math.round((correct/a.qs.length)*100);
  const passed = score >= 70;
  if (passed) updateXP(200);
  else updateXP(50);
  showView('assessment-results');
  const rc = document.getElementById('resultsContainer');
  const scoreColor = score >= 70 ? 'var(--green)' : score >= 50 ? 'var(--yellow)' : 'var(--accent)';
  const circumference = 2 * Math.PI * 50;
  const dash = circumference - (score/100)*circumference;
  rc.innerHTML = `
    <button onclick="showView('assessment-select')" style="background:none;border:none;color:var(--muted);cursor:pointer;font-size:0.85rem;font-family:'DM Sans',sans-serif;display:flex;align-items:center;gap:0.4rem;margin-bottom:1rem">â† All assessments</button>
    <div class="results-card">
      <div class="results-score-ring">
        <svg viewBox="0 0 120 120">
          <circle cx="60" cy="60" r="50" fill="none" stroke="rgba(255,255,255,0.06)" stroke-width="10"/>
          <circle cx="60" cy="60" r="50" fill="none" stroke="${scoreColor}" stroke-width="10" stroke-dasharray="${circumference}" stroke-dashoffset="${dash}" stroke-linecap="round"/>
        </svg>
        <div class="score-text" style="color:${scoreColor}">${score}%</div>
      </div>
      <div class="results-title">${passed ? 'ğŸ‰ Well done!' : 'ğŸ’ª Keep Practising!'}</div>
      <div class="results-sub">${passed ? `You scored in the top tier! You've earned a skill badge for ${a.title}.` : `You scored ${score}%. Score 70%+ to earn your badge. Review the explanations and try again.`}</div>
      <div class="results-breakdown">
        <div class="rb-item"><div class="rb-val" style="color:var(--green)">${correct}</div><div class="rb-label">Correct</div></div>
        <div class="rb-item"><div class="rb-val" style="color:var(--accent)">${a.qs.length-correct}</div><div class="rb-label">Incorrect</div></div>
        <div class="rb-item"><div class="rb-val" style="color:var(--yellow)">${state.xp}</div><div class="rb-label">Total XP</div></div>
      </div>
      ${passed ? `<div class="cert-banner"><div class="cert-icon">ğŸ…</div><div class="cert-info"><h4>${a.icon} ${a.title} â€” Skill Badge</h4><p>Add this to your LinkedIn profile to showcase your verified skill.</p></div></div>` : ''}
      <div style="display:flex;gap:1rem;justify-content:center;flex-wrap:wrap">
        <button class="btn-primary" onclick="startAssessment('${a.id}')">Retake Assessment</button>
        <button class="btn-ghost" onclick="showView('assessment-select')">Browse Assessments</button>
        ${!passed ? `<button class="btn-ghost" onclick="openCourse('${a.id.replace('-assess','')}')">Study the Course â†’</button>` : ''}
      </div>
    </div>`;
}

function startTimer() {
  clearInterval(state.quizTimer);
  state.quizTimer = setInterval(() => {
    state.quizTimeLeft--;
    const el = document.getElementById('timerDisplay');
    if (el) el.textContent = formatTime(state.quizTimeLeft);
    const timerEl = document.getElementById('quizTimerEl');
    if (state.quizTimeLeft <= 60 && timerEl) timerEl.classList.add('urgent');
    if (state.quizTimeLeft <= 0) { clearInterval(state.quizTimer); finishAssessment(); }
  }, 1000);
}

function formatTime(s) {
  const m = Math.floor(s/60);
  return `${m}:${String(s%60).padStart(2,'0')}`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// AI INTERVIEW
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const iS = state.interviewState;

function selectRole(el,role){document.querySelectorAll('.role-chip').forEach(c=>c.classList.remove('active'));el.classList.add('active');iS.role=role}
function selectDiff(el,diff,cls){document.querySelectorAll('.diff-btn').forEach(b=>b.classList.remove('active','easy','medium','hard'));el.classList.add('active',cls);iS.difficulty=diff;iS.diffClass=cls}
function selectType(el,type){document.querySelectorAll('.type-opt').forEach(t=>t.classList.remove('active'));el.classList.add('active');iS.type=type}
function autoResize(el){el.style.height='auto';el.style.height=Math.min(el.scrollHeight,120)+'px'}
function handleKey(e){if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();sendAnswer()}}
function scrollMsgsToBottom(){const a=document.getElementById('messagesArea');if(a)a.scrollTop=a.scrollHeight}

function addMsg(role,content,isFb=false){
  const area=document.getElementById('messagesArea');
  const welcome=document.getElementById('welcomeState');
  if(welcome)welcome.remove();
  const msg=document.createElement('div');
  msg.className='msg '+(role==='ai'?'ai':role==='feedback'?'feedback':'user');
  if(role==='feedback'){msg.innerHTML=`<div class="msg-bubble"><div class="feedback-header">ğŸ“Š Feedback</div>${content}</div>`}
  else{const av=role==='ai'?'ğŸ¤–':'ME';msg.innerHTML=`<div class="msg-av">${av}</div><div class="msg-bubble">${content.replace(/\n/g,'<br>')}</div>`}
  area.appendChild(msg);scrollMsgsToBottom()
}

function showTyping(){
  const area=document.getElementById('messagesArea');
  const welcome=document.getElementById('welcomeState');
  if(welcome)welcome.remove();
  const t=document.createElement('div');t.className='typing-indicator';t.id='typingIndicator';
  t.innerHTML=`<div class="msg-av" style="background:linear-gradient(135deg,var(--yellow),var(--accent));color:#000;width:30px;height:30px;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0">ğŸ¤–</div><div class="typing-dots"><span></span><span></span><span></span></div>`;
  area.appendChild(t);scrollMsgsToBottom()
}
function hideTyping(){const t=document.getElementById('typingIndicator');if(t)t.remove()}

function setInterviewLoading(loading){
  iS.loading=loading;
  const sb=document.getElementById('sendBtn'),ai=document.getElementById('answerInput');
  if(sb)sb.disabled=loading||!iS.awaitingAnswer;
  if(ai)ai.disabled=loading||!iS.awaitingAnswer;
  const st=document.getElementById('aiStatus');
  if(st)st.textContent=loading?'Thinkingâ€¦':'Listeningâ€¦';
  if(loading)showTyping();else hideTyping()
}

async function callClaude(system,messages){
  const r=await fetch('https://api.anthropic.com/v1/messages',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({model:'claude-sonnet-4-20250514',max_tokens:1000,system,messages})});
  const d=await r.json();return d.content?.[0]?.text||'Sorry, I had trouble responding.';
}

function buildInterviewSystem(){
  const tl={technical:'technical/coding',behavioral:'behavioral (STAR method)',system_design:'system design'}[iS.type];
  return `You are Alex, a professional and friendly technical interviewer at a top tech company. You are conducting a ${tl} interview for a ${iS.role} position at ${iS.difficulty} difficulty.
RULES:
1. Ask ONE question at a time. Number each question (e.g. "Question 1:").
2. After the candidate answers, give structured feedback in this EXACT format:
   FEEDBACK_START
   [2-3 sentence feedback]
   STRENGTHS: [comma-separated, max 3]
   IMPROVE: [comma-separated, max 2]
   SCORE: [1-10]
   FEEDBACK_END
   Then ask the next question or give a final summary.
3. Keep questions at ${iS.difficulty} difficulty.
4. Be encouraging but honest.
5. After exactly 5 questions + feedback cycles, give a comprehensive final summary.`;
}

async function startInterview(){
  iS.active=true;iS.questionNum=0;iS.history=[];iS.awaitingAnswer=false;
  const sb=document.getElementById('startBtn');if(sb)sb.disabled=true;
  const badge=document.getElementById('sessionBadge');if(badge)badge.classList.add('visible');
  const rb=document.getElementById('resetBtn');if(rb)rb.style.display='block';
  setInterviewLoading(true);
  try{
    const intro=await callClaude(buildInterviewSystem(),[{role:'user',content:'Please start the interview.'}]);
    iS.history.push({role:'user',content:'Please start the interview.'});
    iS.history.push({role:'assistant',content:intro});
    iS.questionNum=1;updateInterviewProgress();addMsg('ai',intro);iS.awaitingAnswer=true;
  }catch(e){addMsg('ai','âš ï¸ Connection error. Please try again.')}
  setInterviewLoading(false);
  const inp=document.getElementById('answerInput');
  if(inp){inp.placeholder='Type your answer hereâ€¦';inp.focus()}
}

function updateInterviewProgress(){
  const pf=document.getElementById('progressFill');if(pf)pf.style.width=(iS.questionNum/5*100)+'%';
  const sb=document.getElementById('sessionBadge');if(sb)sb.textContent=`Q ${iS.questionNum} / 5`;
}

async function sendAnswer(){
  const inp=document.getElementById('answerInput');
  const answer=inp?.value.trim();
  if(!answer||iS.loading||!iS.awaitingAnswer)return;
  inp.value='';inp.style.height='auto';
  addMsg('user',answer);iS.history.push({role:'user',content:answer});iS.awaitingAnswer=false;
  setInterviewLoading(true);
  try{
    const reply=await callClaude(buildInterviewSystem(),iS.history);
    iS.history.push({role:'assistant',content:reply});
    const fbMatch=reply.match(/FEEDBACK_START([\s\S]*?)FEEDBACK_END/);
    if(fbMatch){
      const inner=fbMatch[1].trim();
      const sm=inner.match(/STRENGTHS:\s*([^\n]+)/),im=inner.match(/IMPROVE:\s*([^\n]+)/),scm=inner.match(/SCORE:\s*(\d+)/);
      const body=inner.replace(/STRENGTHS:[^\n]+/,'').replace(/IMPROVE:[^\n]+/,'').replace(/SCORE:[^\n]+/,'').trim();
      let html=`<div style="font-size:0.86rem;line-height:1.65;margin-bottom:0.7rem">${body.replace(/\n/g,'<br>')}</div>`;
      if(scm){const sc=parseInt(scm[1]),sc2=sc>=8?'var(--green)':sc>=5?'var(--yellow)':'var(--accent)';html+=`<div style="font-size:0.78rem;color:var(--muted);margin-bottom:0.4rem">Score: <strong style="color:${sc2};font-family:'Syne',sans-serif;font-size:0.95rem">${sc}/10</strong></div>`}
      html+='<div class="score-pills">';
      if(sm)sm[1].split(',').forEach(s=>s.trim()&&(html+=`<span class="score-pill good">âœ“ ${s.trim()}</span>`));
      if(im)im[1].split(',').forEach(s=>s.trim()&&(html+=`<span class="score-pill improve">â†‘ ${s.trim()}</span>`));
      html+='</div>';
      addMsg('feedback',html);updateXP(25);
      const after=reply.replace(/FEEDBACK_START[\s\S]*?FEEDBACK_END/,'').trim();
      if(after){setTimeout(()=>{if(iS.questionNum<5){iS.questionNum++;updateInterviewProgress()}addMsg('ai',after);iS.awaitingAnswer=true;setInterviewLoading(false);inp?.focus()},600);return}
    }else{if(iS.questionNum<5){iS.questionNum++;updateInterviewProgress()}addMsg('ai',reply);iS.awaitingAnswer=true}
  }catch(e){addMsg('ai','âš ï¸ Connection error. Please try again.');iS.awaitingAnswer=true}
  setInterviewLoading(false);inp?.focus()
}

function resetInterview(){
  iS.active=false;iS.awaitingAnswer=false;iS.history=[];iS.questionNum=0;
  const pf=document.getElementById('progressFill');if(pf)pf.style.width='0%';
  const sb=document.getElementById('sessionBadge');if(sb)sb.classList.remove('visible');
  const rb=document.getElementById('resetBtn');if(rb)rb.style.display='none';
  const startb=document.getElementById('startBtn');if(startb)startb.disabled=false;
  const st=document.getElementById('aiStatus');if(st)st.textContent='Ready to start';
  const inp=document.getElementById('answerInput');
  if(inp){inp.disabled=true;inp.placeholder='Start the interview to begin answeringâ€¦'}
  const sb2=document.getElementById('sendBtn');if(sb2)sb2.disabled=true;
  const area=document.getElementById('messagesArea');
  if(area)area.innerHTML=`<div class="welcome-state" id="welcomeState"><div class="big-icon">ğŸ™ï¸</div><h3>Your AI interviewer is ready</h3><p>Configure your session, then hit <strong>Start Interview</strong> to begin.</p></div>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INTERVIEW QUESTIONS â€” PREMIUM DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function freqDots(n) {
  let s = '<div class="iq-freq">';
  for(let i=1;i<=5;i++) s+=`<div class="freq-dot${i<=n?' lit':''}"></div>`;
  const labels=['','Rare','Uncommon','Common','Very Common','Must Know'];
  s+=`<span class="freq-label">${labels[n]||''}</span></div>`;
  return s;
}
function coTags(arr){
  const map={google:'co-google',meta:'co-meta',amazon:'co-amazon',microsoft:'co-microsoft',netflix:'co-netflix',apple:'co-apple'};
  return arr.map(c=>`<span class="co-tag ${map[c]||''}">${c.toUpperCase()}</span>`).join('');
}

const IQ_ALL = {
  python:[
    {must:true,freq:5,cos:['google','meta','amazon'],q:"What is the difference between a list and a tuple?",tags:['theory','easy'],
     a:`<p><strong>List</strong>: Mutable, defined with <code>[]</code>. You can add, remove, or change elements.</p><p><strong>Tuple</strong>: Immutable, defined with <code>()</code>. Faster, can be used as dict keys, less memory.</p><pre>my_list = [1, 2, 3]
my_tuple = (1, 2, 3)
my_list[0] = 99     # âœ… works
# my_tuple[0] = 99  # âŒ TypeError</pre><p>Use tuples for fixed data (coordinates, RGB), lists for collections that change.</p>`},
    {must:true,freq:5,cos:['google','meta','amazon','microsoft'],q:"Explain Python's GIL. What is it and why does it matter?",tags:['theory','hard'],
     a:`<p>The <strong>GIL</strong> (Global Interpreter Lock) is a mutex in CPython that allows only one thread to execute Python bytecode at a time â€” even on multi-core machines.</p><p><strong>Why it exists:</strong> Python's memory management uses reference counting, which isn't thread-safe without the GIL.</p><p><strong>Impact:</strong> CPU-bound threads won't parallelize; I/O-bound code is mostly unaffected (GIL released during I/O).</p><p><strong>Workarounds:</strong> Use <code>multiprocessing</code> (separate processes, each with own GIL) or <code>asyncio</code> for async I/O.</p>`},
    {must:true,freq:5,cos:['google','amazon','netflix'],q:"What are Python decorators? Write one from scratch.",tags:['tech','medium'],
     a:`<p>A <strong>decorator</strong> wraps a function to extend or modify its behaviour without changing its source.</p><pre>import functools, time

def timer(func):
    @functools.wraps(func)
    def wrapper(*args, **kwargs):
        start = time.perf_counter()
        result = func(*args, **kwargs)
        elapsed = time.perf_counter() - start
        print(f"{func.__name__!r} ran in {elapsed:.4f}s")
        return result
    return wrapper

@timer
def slow_add(a, b):
    time.sleep(0.1)
    return a + b</pre><p>Real-world uses: <code>@login_required</code> (Django), <code>@app.route()</code> (Flask), <code>@lru_cache</code>.</p>`},
    {must:true,freq:5,cos:['amazon','microsoft'],q:"What is the difference between deep copy and shallow copy?",tags:['theory','medium'],
     a:`<pre>import copy
original = {'a': [1, 2, 3], 'b': [4, 5]}
shallow = copy.copy(original)      # new dict, same list objects inside
deep    = copy.deepcopy(original)  # entirely new dict AND new lists

original['a'][0] = 999
print(shallow['a'])  # [999, 2, 3] â† AFFECTED
print(deep['a'])     # [1, 2, 3]   â† SAFE</pre><p><strong>Rule:</strong> Use deep copy for independent clones of nested/mutable data.</p>`},
    {must:true,freq:4,cos:['google','meta'],q:"Explain Python generators and their benefits.",tags:['tech','medium'],
     a:`<p>Generators use <code>yield</code> to produce values one at a time â€” lazy evaluation, memory-efficient.</p><pre>def fibonacci():
    a, b = 0, 1
    while True:
        yield a
        a, b = b, a + b

fib = fibonacci()
print([next(fib) for _ in range(8)])  # [0, 1, 1, 2, 3, 5, 8, 13]

# Memory advantage:
# [x**2 for x in range(10**9)]   â†’ crashes (list in memory)
# (x**2 for x in range(10**9))   â†’ works fine (lazy generator)</pre>`},
    {freq:4,cos:['amazon','microsoft'],q:"What are *args and **kwargs?",tags:['tech','easy'],
     a:`<pre>def build_url(base, *paths, **params):
    url = base + '/' + '/'.join(paths)
    if params:
        url += '?' + '&'.join(f'{k}={v}' for k,v in params.items())
    return url

build_url('https://api.example.com', 'users', '123',
          format='json', version='v2')
# 'https://api.example.com/users/123?format=json&version=v2'</pre><p><code>*args</code> collects positional arguments as a tuple. <code>**kwargs</code> collects keyword arguments as a dict.</p>`},
    {freq:4,cos:['meta','amazon'],q:"What are list comprehensions and dict comprehensions?",tags:['tech','easy'],
     a:`<pre>squares = [x**2 for x in range(10) if x % 2 == 0]   # [0,4,16,36,64]

word_lengths = {word: len(word) for word in ['python','java','rust']}

unique_chars = {c.lower() for c in 'Hello World' if c != ' '}

flat = [x for row in [[1,2],[3,4],[5,6]] for x in row]  # [1,2,3,4,5,6]</pre>`},
    {freq:4,cos:['google','amazon'],q:"Explain OOP in Python: inheritance, encapsulation, polymorphism.",tags:['theory','medium'],
     a:`<pre>class Animal:
    def __init__(self, name):
        self.__name = name        # Private (encapsulation)
    def get_name(self): return self.__name
    def speak(self):    raise NotImplementedError

class Dog(Animal):               # Inheritance
    def speak(self): return f"{self.get_name()} says: Woof!"

class Cat(Animal):               # Polymorphism
    def speak(self): return f"{self.get_name()} says: Meow!"

for a in [Dog("Rex"), Cat("Luna")]:
    print(a.speak())   # same interface, different behavior</pre>`},
    {freq:5,cos:['amazon','microsoft','meta'],q:"What is the difference between '==' and 'is' in Python?",tags:['theory','easy'],
     a:`<pre>a = [1, 2, 3]; b = [1, 2, 3]; c = a
a == b  # True  â€” same VALUES (equality)
a is b  # False â€” different OBJECTS (identity)
a is c  # True  â€” same object

# Python caches small ints (-5 to 256):
x = 256; y = 256; x is y   # True  â† cached
x = 257; y = 257; x is y   # False â† new objects

# Rule: use 'is' for None/True/False, '==' for values</pre>`},
    {freq:4,cos:['google','netflix'],q:"What is a context manager and how does 'with' work?",tags:['tech','medium'],
     a:`<pre>with open('data.txt', 'r') as f:
    content = f.read()  # auto-closed even on exception

class ManagedDB:
    def __enter__(self):
        self.conn = connect_to_db(); return self.conn
    def __exit__(self, exc_type, exc_val, exc_tb):
        self.conn.close(); return False

from contextlib import contextmanager
@contextmanager
def timer():
    import time; start = time.time()
    yield
    print(f"Elapsed: {time.time()-start:.2f}s")</pre>`},
    {freq:3,cos:['google','amazon'],q:"What are Python's dunder (magic) methods? Give examples.",tags:['theory','medium'],
     a:`<pre>class Money:
    def __init__(self, amount): self.amount = amount
    def __repr__(self): return f"Money({self.amount})"
    def __str__(self):  return f"\${self.amount:.2f}"
    def __add__(self, other): return Money(self.amount + other.amount)
    def __lt__(self, other):  return self.amount < other.amount
    def __len__(self):        return int(self.amount)

m1, m2 = Money(10), Money(25)
print(m1 + m2)  # $35.00
print(m1 < m2)  # True</pre>`},
    {freq:4,cos:['amazon','microsoft'],q:"Explain mutable vs immutable in Python with examples.",tags:['theory','easy'],
     a:`<p><strong>Immutable:</strong> <code>int, float, str, tuple, frozenset, bytes</code><br><strong>Mutable:</strong> <code>list, dict, set, bytearray</code></p><pre>s = "hello"
# s[0] = "H"  âŒ TypeError â€” strings immutable
s = s[0].upper() + s[1:]  # âœ… creates new string

lst = [1, 2, 3]
lst[0] = 99     # âœ… in-place change
lst.append(4)   # âœ… in-place

def bad(lst): lst.append(99)   # mutates caller's list!
def safe(lst): return lst + [99]  # creates new list</pre>`},
    {freq:3,cos:['meta','amazon'],q:"What is the difference between @classmethod and @staticmethod?",tags:['theory','medium'],
     a:`<pre>class User:
    total_users = 0
    def __init__(self, name, email):
        self.name = name; self.email = email; User.total_users += 1

    @classmethod
    def from_dict(cls, data):           # Alternative constructor â€” gets cls
        return cls(data['name'], data['email'])

    @classmethod
    def get_count(cls): return cls.total_users

    @staticmethod
    def validate_email(email):          # No cls or self â€” pure utility
        return '@' in email and '.' in email.split('@')[1]</pre>`},
    {freq:4,cos:['amazon','google'],q:"What are lambda functions and when should you use them?",tags:['tech','easy'],
     a:`<pre>double = lambda x: x * 2

nums = [3, 1, 4, 1, 5, 9]
sorted(nums, key=lambda x: -x)          # descending
filter(lambda x: x%2==0, nums)          # evens
map(lambda x: x**2, nums)               # squares

people = [{'name':'Bob','age':30},{'name':'Alice','age':25}]
sorted(people, key=lambda p: p['age'])  # sort by age

# âš ï¸ For complex logic, use named def instead of lambda</pre>`},
    {freq:3,cos:['google','amazon'],q:"How does Python's memory management and GC work?",tags:['theory','hard'],
     a:`<p><strong>Three mechanisms:</strong></p><ul><li><strong>Reference counting:</strong> Every object tracks how many names point to it. When count â†’ 0, freed immediately.</li><li><strong>Cyclic GC:</strong> Handles circular references (A â†’ B â†’ A). The <code>gc</code> module manages this.</li><li><strong>Memory pools (pymalloc):</strong> Custom allocator for small objects (â‰¤ 512 bytes) â€” avoids frequent OS malloc calls.</li></ul>`},
    {freq:3,cos:['google','netflix'],q:"Explain Python type hints and why they matter.",tags:['theory','medium'],
     a:`<pre>from typing import Optional, List, Dict, Callable

def process(
    items: List[int],
    callback: Callable[[int], bool],
    config: Optional[Dict[str, str]] = None
) -> List[int]:
    return [x for x in items if callback(x)]

# Python 3.10+ union syntax:
def parse(value: int | str | None) -> str: ...

# Benefits: IDE autocompletion, self-documenting code,
# static analysis with mypy/pyright, runtime checking with pydantic</pre>`},
    {freq:3,cos:['amazon','microsoft'],q:"Explain threading vs multiprocessing vs asyncio in Python.",tags:['theory','hard'],
     a:`<p><strong>threading</strong>: Best for I/O-bound; limited by GIL for CPU-bound tasks; shared memory.<br><strong>multiprocessing</strong>: Best for CPU-bound; each process has own GIL; separate memory.<br><strong>asyncio</strong>: Best for high-concurrency I/O; single thread; event loop; cooperative multitasking.<br><strong>Rule:</strong> asyncio for thousands of network calls; multiprocessing for heavy CPU; threading rarely best choice in Python.</p>`},
    {freq:4,cos:['amazon','microsoft'],q:"What is a Python virtual environment and why is it essential?",tags:['theory','easy'],
     a:`<pre>python -m venv .venv
source .venv/bin/activate      # macOS/Linux
.venv\Scripts\activate          # Windows

pip install requests pandas
pip freeze > requirements.txt

# On another machine:
pip install -r requirements.txt</pre><p><strong>Why:</strong> Prevents dependency conflicts â€” Project A needs Django 3, Project B needs Django 4. Always commit <code>requirements.txt</code>, never commit <code>.venv</code>.</p>`},
    {freq:2,cos:['google','amazon'],q:"What are Python dataclasses?",tags:['tech','medium'],
     a:`<pre>from dataclasses import dataclass, field
from typing import List

@dataclass
class Product:
    name: str
    price: float
    tags: List[str] = field(default_factory=list)

    def discounted(self, pct: float) -> float:
        return self.price * (1 - pct/100)

p = Product("Laptop", 999.99, ["electronics"])
print(p)           # Product(name='Laptop', price=999.99, tags=[...])
# Auto-generates __init__, __repr__, __eq__</pre>`},
    {freq:4,cos:['amazon','google'],q:"How do you handle exceptions properly in Python?",tags:['tech','medium'],
     a:`<pre>class InsufficientFunds(Exception):
    def __init__(self, amount, balance):
        super().__init__(f"Need {amount}, have {balance}")

def withdraw(balance, amount):
    try:
        if amount > balance: raise InsufficientFunds(amount, balance)
        return balance - amount
    except InsufficientFunds as e:
        print(f"Failed: {e}"); return balance
    except (TypeError, ValueError):
        print("Invalid input"); return balance
    else:
        print("Success")       # runs only if no exception
    finally:
        print("Transaction logged")  # always runs</pre>`},
    {freq:3,cos:['google','amazon'],q:"Explain Python's unpacking and starred expressions.",tags:['tech','medium'],
     a:`<pre>first, *rest = [1, 2, 3, 4, 5]   # first=1, rest=[2,3,4,5]
*head, last = [1, 2, 3, 4, 5]    # head=[1,2,3,4], last=5
a, *mid, z = [1,2,3,4,5]         # a=1, mid=[2,3,4], z=5

x, y = y, x   # swap without temp variable

def greet(name, age): ...
greet(*('Alice', 25))           # positional unpacking
greet(**{'name': 'Alice', 'age': 25})  # keyword unpacking

merged = {**dict1, **dict2, 'extra': 'val'}  # merge dicts</pre>`},
    {freq:3,cos:['google'],q:"What is monkey patching? Is it ever acceptable?",tags:['theory','hard'],
     a:`<pre>from unittest.mock import patch
import datetime

# Raw monkey patching (fragile):
datetime.datetime.now = lambda: datetime.datetime(2025, 1, 1, 12, 0, 0)

# Preferred: mock.patch (safe, auto-restores)
with patch('datetime.datetime.now', return_value=fixed_time):
    result = my_func_that_uses_now()</pre><p><strong>When OK:</strong> Test mocking (via mock.patch), fixing bugs in third-party libs you can't modify.<br><strong>Risks:</strong> Silent failures, hard to debug. Always prefer <code>unittest.mock</code>.</p>`},
    {freq:2,cos:['google'],q:"What are Python abstract base classes and the abc module?",tags:['theory','hard'],
     a:`<pre>from abc import ABC, abstractmethod

class Shape(ABC):
    @abstractmethod
    def area(self) -> float: ...

    @abstractmethod
    def perimeter(self) -> float: ...

    def describe(self):   # concrete method
        return f"Area: {self.area():.2f}"

class Circle(Shape):
    def __init__(self, r): self.r = r
    def area(self): return 3.14159 * self.r**2
    def perimeter(self): return 2 * 3.14159 * self.r

# Shape()    âŒ TypeError: Can't instantiate abstract class
Circle(5).describe()  # âœ… "Area: 78.54"</pre>`},
    {freq:3,cos:['google','netflix'],q:"How does functools.lru_cache work?",tags:['tech','medium'],
     a:`<pre>from functools import lru_cache, cache

@lru_cache(maxsize=128)
def fibonacci(n):
    if n < 2: return n
    return fibonacci(n-1) + fibonacci(n-2)

fibonacci(50)              # instant â€” all subresults cached
fibonacci.cache_info()     # CacheInfo(hits=48, misses=51, ...)
fibonacci.cache_clear()    # manual reset

# Python 3.9+: @cache (unbounded, slightly faster)
@cache
def expensive(user_id): ...

# âš ï¸ Arguments must be hashable (no lists, dicts)</pre>`},
    {freq:3,cos:['amazon'],q:"What is pickling and when would you use it?",tags:['theory','medium'],
     a:`<pre>import pickle

data = {'model': 'LinearRegression', 'weights': [0.1, 0.5, 0.9]}

with open('model.pkl', 'wb') as f:
    pickle.dump(data, f)

with open('model.pkl', 'rb') as f:
    loaded = pickle.load(f)

# âš ï¸ SECURITY: Never unpickle data from untrusted sources!
# Alternatives: json (safe), msgpack, protobuf</pre>`},
    {freq:4,cos:['amazon','microsoft'],q:"What are Python iterators vs iterables?",tags:['theory','medium'],
     a:`<pre># ITERABLE: has __iter__() â€” can use in for loop
# ITERATOR: has __iter__() + __next__() â€” produces one value at a time

lst = [1, 2, 3]       # Iterable (not yet an iterator)
it = iter(lst)         # Iterator â€” call iter() on an iterable
next(it)  # 1; next(it)  # 2; next(it)  # 3

# Custom iterator:
class Countdown:
    def __init__(self, n): self.n = n
    def __iter__(self): return self
    def __next__(self):
        if self.n <= 0: raise StopIteration
        self.n -= 1; return self.n + 1</pre>`},
    {freq:3,cos:['google','amazon'],q:"What are Python's f-strings and advanced formatting?",tags:['tech','easy'],
     a:`<pre>name, price, pi = "Widget", 9.99, 3.14159265
f"Price: \${price:.2f}"            # $9.99
f"PI: {pi:.4f}"                   # 3.1416
f"Padded: {name:>15}"             # right-align 15 chars
f"Binary: {255:08b}"              # 11111111
f"Thousands: {1_000_000:,}"       # 1,000,000
f"Scientific: {0.0001:.2e}"       # 1.00e-04

# Self-documenting (Python 3.8+):
x = 42; f"{x = }"  # x = 42 (great for debugging!)</pre>`},
    {freq:4,cos:['amazon','google'],q:"How do you write Pythonic code? What is PEP 8?",tags:['theory','easy'],
     a:`<p><strong>PEP 8</strong>: 4 spaces indent, max 79 chars/line, snake_case for vars/functions, PascalCase for classes, UPPER_CASE for constants.</p><pre># Un-Pythonic vs Pythonic:
if len(lst) > 0:      â†’  if lst:
if x == True:         â†’  if x:
range(len(lst)) [i]   â†’  for item in lst:
result = None
if c: result = x      â†’  result = x if c else None</pre>`},
  ],

  javascript:[
    {must:true,freq:5,cos:['google','meta','amazon'],q:"What is a closure? Give a real-world example.",tags:['tech','hard'],
     a:`<p>A closure is a function that retains access to its outer scope even after the outer function has returned.</p><pre>function createCounter(initial = 0) {
    let count = initial;  // private variable

    return {
        increment: () => ++count,
        decrement: () => --count,
        reset:     () => { count = initial; },
        value:     () => count,
    };
}

const counter = createCounter(10);
counter.increment(); // 11
counter.value();     // 11</pre><p><strong>Classic trap â€” loop + setTimeout:</strong></p><pre>for (var i = 0; i < 3; i++) {
    setTimeout(() => console.log(i), 100);  // 3, 3, 3 âŒ
}
for (let i = 0; i < 3; i++) {
    setTimeout(() => console.log(i), 100);  // 0, 1, 2 âœ…
}</pre>`},
    {must:true,freq:5,cos:['google','meta','netflix'],q:"Explain the JavaScript Event Loop step by step.",tags:['theory','hard'],
     a:`<pre>console.log('1 - sync');
setTimeout(() => console.log('4 - macrotask'), 0);
Promise.resolve()
    .then(() => console.log('3 - microtask 1'))
    .then(() => console.log('3b - microtask 2'));
console.log('2 - sync');
// Output: 1 â†’ 2 â†’ 3 â†’ 3b â†’ 4</pre><p><strong>Execution order:</strong></p><ol><li>Synchronous code (Call Stack)</li><li>Microtask queue â€” drained completely (Promises, queueMicrotask)</li><li>One macrotask (setTimeout, setInterval, I/O), then back to microtasks</li></ol>`},
    {must:true,freq:5,cos:['google','meta','amazon','microsoft'],q:"What are var, let, and const? Explain hoisting and TDZ.",tags:['theory','medium'],
     a:`<pre>console.log(x); // undefined â€” var hoisted + initialized
var x = 5;

console.log(y); // âŒ ReferenceError â€” TDZ (Temporal Dead Zone)
let y = 10;

const OBJ = { a: 1 };
OBJ.a = 2;    // âœ… contents can mutate
// OBJ = {};  // âŒ reassignment not allowed

{
    let inner = 'block'; var outer = 'function';
}
console.log(outer); // âœ…
// console.log(inner);  // âŒ ReferenceError</pre>`},
    {must:true,freq:5,cos:['amazon','microsoft','netflix'],q:"What is 'this'? Explain all 4 binding rules.",tags:['theory','hard'],
     a:`<pre>// 1. Default: global (or undefined in strict mode)
function show() { console.log(this); }

// 2. Implicit: calling object
const obj = { name: 'Alex', greet() { return this.name; } };
obj.greet();  // 'Alex'

// 3. Explicit: call, apply, bind
function hello(greeting) { return this.name; }
hello.call({name:'Bob'});
const sayHi = hello.bind({name:'Bob'});

// 4. new: constructor creates new object
function Person(name) { this.name = name; }
new Person('Carol');

// Arrow functions: inherit 'this' from enclosing scope (lexical)
const timer = { id: 42, start() {
    setTimeout(() => console.log(this.id), 100);  // 42 âœ…
}};</pre>`},
    {must:true,freq:5,cos:['google','meta'],q:"Explain Promises and async/await. What is Promise.all?",tags:['tech','medium'],
     a:`<pre>async function fetchUser(id) {
    try {
        const res  = await fetch('/api/users/' + id);
        if (!res.ok) throw new Error('HTTP ' + res.status);
        return await res.json();
    } catch (err) {
        console.error('Failed:', err.message);
        throw err;
    }
}

// Promise.all â€” parallel, fails fast if any fails
const [users, posts] = await Promise.all([
    fetch('/api/users').then(r => r.json()),
    fetch('/api/posts').then(r => r.json()),
]);

// Promise.allSettled â€” all results regardless of failures
const results = await Promise.allSettled([p1, p2, p3]);
results.forEach(r => console.log(r.status, r.value ?? r.reason));</pre>`},
    {freq:4,cos:['amazon','microsoft'],q:"What is event delegation and why is it important?",tags:['tech','medium'],
     a:`<pre>// âŒ Naive: 1 listener per item
document.querySelectorAll('li').forEach(li => li.addEventListener('click', fn));

// âœ… Delegation: 1 listener on parent, events bubble up
document.getElementById('menu').addEventListener('click', (e) => {
    const item = e.target.closest('[data-action]');
    if (!item) return;
    const action = item.dataset.action;
    if (action === 'delete') deleteItem(item.dataset.id);
});
// Works for dynamically added items too!
// e.stopPropagation() â€” stops bubbling
// e.preventDefault() â€” stops default browser behavior</pre>`},
    {freq:4,cos:['google','meta'],q:"Implement debounce and throttle from scratch.",tags:['tech','hard'],
     a:`<pre>// DEBOUNCE: wait N ms after LAST call â€” for search input
function debounce(fn, delay) {
    let timer;
    return function(...args) {
        clearTimeout(timer);
        timer = setTimeout(() => fn.apply(this, args), delay);
    };
}
const onSearch = debounce((q) => fetch('/search?q=' + q), 300);
input.addEventListener('input', e => onSearch(e.target.value));

// THROTTLE: execute at most once per N ms â€” for scroll/resize
function throttle(fn, limit) {
    let lastCall = 0;
    return function(...args) {
        const now = Date.now();
        if (now - lastCall >= limit) {
            lastCall = now;
            return fn.apply(this, args);
        }
    };
}
window.addEventListener('scroll', throttle(updateScrollBar, 16));</pre>`},
    {freq:4,cos:['amazon','microsoft'],q:"What is prototypal inheritance? How does the prototype chain work?",tags:['theory','hard'],
     a:`<pre>const animal = { breathe() { return this.name + ' breathes'; } };
const dog = Object.create(animal);  // dog's [[Prototype]] = animal
dog.name = 'Rex';
dog.bark = function() { return this.name + ' barks!'; };

dog.bark();     // found on dog directly
dog.breathe();  // NOT on dog â†’ up prototype chain â†’ found on animal

// Class syntax is syntactic sugar:
class Animal { breathe() {...} }
class Dog extends Animal { bark() {...} }
// Same chain underneath!

Object.getPrototypeOf(dog) === animal  // true
dog.hasOwnProperty('bark')   // true â€” own property
dog.hasOwnProperty('breathe') // false â€” inherited</pre>`},
    {freq:4,cos:['meta','amazon'],q:"Explain the spread operator, rest parameters, and destructuring.",tags:['tech','easy'],
     a:`<pre>const arr1 = [1,2,3]; const arr2 = [4,5,6];
const merged = [...arr1, ...arr2];            // [1,2,3,4,5,6]
const copy = {...originalObj, extra: 'val'}; // shallow copy + add

const [first, second, ...rest] = [1,2,3,4,5];  // rest=[3,4,5]
const {a, b, ...others} = {a:1, b:2, c:3, d:4}; // others={c:3,d:4}

function sum(first, ...nums) { return nums.reduce((t,n)=>t+n, first); }

// Destructuring with defaults and rename:
const {name: userName = 'Anonymous', age: userAge = 0} = user;</pre>`},
    {freq:4,cos:['amazon','microsoft'],q:"What are higher-order functions? Implement map, filter, reduce.",tags:['tech','medium'],
     a:`<pre>Array.prototype.myMap = function(callback) {
    const result = [];
    for (let i = 0; i < this.length; i++)
        result.push(callback(this[i], i, this));
    return result;
};
Array.prototype.myFilter = function(callback) {
    const result = [];
    for (const item of this) if (callback(item)) result.push(item);
    return result;
};
Array.prototype.myReduce = function(callback, initial) {
    let acc = initial ?? this[0];
    const start = initial !== undefined ? 0 : 1;
    for (let i = start; i < this.length; i++) acc = callback(acc, this[i], i, this);
    return acc;
};
[1,2,3,4].myMap(x => x*2)          // [2,4,6,8]
[1,2,3,4].myFilter(x => x%2===0)   // [2,4]
[1,2,3,4].myReduce((a,b) => a+b)   // 10</pre>`},
    {freq:3,cos:['amazon','meta'],q:"Explain optional chaining ?. and nullish coalescing ??.",tags:['tech','easy'],
     a:`<pre>const user = { profile: { name: 'Alex', address: null } };

user?.profile?.name           // 'Alex'
user?.profile?.address?.city  // undefined (no error!)
user?.greet?.()               // undefined if greet missing

// ?? â€” default ONLY for null/undefined (not 0, '', false)
const name  = user.name   ?? 'Anonymous';
const count = user.count  ?? 0;     // 0 if null/undefined, NOT if 0

// vs || which catches ALL falsy (0, '', false too):
const count2 = user.count || 0;   // 0 even if user.count === 0 â† bug!

// Logical assignment:
user.name ??= 'Guest';  // assign only if null/undefined</pre>`},
    {freq:3,cos:['google','netflix'],q:"What is memoization? Implement it in JavaScript.",tags:['tech','medium'],
     a:`<pre>function memoize(fn) {
    const cache = new Map();
    return function(...args) {
        const key = JSON.stringify(args);
        if (cache.has(key)) return cache.get(key);
        const result = fn.apply(this, args);
        cache.set(key, result);
        return result;
    };
}

const expensiveFib = memoize(function fib(n) {
    if (n <= 1) return n;
    return expensiveFib(n-1) + expensiveFib(n-2);
});
expensiveFib(40);  // computed once, then cached
// React.memo, useMemo, useCallback all use this pattern</pre>`},
    {freq:3,cos:['google'],q:"What is the difference between == and === in JavaScript?",tags:['theory','easy'],
     a:`<pre>// == loose equality: TYPE COERCION before comparing
0 == false    // true  (false â†’ 0)
1 == '1'      // true  ('1' â†’ 1)
null == undefined  // true (special rule)

// === strict equality: NO coercion
0 === false   // false
1 === '1'     // false

// NaN is never equal to itself:
NaN == NaN    // false â†’ use Number.isNaN()
NaN === NaN   // false

// Rule: ALWAYS use ===
// Only valid == use: value == null checks both null and undefined</pre>`},
    {freq:4,cos:['amazon','meta'],q:"How do you deep clone an object in JavaScript?",tags:['tech','medium'],
     a:`<pre>// structuredClone â€” modern, recommended (handles circular refs!)
const clone = structuredClone(original);
// âœ… Arrays, Dates, Maps, Sets, circular refs
// âŒ Functions, DOM nodes

// JSON parse/stringify â€” fast but lossy
const clone2 = JSON.parse(JSON.stringify(original));
// âŒ Loses: undefined, functions, Dates (â†’ strings), circular refs â†’ error

// Recursive (handles circular with WeakMap):
function deepClone(obj, seen = new WeakMap()) {
    if (obj === null || typeof obj !== 'object') return obj;
    if (seen.has(obj)) return seen.get(obj);
    const clone = Array.isArray(obj) ? [] : {};
    seen.set(obj, clone);
    for (const key in obj)
        if (obj.hasOwnProperty(key)) clone[key] = deepClone(obj[key], seen);
    return clone;
}</pre>`},
    {freq:3,cos:['microsoft','amazon'],q:"Explain CORS and how to fix it.",tags:['theory','medium'],
     a:`<p><strong>CORS</strong> blocks requests from a different origin (scheme + domain + port) unless the server explicitly allows it.</p><pre>// Express.js fix:
app.use((req, res, next) => {
    res.setHeader('Access-Control-Allow-Origin', 'https://myapp.com');
    res.setHeader('Access-Control-Allow-Methods', 'GET,POST,PUT,DELETE');
    res.setHeader('Access-Control-Allow-Headers', 'Content-Type,Authorization');
    if (req.method === 'OPTIONS') return res.sendStatus(204); // preflight
    next();
});
// Simpler: npm install cors â†’ app.use(cors({ origin: 'https://myapp.com' }))</pre>`},
    {freq:2,cos:['google','meta'],q:"What is the Proxy object in JavaScript?",tags:['theory','hard'],
     a:`<pre>const handler = {
    get(target, prop) {
        return prop in target ? target[prop] : 'Property does not exist';
    },
    set(target, prop, value) {
        if (typeof value !== 'number') throw new TypeError('Must be a number');
        target[prop] = value; return true;
    }
};
const obj = new Proxy({}, handler);
obj.score = 95;     // âœ…
obj.score = 'high'; // âŒ TypeError
obj.name;           // 'Property does not exist'
// Used by: Vue 3 reactivity, Immer, validation libraries</pre>`},
    {freq:2,cos:['meta','netflix'],q:"What is a Service Worker and how does it enable PWA offline support?",tags:['theory','hard'],
     a:`<pre>// Register:
navigator.serviceWorker.register('/sw.js');

// sw.js â€” cache static assets on install:
self.addEventListener('install', e => {
    e.waitUntil(caches.open('v1').then(c => c.addAll(['/', '/app.js'])));
});

// Serve from cache first (offline support):
self.addEventListener('fetch', e => {
    e.respondWith(caches.match(e.request).then(cached => cached ?? fetch(e.request)));
});
// Strategies: Cache First | Network First | Stale While Revalidate</pre>`},
    {freq:2,cos:['amazon'],q:"What are generators in JavaScript?",tags:['tech','hard'],
     a:`<pre>function* range(start, end, step = 1) {
    for (let i = start; i < end; i += step) yield i;
}
const evens = range(0, 10, 2);
console.log([...evens]);  // [0, 2, 4, 6, 8]

// Generators can receive values:
function* stateMachine() {
    const x = yield 'What is x?';
    const y = yield 'What is y?';
    return x + y;
}
const gen = stateMachine();
gen.next();       // {value: 'What is x?', done: false}
gen.next(10);     // {value: 'What is y?', done: false}
gen.next(20);     // {value: 30, done: true}
// Used in: redux-saga, infinite scroll, lazy sequences</pre>`},
    {freq:2,cos:['meta','google'],q:"Explain CommonJS vs ES Modules.",tags:['theory','medium'],
     a:`<pre>// CommonJS (CJS) â€” Node.js original, synchronous
const fs = require('fs');
module.exports = { greet: () => 'hello' };

// ES Modules (ESM) â€” standard, static, async
import { readFile } from 'fs';
import('heavy-module').then(...);  // dynamic import (lazy load)
export const greet = () => 'hello';
export default greet;

// Key differences:
// CJS: can require() anywhere, not tree-shakeable
// ESM: static, tree-shakeable, top-level await, strict mode
// Modern: use ESM. Supported in Node 12+, all browsers</pre>`},
    {freq:3,cos:['amazon','meta'],q:"What are WeakMap and WeakSet? When do you use them?",tags:['theory','hard'],
     a:`<pre>// WeakMap: keys must be objects, holds WEAK references â†’ GC-friendly
const metadata = new WeakMap();
let element = document.querySelector('#btn');
metadata.set(element, { clickCount: 0 });
element = null;  // element + metadata entry both GC'd

// Common pattern: private class data
const _private = new WeakMap();
class MyClass {
    constructor() { _private.set(this, { secret: 42 }); }
    getSecret() { return _private.get(this).secret; }
}

// WeakSet: set of weakly-held objects (no iteration)
const processed = new WeakSet();
function process(obj) {
    if (processed.has(obj)) return;
    processed.add(obj);
    // do work...
}</pre>`},
  ],

  react:[
    {must:true,freq:5,cos:['meta','amazon','netflix'],q:"What is the Virtual DOM and how does React's reconciliation work?",tags:['theory','medium'],
     a:`<p>The Virtual DOM is a lightweight in-memory representation of the real DOM. React uses it to minimize expensive real DOM operations.</p><p><strong>Reconciliation process:</strong></p><ol><li>State/props change â†’ React creates new VDOM tree</li><li>Diffs new vs previous tree (O(n) diffing algorithm)</li><li>Applies only the <em>minimal set of changes</em> to the real DOM</li></ol><p><strong>Key heuristics:</strong> Different element types â†’ rebuild subtree. Same type â†’ update attributes only. Lists â†’ use <code>key</code> prop to match items.</p><pre>{items.map((item, i) => &lt;Item key={i} /&gt;)}     // âŒ index as key
{items.map(item => &lt;Item key={item.id} /&gt;)}   // âœ… stable unique key</pre>`},
    {must:true,freq:5,cos:['meta','amazon','netflix','microsoft'],q:"Explain useState and useEffect hooks with common pitfalls.",tags:['tech','medium'],
     a:`<pre>function UserProfile({ userId }) {
    const [user, setUser] = useState(null);
    const [loading, setLoading] = useState(true);

    useEffect(() => {
        let cancelled = false;
        setLoading(true);
        fetch('/api/users/' + userId)
            .then(r => r.json())
            .then(data => {
                if (!cancelled) { setUser(data); setLoading(false); }
            });
        return () => { cancelled = true; };  // âœ… cleanup on unmount
    }, [userId]);  // âœ… run when userId changes

    if (loading) return &lt;Spinner /&gt;;
    return &lt;div&gt;{user?.name}&lt;/div&gt;;
}
// Pitfalls: [] vs no deps, missing deps â†’ stale closures, mutating state directly</pre>`},
    {must:true,freq:5,cos:['meta','amazon'],q:"What is the difference between controlled and uncontrolled components?",tags:['theory','medium'],
     a:`<pre>// CONTROLLED: React state is the single source of truth
function ControlledInput() {
    const [value, setValue] = useState('');
    return &lt;input value={value} onChange={e => setValue(e.target.value)} /&gt;;
}
// Advantages: instant validation, conditional rendering, easy testing

// UNCONTROLLED: DOM stores state, accessed via ref
function UncontrolledInput() {
    const inputRef = useRef(null);
    const handleSubmit = () => console.log(inputRef.current.value);
    return &lt;input ref={inputRef} defaultValue="initial" /&gt;;
}
// Use uncontrolled for: file inputs, forms needing value only on submit</pre>`},
    {must:true,freq:5,cos:['meta','netflix','amazon'],q:"What is React.memo, useMemo, and useCallback? When do you use each?",tags:['tech','medium'],
     a:`<pre>// React.memo â€” memoize a COMPONENT (skip re-render if props unchanged)
const ExpensiveList = React.memo(function({ items, onSelect }) {
    return items.map(i => &lt;Item key={i.id} item={i} onSelect={onSelect} /&gt;);
});

// useCallback â€” memoize a FUNCTION reference (stable between renders)
const handleSelect = useCallback((id) => { setSelected(id); }, []);
// âœ… stable reference â†’ React.memo child won't re-render unnecessarily

// useMemo â€” memoize an EXPENSIVE COMPUTED VALUE
const sortedItems = useMemo(() => {
    return [...items].sort((a, b) => a.name.localeCompare(b.name));
}, [items]);  // only recompute when items changes

// Don't over-optimize: these have overhead.
// Only use for genuinely expensive computations or stable refs needed by children.</pre>`},
    {must:true,freq:4,cos:['meta','microsoft'],q:"What is the Context API? When should you use it vs Redux?",tags:['theory','medium'],
     a:`<pre>const ThemeContext = React.createContext('light');

function App() {
    const [theme, setTheme] = useState('dark');
    return (
        &lt;ThemeContext.Provider value={{ theme, setTheme }}&gt;
            &lt;DeepChildComponent /&gt;
        &lt;/ThemeContext.Provider&gt;
    );
}
function DeepChild() {
    const { theme, setTheme } = useContext(ThemeContext);
    return &lt;button onClick={() => setTheme('light')}&gt;{theme}&lt;/button&gt;;
}
// âš ï¸ Context pitfall: ALL consumers re-render when value changes
// Fix: split contexts or memoize the value object</pre><p><strong>Context vs Redux:</strong> Context for auth, theme, language (infrequent changes). Redux for complex state, many actions, middleware (thunk/saga), time-travel debugging.</p>`},
    {freq:4,cos:['meta','amazon'],q:"What are React hooks rules and why do they exist?",tags:['theory','medium'],
     a:`<p><strong>Two rules:</strong></p><ol><li>Only call hooks at the TOP LEVEL (never inside loops, conditions, nested functions)</li><li>Only call hooks from React function components or custom hooks</li></ol><p><strong>Why:</strong> React identifies hooks by their call ORDER. Conditional hooks break this order between renders.</p><pre>// âŒ WRONG â€” conditional hook
if (isLoggedIn) { const [data, setData] = useState(null); }

// âœ… CORRECT â€” condition INSIDE the hook
const [data, setData] = useState(null);
useEffect(() => {
    if (isLoggedIn) fetchData().then(setData);
}, [isLoggedIn]);</pre>`},
    {freq:4,cos:['meta','google'],q:"What is useReducer and when is it better than useState?",tags:['tech','medium'],
     a:`<pre>const initialState = { count: 0, error: null };

function reducer(state, action) {
    switch (action.type) {
        case 'increment': return { ...state, count: state.count + 1 };
        case 'decrement': return { ...state, count: state.count - 1 };
        case 'reset':     return initialState;
        default: throw new Error('Unknown: ' + action.type);
    }
}

function Counter() {
    const [state, dispatch] = useReducer(reducer, initialState);
    return (
        &lt;&gt;
            &lt;p&gt;{state.count}&lt;/p&gt;
            &lt;button onClick={() => dispatch({ type: 'increment' })}&gt;+&lt;/button&gt;
        &lt;/&gt;
    );
}
// Use useReducer for: complex state with multiple sub-values or actions</pre>`},
    {freq:4,cos:['amazon','netflix'],q:"How do you prevent unnecessary re-renders in React?",tags:['tech','hard'],
     a:`<p><strong>Strategies:</strong></p><ul><li><code>React.memo</code> â€” skip re-render if props didn't change</li><li><code>useCallback</code> â€” stable function references for child props</li><li><code>useMemo</code> â€” skip expensive recalculations</li><li><strong>State colocation</strong> â€” move state down to where it's used</li><li><strong>Context splitting</strong> â€” separate high-change from low-change contexts</li></ul><pre>// Anti-pattern: inline object creates new reference every render
&lt;Child options={{ color: 'red' }} /&gt;         // âŒ
const options = useMemo(() => ({ color: 'red' }), []);
&lt;Child options={options} /&gt;                  // âœ…

// Profile first: React DevTools â†’ Profiler tab â†’ record interaction</pre>`},
    {freq:3,cos:['meta','amazon'],q:"What is React Suspense and lazy loading?",tags:['tech','medium'],
     a:`<pre>import { lazy, Suspense } from 'react';

const Dashboard = lazy(() => import('./Dashboard'));  // code-split chunk

function App() {
    return (
        &lt;Suspense fallback={&lt;div className="skeleton"&gt;Loading...&lt;/div&gt;}&gt;
            &lt;Dashboard /&gt;
        &lt;/Suspense&gt;
    );
}

// React 18: components can "suspend" while awaiting async data
// Works with: TanStack Query, SWR, Relay in suspense mode
// Route-based splitting with React Router v6:
// &lt;Suspense fallback={...}&gt;&lt;Dashboard /&gt;&lt;/Suspense&gt; in route element</pre>`},
    {freq:3,cos:['meta'],q:"What are Error Boundaries in React?",tags:['tech','medium'],
     a:`<pre>class ErrorBoundary extends React.Component {
    state = { hasError: false, error: null };

    static getDerivedStateFromError(error) {
        return { hasError: true, error };
    }
    componentDidCatch(error, info) {
        logErrorToSentry(error, info.componentStack);
    }
    render() {
        if (this.state.hasError)
            return &lt;h2&gt;Something went wrong: {this.state.error?.message}&lt;/h2&gt;;
        return this.props.children;
    }
}

&lt;ErrorBoundary&gt;&lt;UnreliableComponent /&gt;&lt;/ErrorBoundary&gt;
// âš ï¸ Doesn't catch: async errors, event handlers, SSR errors</pre>`},
    {freq:3,cos:['amazon','microsoft'],q:"Explain React's useRef hook and its use cases.",tags:['tech','medium'],
     a:`<pre>function VideoPlayer({ src }) {
    const videoRef = useRef(null);  // mutable, doesn't cause re-render

    // 1. DOM access
    const play  = () => videoRef.current.play();
    const pause = () => videoRef.current.pause();

    // 2. Store values that DON'T need to trigger re-renders
    const renderCount = useRef(0);
    useEffect(() => { renderCount.current += 1; });

    // 3. Persist values across renders (like instance variables)
    const timerId = useRef(null);
    const startTimer = () => { timerId.current = setInterval(tick, 1000); };
    const stopTimer  = () => clearInterval(timerId.current);

    return &lt;video ref={videoRef} src={src} /&gt;;
}</pre>`},
    {freq:4,cos:['meta','amazon'],q:"What is prop drilling and how do you avoid it?",tags:['theory','medium'],
     a:`<p><strong>Prop drilling:</strong> passing props through intermediate components that don't use them, just to reach a deeply nested component.</p><pre>// âŒ Drilling: App â†’ Header â†’ Nav â†’ UserMenu â†’ Avatar (all get user prop)

// Solutions:
// 1. Context API
const UserContext = createContext();

// 2. Component composition â€” pass components, not data
function App() {
    const user = useAuth();
    return &lt;Header rightSlot={&lt;Avatar user={user} /&gt;} /&gt;;
    // Header doesn't know about user!
}

// 3. State management (Redux, Zustand, Jotai)
// 4. Custom hooks</pre>`},
    {freq:4,cos:['meta','amazon','microsoft'],q:"What is the difference between state and props in React?",tags:['theory','easy'],
     a:`<pre>// PROPS: data passed FROM parent TO child â€” READ ONLY
function UserCard({ name, role, onLogout }) {
    return &lt;div&gt;&lt;h2&gt;{name}&lt;/h2&gt;&lt;button onClick={onLogout}&gt;Logout&lt;/button&gt;&lt;/div&gt;;
}

// STATE: data managed INSIDE the component â€” can change
function Counter() {
    const [count, setCount] = useState(0);
    return &lt;button onClick={() => setCount(c => c + 1)}&gt;{count}&lt;/button&gt;;
}

// Key rules:
// Props flow DOWN (parent â†’ child)
// Events flow UP (child calls parent's callback prop)
// State triggers re-renders when updated</pre>`},
    {freq:2,cos:['meta','netflix'],q:"Explain React Server Components (RSC) â€” what problem do they solve?",tags:['theory','hard'],
     a:`<p>React Server Components run <strong>only on the server</strong> â€” never ship their JS to the browser, reducing bundle size.</p><pre>// app/page.tsx â€” Server Component (no 'use client')
async function ProductPage({ id }) {
    const product = await db.products.findById(id);  // direct DB access!
    const reviews = await fetch('/api/reviews/' + id).then(r => r.json());

    return (
        &lt;div&gt;
            &lt;ProductInfo product={product} /&gt;  {/* server component */}
            &lt;ReviewForm productId={id} /&gt;      {/* 'use client' â€” interactive */}
        &lt;/div&gt;
    );
}
// Solves: data fetching without API layer, zero bundle cost for server components</pre>`},
    {freq:3,cos:['meta','amazon'],q:"What are React custom hooks and how do you create one?",tags:['tech','medium'],
     a:`<pre>// Custom hooks: reuse stateful logic; must start with 'use'
function useFetch(url) {
    const [data, setData]       = useState(null);
    const [loading, setLoading] = useState(true);
    const [error, setError]     = useState(null);

    useEffect(() => {
        let cancelled = false;
        setLoading(true);
        fetch(url)
            .then(r => { if (!r.ok) throw new Error(r.statusText); return r.json(); })
            .then(d => { if (!cancelled) { setData(d); setLoading(false); } })
            .catch(e => { if (!cancelled) { setError(e.message); setLoading(false); } });
        return () => { cancelled = true; };
    }, [url]);

    return { data, loading, error };
}

// Usage anywhere:
const { data: users, loading } = useFetch('/api/users');</pre>`},
    {freq:3,cos:['meta','amazon'],q:"What is React's key prop and why is it critical for lists?",tags:['theory','medium'],
     a:`<pre>// âŒ Index as key â€” breaks with reordering/insertion
{items.map((item, index) => &lt;Item key={index} data={item} /&gt;)}
// Removing item[0] shifts all indices â†’ React thinks every item changed

// âœ… Stable unique ID
{items.map(item => &lt;Item key={item.id} data={item} /&gt;)}
// React tracks by ID â†’ only actually changed items re-render

// âœ… Force component reset by changing key:
&lt;UserProfile key={userId} /&gt;
// Changing userId remounts UserProfile â†’ clears all state</pre>`},
    {freq:3,cos:['meta','amazon'],q:"How does React 18's useTransition and concurrent mode work?",tags:['tech','hard'],
     a:`<pre>import { useState, useTransition } from 'react';

function SearchPage() {
    const [query, setQuery]   = useState('');
    const [results, setResults] = useState([]);
    const [isPending, startTransition] = useTransition();

    function handleSearch(e) {
        setQuery(e.target.value);          // urgent: input updates immediately
        startTransition(() => {
            setResults(search(e.target.value));  // non-urgent: can be interrupted
        });
    }

    return (
        &lt;&gt;
            &lt;input value={query} onChange={handleSearch} /&gt;
            {isPending ? &lt;Spinner /&gt; : &lt;ResultsList data={results} /&gt;}
        &lt;/&gt;
    );
}
// useDeferredValue: similar â€” lags behind a value during heavy renders</pre>`},
    {freq:2,cos:['meta'],q:"What are React portals and when would you use them?",tags:['tech','medium'],
     a:`<pre>import { createPortal } from 'react-dom';

function Modal({ isOpen, children }) {
    if (!isOpen) return null;
    return createPortal(
        &lt;div className="modal-overlay"&gt;
            &lt;div className="modal-content"&gt;{children}&lt;/div&gt;
        &lt;/div&gt;,
        document.getElementById('modal-root')  // outside #root in DOM
    );
}
// HTML: &lt;div id="root"&gt;&lt;/div&gt;&lt;div id="modal-root"&gt;&lt;/div&gt;
// Still inside React's tree: state, events, context all work!
// Use for: modals, tooltips, dropdowns, toasts
// Why: avoids z-index/overflow:hidden issues from parent containers</pre>`},
    {freq:2,cos:['meta','amazon'],q:"What is React's StrictMode?",tags:['theory','easy'],
     a:`<p>In development only, React.StrictMode:</p><ul><li><strong>Double-invokes</strong> renders and state initializers to detect side effects</li><li><strong>Double-invokes</strong> useEffect cleanup+setup to ensure cleanup works</li><li>Warns about deprecated APIs and missing effect dependencies</li></ul><pre>&lt;React.StrictMode&gt;&lt;App /&gt;&lt;/React.StrictMode&gt;</pre><p>This is why useEffect appears to run twice in React 18 development â€” by design, to catch effects with missing cleanup. Has no impact in production.</p>`},
  ],

  dsa:[
    {must:true,freq:5,cos:['google','amazon','meta','microsoft'],q:"Two Sum â€” find indices of two numbers that add to target. (LeetCode #1)",tags:['tech','easy'],
     a:`<pre>def two_sum(nums, target):
    seen = {}  # value â†’ index
    for i, num in enumerate(nums):
        complement = target - num
        if complement in seen:
            return [seen[complement], i]
        seen[num] = i
    return []

# two_sum([2,7,11,15], 9) â†’ [0,1]</pre><div class="complexity-row"><span class="complexity-pill">â± Time O(n)</span><span class="complexity-pill">ğŸ’¾ Space O(n)</span></div>`},
    {must:true,freq:5,cos:['google','amazon','meta'],q:"Reverse a linked list â€” iteratively and recursively. (LeetCode #206)",tags:['tech','easy'],
     a:`<pre># Iterative â€” O(n) time, O(1) space
def reverse_iterative(head):
    prev, curr = None, head
    while curr:
        next_node = curr.next
        curr.next = prev
        prev = curr
        curr = next_node
    return prev

# Recursive â€” O(n) time, O(n) space (call stack)
def reverse_recursive(head):
    if not head or not head.next: return head
    new_head = reverse_recursive(head.next)
    head.next.next = head
    head.next = None
    return new_head</pre><div class="complexity-row"><span class="complexity-pill">â± Time O(n)</span><span class="complexity-pill">ğŸ’¾ Space O(1) iterative</span></div>`},
    {must:true,freq:5,cos:['amazon','microsoft','google'],q:"Valid Parentheses â€” check if brackets are balanced. (LeetCode #20)",tags:['tech','easy'],
     a:`<pre>def is_valid(s):
    stack = []
    mapping = {')': '(', '}': '{', ']': '['}
    for char in s:
        if char in mapping:
            top = stack.pop() if stack else '#'
            if mapping[char] != top: return False
        else:
            stack.append(char)
    return not stack

# is_valid("()[]{}") â†’ True
# is_valid("(]")     â†’ False</pre><div class="complexity-row"><span class="complexity-pill">â± Time O(n)</span><span class="complexity-pill">ğŸ’¾ Space O(n)</span></div>`},
    {must:true,freq:5,cos:['google','meta','amazon'],q:"Maximum Subarray â€” Kadane's Algorithm. (LeetCode #53)",tags:['tech','medium'],
     a:`<pre>def max_subarray(nums):
    max_sum = current_sum = nums[0]
    for num in nums[1:]:
        current_sum = max(num, current_sum + num)  # extend or start fresh
        max_sum = max(max_sum, current_sum)
    return max_sum

# max_subarray([-2,1,-3,4,-1,2,1,-5,4]) â†’ 6  (subarray: [4,-1,2,1])</pre><div class="complexity-row"><span class="complexity-pill">â± Time O(n)</span><span class="complexity-pill">ğŸ’¾ Space O(1)</span></div>`},
    {must:true,freq:5,cos:['amazon','microsoft','meta'],q:"Binary Search â€” implement all variants. (LeetCode #704)",tags:['tech','medium'],
     a:`<pre>def binary_search(nums, target):
    left, right = 0, len(nums) - 1
    while left <= right:
        mid = left + (right - left) // 2  # avoid overflow
        if nums[mid] == target:   return mid
        elif nums[mid] < target:  left = mid + 1
        else:                     right = mid - 1
    return -1

# Find leftmost occurrence:
def search_left(nums, target):
    left, right, result = 0, len(nums) - 1, -1
    while left <= right:
        mid = (left + right) // 2
        if nums[mid] == target: result = mid; right = mid - 1
        elif nums[mid] < target: left = mid + 1
        else: right = mid - 1
    return result</pre><div class="complexity-row"><span class="complexity-pill">â± Time O(log n)</span><span class="complexity-pill">ğŸ’¾ Space O(1)</span></div>`},
    {must:true,freq:5,cos:['google','amazon','meta','microsoft'],q:"What is Big O notation? Explain the most common complexities.",tags:['theory','medium'],
     a:`<table style="width:100%;font-size:0.79rem;border-collapse:collapse;color:rgba(255,255,255,0.8)"><tr style="border-bottom:1px solid rgba(255,255,255,0.1)"><td style="padding:0.35rem 0.6rem;color:var(--yellow);font-weight:700">Complexity</td><td style="padding:0.35rem 0.6rem;color:var(--yellow)">Name</td><td style="padding:0.35rem 0.6rem;color:var(--yellow)">Example</td></tr><tr style="border-bottom:1px solid rgba(255,255,255,0.06)"><td style="padding:0.3rem 0.6rem;color:var(--green)">O(1)</td><td>Constant</td><td>Array index, hash lookup</td></tr><tr style="border-bottom:1px solid rgba(255,255,255,0.06)"><td style="padding:0.3rem 0.6rem;color:var(--green)">O(log n)</td><td>Logarithmic</td><td>Binary search, balanced BST</td></tr><tr style="border-bottom:1px solid rgba(255,255,255,0.06)"><td style="padding:0.3rem 0.6rem;color:var(--yellow)">O(n)</td><td>Linear</td><td>Array traversal, linear search</td></tr><tr style="border-bottom:1px solid rgba(255,255,255,0.06)"><td style="padding:0.3rem 0.6rem;color:var(--yellow)">O(n log n)</td><td>Linearithmic</td><td>Merge sort, heap sort</td></tr><tr style="border-bottom:1px solid rgba(255,255,255,0.06)"><td style="padding:0.3rem 0.6rem;color:var(--accent)">O(nÂ²)</td><td>Quadratic</td><td>Bubble sort, nested loops</td></tr><tr><td style="padding:0.3rem 0.6rem;color:var(--accent)">O(2â¿)</td><td>Exponential</td><td>Recursive fib (naive)</td></tr></table>`},
    {must:true,freq:5,cos:['amazon','google','microsoft'],q:"LRU Cache â€” design with O(1) get and put. (LeetCode #146)",tags:['tech','hard'],
     a:`<pre>from collections import OrderedDict

class LRUCache:
    def __init__(self, capacity):
        self.cap = capacity
        self.cache = OrderedDict()  # maintains insertion order

    def get(self, key):
        if key not in self.cache: return -1
        self.cache.move_to_end(key)  # mark recently used
        return self.cache[key]

    def put(self, key, value):
        if key in self.cache: self.cache.move_to_end(key)
        self.cache[key] = value
        if len(self.cache) > self.cap:
            self.cache.popitem(last=False)  # evict LRU (front)

# Structure: Doubly Linked List + Hash Map â†’ both O(1)</pre><div class="complexity-row"><span class="complexity-pill">â± get/put O(1)</span><span class="complexity-pill">ğŸ’¾ Space O(capacity)</span></div>`},
    {must:true,freq:4,cos:['google','amazon'],q:"Merge Intervals. (LeetCode #56)",tags:['tech','medium'],
     a:`<pre>def merge(intervals):
    intervals.sort(key=lambda x: x[0])
    merged = [intervals[0]]
    for start, end in intervals[1:]:
        last_end = merged[-1][1]
        if start <= last_end:
            merged[-1][1] = max(last_end, end)  # extend
        else:
            merged.append([start, end])
    return merged

# merge([[1,3],[2,6],[8,10],[15,18]]) â†’ [[1,6],[8,10],[15,18]]</pre><div class="complexity-row"><span class="complexity-pill">â± Time O(n log n)</span><span class="complexity-pill">ğŸ’¾ Space O(n)</span></div>`},
    {must:true,freq:4,cos:['amazon','meta','microsoft'],q:"Number of Islands â€” DFS. (LeetCode #200)",tags:['tech','medium'],
     a:`<pre>def num_islands(grid):
    if not grid: return 0
    rows, cols = len(grid), len(grid[0])
    count = 0

    def dfs(r, c):
        if r < 0 or r >= rows or c < 0 or c >= cols or grid[r][c] != '1': return
        grid[r][c] = '0'  # mark visited
        dfs(r+1,c); dfs(r-1,c); dfs(r,c+1); dfs(r,c-1)

    for r in range(rows):
        for c in range(cols):
            if grid[r][c] == '1':
                count += 1; dfs(r, c)
    return count</pre><div class="complexity-row"><span class="complexity-pill">â± Time O(mÃ—n)</span><span class="complexity-pill">ğŸ’¾ Space O(mÃ—n)</span></div>`},
    {must:true,freq:4,cos:['google','amazon','meta'],q:"Explain DFS vs BFS and when to use each.",tags:['theory','medium'],
     a:`<pre>from collections import deque

def dfs(graph, start, visited=None):
    if visited is None: visited = set()
    visited.add(start)
    for nb in graph[start]:
        if nb not in visited: dfs(graph, nb, visited)
    return visited

def bfs(graph, start):
    visited = {start}; queue = deque([start])
    while queue:
        node = queue.popleft()
        for nb in graph[node]:
            if nb not in visited: visited.add(nb); queue.append(nb)
    return visited</pre><p><strong>DFS:</strong> Connected components, topological sort, cycle detection, maze solving.<br><strong>BFS:</strong> Shortest path (unweighted), level-order traversal, nearest neighbors.</p>`},
    {freq:4,cos:['amazon','google','microsoft'],q:"Implement a stack and queue. Common interview patterns.",tags:['tech','easy'],
     a:`<pre>class Stack:
    def __init__(self): self.items = []
    def push(self, item): self.items.append(item)   # O(1)
    def pop(self):        return self.items.pop()    # O(1)
    def peek(self):       return self.items[-1]       # O(1)
    def is_empty(self):   return len(self.items) == 0

from collections import deque
class Queue:
    def __init__(self): self.items = deque()
    def enqueue(self, item): self.items.append(item)       # O(1)
    def dequeue(self):       return self.items.popleft()   # O(1) â† use deque!
    # âš ï¸ list.pop(0) is O(n) â€” always use deque for queue</pre>`},
    {freq:4,cos:['amazon','google','microsoft'],q:"How does a hash map work? What is a hash collision?",tags:['theory','medium'],
     a:`<p>A hash map maps keys to values using a hash function to compute an array index.</p><pre># hash(key) % table_size â†’ index
# Collision: two keys map to same index

# Method 1: Separate Chaining â€” each slot holds a linked list
# Average O(1), worst O(n) if all keys collide

# Method 2: Open Addressing â€” probe for next empty slot
# Linear probing: try index+1, index+2...

# Python dict: open addressing + compact design
# Load factor > 2/3 triggers resize (doubles, rehashes all)</pre><div class="complexity-row"><span class="complexity-pill">â± avg O(1) get/put</span><span class="complexity-pill">â± worst O(n) with collisions</span></div>`},
    {freq:3,cos:['google','amazon'],q:"Floyd's Cycle Detection â€” Linked List Cycle. (LeetCode #141/#142)",tags:['tech','medium'],
     a:`<pre>def has_cycle(head):
    slow = fast = head
    while fast and fast.next:
        slow = slow.next; fast = fast.next.next
        if slow == fast: return True
    return False

# Find cycle START:
def detect_cycle(head):
    slow = fast = head
    while fast and fast.next:
        slow, fast = slow.next, fast.next.next
        if slow == fast: break
    else: return None
    slow = head   # move to head, keep fast at meeting point
    while slow != fast:
        slow = slow.next; fast = fast.next
    return slow   # cycle start</pre><div class="complexity-row"><span class="complexity-pill">â± Time O(n)</span><span class="complexity-pill">ğŸ’¾ Space O(1)</span></div>`},
    {freq:4,cos:['google','amazon','meta'],q:"Sliding Window â€” max sum subarray of size k.",tags:['tech','medium'],
     a:`<pre># Fixed window â€” O(n)
def max_sum_subarray(nums, k):
    window_sum = sum(nums[:k])
    max_sum = window_sum
    for i in range(k, len(nums)):
        window_sum += nums[i] - nums[i - k]  # slide
        max_sum = max(max_sum, window_sum)
    return max_sum

# Variable window â€” longest substring without repeating chars:
def length_of_longest_substring(s):
    seen = {}; left = max_len = 0
    for right, char in enumerate(s):
        if char in seen and seen[char] >= left:
            left = seen[char] + 1
        seen[char] = right
        max_len = max(max_len, right - left + 1)
    return max_len</pre><div class="complexity-row"><span class="complexity-pill">â± Time O(n)</span><span class="complexity-pill">ğŸ’¾ Space O(k) or O(1)</span></div>`},
    {freq:3,cos:['google','meta'],q:"Two Pointer â€” 3Sum problem. (LeetCode #15)",tags:['tech','medium'],
     a:`<pre>def three_sum(nums):
    nums.sort(); result = []
    for i in range(len(nums) - 2):
        if nums[i] > 0: break
        if i > 0 and nums[i] == nums[i-1]: continue  # skip dups
        left, right = i + 1, len(nums) - 1
        while left < right:
            total = nums[i] + nums[left] + nums[right]
            if total == 0:
                result.append([nums[i], nums[left], nums[right]])
                while left < right and nums[left] == nums[left+1]: left += 1
                while left < right and nums[right] == nums[right-1]: right -= 1
                left += 1; right -= 1
            elif total < 0: left += 1
            else: right -= 1
    return result</pre><div class="complexity-row"><span class="complexity-pill">â± Time O(nÂ²)</span><span class="complexity-pill">ğŸ’¾ Space O(1)</span></div>`},
    {freq:3,cos:['amazon','google'],q:"Sorting algorithms â€” merge sort vs quicksort.",tags:['theory','medium'],
     a:`<pre># MERGE SORT â€” O(n log n) guaranteed, stable
def merge_sort(arr):
    if len(arr) <= 1: return arr
    mid = len(arr) // 2
    left = merge_sort(arr[:mid]); right = merge_sort(arr[mid:])
    result, i, j = [], 0, 0
    while i < len(left) and j < len(right):
        if left[i] <= right[j]: result.append(left[i]); i+=1
        else: result.append(right[j]); j+=1
    return result + left[i:] + right[j:]

# QUICKSORT â€” O(n log n) avg, O(nÂ²) worst
def quicksort(arr):
    if len(arr) <= 1: return arr
    pivot = arr[len(arr)//2]
    return quicksort([x for x in arr if x<pivot]) + \
           [x for x in arr if x==pivot] + \
           quicksort([x for x in arr if x>pivot])</pre><div class="complexity-row"><span class="complexity-pill">Merge: O(n log n) all cases, O(n) space</span><span class="complexity-pill">Quick: O(n log n) avg, O(nÂ²) worst</span></div>`},
    {freq:4,cos:['google','amazon','meta'],q:"Tree traversals â€” inorder, preorder, postorder, level-order.",tags:['theory','medium'],
     a:`<pre>from collections import deque

def inorder(root, res=[]):    # Leftâ†’Nodeâ†’Right â†’ sorted (BST)
    if root: inorder(root.left,res); res.append(root.val); inorder(root.right,res)

def preorder(root, res=[]):   # Nodeâ†’Leftâ†’Right â†’ copy/serialize tree
    if root: res.append(root.val); preorder(root.left,res); preorder(root.right,res)

def postorder(root, res=[]):  # Leftâ†’Rightâ†’Node â†’ delete tree safely
    if root: postorder(root.left,res); postorder(root.right,res); res.append(root.val)

def level_order(root):        # BFS â€” process level by level
    if not root: return []
    queue = deque([root]); result = []
    while queue:
        level = []
        for _ in range(len(queue)):
            node = queue.popleft()
            level.append(node.val)
            if node.left: queue.append(node.left)
            if node.right: queue.append(node.right)
        result.append(level)
    return result</pre>`},
    {freq:3,cos:['amazon','google'],q:"Dynamic Programming â€” Coin Change. (LeetCode #322)",tags:['tech','medium'],
     a:`<pre>def coin_change(coins, amount):
    dp = [float('inf')] * (amount + 1)
    dp[0] = 0   # 0 coins needed to make amount 0

    for i in range(1, amount + 1):
        for coin in coins:
            if coin <= i:
                dp[i] = min(dp[i], dp[i - coin] + 1)

    return dp[amount] if dp[amount] != float('inf') else -1

# coin_change([1,5,10,25], 30) â†’ 2  (25+5)
# Recognize DP: "minimum/maximum", "number of ways",
# "can we achieve X", optimal choice at each step</pre><div class="complexity-row"><span class="complexity-pill">â± Time O(amount Ã— coins)</span><span class="complexity-pill">ğŸ’¾ Space O(amount)</span></div>`},
    {freq:3,cos:['amazon','google'],q:"Dijkstra's Shortest Path Algorithm.",tags:['tech','hard'],
     a:`<pre>import heapq

def dijkstra(graph, start):
    # graph = {node: [(neighbor, weight), ...]}
    distances = {node: float('inf') for node in graph}
    distances[start] = 0
    heap = [(0, start)]

    while heap:
        dist, node = heapq.heappop(heap)
        if dist > distances[node]: continue  # skip outdated

        for neighbor, weight in graph[node]:
            new_dist = dist + weight
            if new_dist < distances[neighbor]:
                distances[neighbor] = new_dist
                heapq.heappush(heap, (new_dist, neighbor))

    return distances</pre><div class="complexity-row"><span class="complexity-pill">â± Time O((V+E) log V)</span><span class="complexity-pill">ğŸ’¾ Space O(V)</span></div>`},
    {freq:2,cos:['google','meta'],q:"Topological Sort â€” Course Schedule. (LeetCode #207)",tags:['tech','hard'],
     a:`<pre>from collections import deque

def can_finish(numCourses, prerequisites):
    graph = [[] for _ in range(numCourses)]
    in_degree = [0] * numCourses
    for course, prereq in prerequisites:
        graph[prereq].append(course)
        in_degree[course] += 1

    queue = deque(i for i in range(numCourses) if in_degree[i] == 0)
    completed = 0
    while queue:
        course = queue.popleft(); completed += 1
        for next_course in graph[course]:
            in_degree[next_course] -= 1
            if in_degree[next_course] == 0: queue.append(next_course)

    return completed == numCourses  # False if cycle</pre><div class="complexity-row"><span class="complexity-pill">â± Time O(V+E)</span><span class="complexity-pill">ğŸ’¾ Space O(V+E)</span></div>`},
    {freq:3,cos:['amazon','microsoft'],q:"Longest Common Subsequence (LCS). (LeetCode #1143)",tags:['tech','hard'],
     a:`<pre>def lcs(text1, text2):
    m, n = len(text1), len(text2)
    dp = [[0] * (n+1) for _ in range(m+1)]
    for i in range(1, m+1):
        for j in range(1, n+1):
            if text1[i-1] == text2[j-1]:
                dp[i][j] = dp[i-1][j-1] + 1
            else:
                dp[i][j] = max(dp[i-1][j], dp[i][j-1])
    return dp[m][n]

# lcs("abcde", "ace") â†’ 3  (a, c, e)
# lcs("abc", "def")   â†’ 0</pre><div class="complexity-row"><span class="complexity-pill">â± Time O(mÃ—n)</span><span class="complexity-pill">ğŸ’¾ Space O(mÃ—n)</span></div>`},
    {freq:4,cos:['amazon','google','microsoft'],q:"Climbing Stairs â€” DP. (LeetCode #70)",tags:['tech','easy'],
     a:`<pre>def climb_stairs(n):
    if n <= 2: return n
    prev2, prev1 = 1, 2
    for _ in range(3, n+1):
        curr = prev1 + prev2   # = Fibonacci!
        prev2, prev1 = prev1, curr
    return prev1

# This IS Fibonacci: f(1)=1, f(2)=2, f(n)=f(n-1)+f(n-2)

# Memoized top-down:
from functools import lru_cache
@lru_cache(maxsize=None)
def climb(n):
    if n <= 2: return n
    return climb(n-1) + climb(n-2)</pre><div class="complexity-row"><span class="complexity-pill">â± Time O(n)</span><span class="complexity-pill">ğŸ’¾ Space O(1)</span></div>`},
  ],

  sql:[
    {must:true,freq:5,cos:['amazon','microsoft','google'],q:"Explain INNER JOIN, LEFT JOIN, RIGHT JOIN, and FULL OUTER JOIN.",tags:['theory','medium'],
     a:`<pre>-- INNER JOIN: rows matching in BOTH tables
SELECT u.name, o.total FROM users u
INNER JOIN orders o ON u.id = o.user_id;

-- LEFT JOIN: all LEFT rows + matching right (NULL if no match)
SELECT u.name, o.total FROM users u
LEFT JOIN orders o ON u.id = o.user_id;
-- Returns ALL users, even those with no orders (total = NULL)

-- RIGHT JOIN: all RIGHT rows + matching left
-- FULL OUTER JOIN: all rows from both, NULLs where no match

-- Venn: INNER=intersection, LEFT=left circle, FULL=entire diagram</pre>`},
    {must:true,freq:5,cos:['amazon','microsoft'],q:"Difference between WHERE and HAVING?",tags:['theory','medium'],
     a:`<pre>SELECT department, AVG(salary) as avg_sal
FROM employees
WHERE salary > 30000         -- â† filters rows BEFORE grouping
GROUP BY department
HAVING AVG(salary) > 60000   -- â† filters GROUPS after aggregation

-- Rule:
-- WHERE  = "which rows enter GROUP BY?"
-- HAVING = "which groups survive after GROUP BY?"

-- âŒ WHERE AVG(salary) > 60000   -- syntax error
-- âœ… HAVING AVG(salary) > 60000</pre>`},
    {must:true,freq:4,cos:['amazon','microsoft','meta'],q:"Find the second highest salary. (Top-N query pattern)",tags:['tech','medium'],
     a:`<pre>-- Method 1: LIMIT/OFFSET (MySQL, PostgreSQL)
SELECT DISTINCT salary FROM employees
ORDER BY salary DESC LIMIT 1 OFFSET 1;

-- Method 2: MAX with subquery
SELECT MAX(salary) FROM employees
WHERE salary < (SELECT MAX(salary) FROM employees);

-- Method 3: DENSE_RANK window function (most robust)
SELECT salary FROM (
    SELECT salary,
           DENSE_RANK() OVER (ORDER BY salary DESC) as rnk
    FROM employees
) t WHERE rnk = 2;

-- RANK: 1,2,2,4 (skips after ties)
-- DENSE_RANK: 1,2,2,3 (no gaps)</pre>`},
    {must:true,freq:4,cos:['google','amazon'],q:"SQL window functions â€” ROW_NUMBER, RANK, DENSE_RANK, LAG, LEAD.",tags:['tech','hard'],
     a:`<pre>SELECT
    name, salary, department,
    ROW_NUMBER() OVER (PARTITION BY department ORDER BY salary DESC) as row_num,
    RANK()       OVER (PARTITION BY department ORDER BY salary DESC) as rank,
    DENSE_RANK() OVER (PARTITION BY department ORDER BY salary DESC) as dense_rank,
    LAG(salary, 1)  OVER (PARTITION BY department ORDER BY hire_date) as prev_salary,
    LEAD(salary, 1) OVER (PARTITION BY department ORDER BY hire_date) as next_salary,
    SUM(salary) OVER (PARTITION BY department) as dept_total,
    salary * 100.0 / SUM(salary) OVER (PARTITION BY department) as pct
FROM employees;
-- PARTITION BY: like GROUP BY but keeps all rows</pre>`},
    {freq:4,cos:['amazon','microsoft'],q:"Database indexes â€” when should you add one?",tags:['theory','medium'],
     a:`<pre>CREATE INDEX idx_email ON users (email);
CREATE INDEX idx_dept_salary ON employees (department, salary);  -- composite

-- Add index for:
-- âœ… Columns in WHERE clauses (frequently filtered)
-- âœ… Columns in JOIN ON conditions
-- âœ… Columns in ORDER BY (avoids file sort)

-- Don't add index for:
-- âŒ Small tables (full scan faster)
-- âŒ Low cardinality columns (boolean â€” barely helps)
-- âŒ Write-heavy tables (index overhead on every INSERT/UPDATE)

-- Check index usage:
EXPLAIN SELECT * FROM employees WHERE email = 'a@b.com';</pre>`},
    {freq:4,cos:['amazon','google','microsoft'],q:"Find users who purchased in both January AND February. (Set operations)",tags:['tech','medium'],
     a:`<pre>-- Method 1: INTERSECT
SELECT user_id FROM orders WHERE MONTH(order_date) = 1
INTERSECT
SELECT user_id FROM orders WHERE MONTH(order_date) = 2;

-- Method 2: GROUP BY + HAVING (most portable)
SELECT user_id FROM orders
WHERE MONTH(order_date) IN (1, 2)
GROUP BY user_id
HAVING COUNT(DISTINCT MONTH(order_date)) = 2;

-- UNION: combine (removes dups)
-- UNION ALL: combine (keeps dups, faster)
-- INTERSECT: rows in both
-- EXCEPT/MINUS: rows in first but not second</pre>`},
    {freq:3,cos:['microsoft','amazon'],q:"What is a CTE and recursive CTE?",tags:['tech','medium'],
     a:`<pre>-- Basic CTE: named subquery for readability
WITH high_earners AS (
    SELECT id, name, salary FROM employees WHERE salary > 100000
)
SELECT h.name FROM high_earners h;

-- Recursive CTE: traverse hierarchical data (org chart, categories)
WITH RECURSIVE org_tree AS (
    SELECT id, name, manager_id, 0 as level
    FROM employees WHERE manager_id IS NULL  -- root
    UNION ALL
    SELECT e.id, e.name, e.manager_id, t.level + 1
    FROM employees e JOIN org_tree t ON e.manager_id = t.id
)
SELECT level, name FROM org_tree ORDER BY level, name;</pre>`},
    {freq:3,cos:['amazon','google'],q:"What are ACID properties in databases?",tags:['theory','medium'],
     a:`<p><strong>Atomicity:</strong> All-or-nothing. If any step fails, entire transaction is rolled back.<br><strong>Consistency:</strong> Transaction brings DB from one valid state to another. All constraints satisfied before and after.<br><strong>Isolation:</strong> Concurrent transactions execute as if sequential. Levels: READ UNCOMMITTED < READ COMMITTED < REPEATABLE READ < SERIALIZABLE.<br><strong>Durability:</strong> Committed data persists even through crashes (write-ahead logging).</p>`},
    {freq:3,cos:['amazon','google'],q:"How do you optimize a slow SQL query?",tags:['tech','hard'],
     a:`<pre>-- Step 1: EXPLAIN ANALYZE to see execution plan
EXPLAIN ANALYZE SELECT * FROM orders o JOIN users u ON o.user_id = u.id
WHERE o.status = 'pending';
-- Look for: "Seq Scan" on large tables â†’ needs index

-- Common fixes:
-- 1. Add missing index
CREATE INDEX ON orders(status); CREATE INDEX ON orders(user_id);

-- 2. SELECT only needed columns (avoid SELECT *)

-- 3. Avoid functions on indexed columns in WHERE:
-- âŒ WHERE YEAR(created_at) = 2024  (breaks index use)
-- âœ… WHERE created_at BETWEEN '2024-01-01' AND '2024-12-31'

-- 4. Covering index (includes all SELECT columns)
CREATE INDEX idx_cov ON orders(user_id, status, total);</pre>`},
    {freq:4,cos:['amazon','microsoft'],q:"Find duplicate emails in a users table. (LeetCode SQL #182)",tags:['tech','easy'],
     a:`<pre>-- GROUP BY + HAVING
SELECT email, COUNT(*) as occurrences FROM users
GROUP BY email HAVING COUNT(*) > 1;

-- Window function
SELECT DISTINCT email FROM (
    SELECT email, COUNT(*) OVER (PARTITION BY email) as cnt FROM users
) t WHERE cnt > 1;

-- Delete duplicates (keep lowest id):
DELETE FROM users WHERE id NOT IN (
    SELECT MIN(id) FROM users GROUP BY email
);</pre>`},
    {freq:2,cos:['amazon','microsoft'],q:"What is database normalization? 1NF, 2NF, 3NF.",tags:['theory','medium'],
     a:`<p><strong>1NF:</strong> Each cell holds one atomic value. No repeating groups. Every row is unique (has PK).<br><strong>2NF:</strong> In 1NF + no partial dependencies â€” every non-key column depends on the ENTIRE primary key (relevant for composite PKs).<br><strong>3NF:</strong> In 2NF + no transitive dependencies â€” non-key columns don't depend on other non-key columns. Example: if zipcode â†’ city, extract to separate table.<br><strong>Denormalization:</strong> Intentionally break normal forms for read performance (fewer JOINs in analytics/warehousing).</p>`},
    {freq:3,cos:['amazon','microsoft'],q:"Running total and moving average â€” cumulative window functions.",tags:['tech','medium'],
     a:`<pre>SELECT
    date,
    revenue,
    SUM(revenue) OVER (ORDER BY date) as running_total,
    AVG(revenue) OVER (
        ORDER BY date
        ROWS BETWEEN 6 PRECEDING AND CURRENT ROW
    ) as moving_avg_7d,
    ROUND(SUM(revenue) OVER (ORDER BY date) * 100.0 /
          SUM(revenue) OVER (), 2) as running_pct
FROM daily_sales ORDER BY date;

-- Frame: ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW (default)
-- ROWS BETWEEN 6 PRECEDING AND CURRENT ROW
-- ROWS BETWEEN CURRENT ROW AND 1 FOLLOWING</pre>`},
    {freq:2,cos:['amazon'],q:"The N+1 query problem and how to fix it.",tags:['theory','medium'],
     a:`<p><strong>N+1 problem:</strong> Fetch N records (1 query), then make 1 additional query for each record. Total: N+1 round trips instead of 1.</p><pre>-- âŒ 1 query for 100 posts, then 100 queries for user of each post = 101

-- âœ… Fix 1: JOIN â€” get everything in one query
SELECT p.*, u.name as author FROM posts p JOIN users u ON p.user_id = u.id;

-- âœ… Fix 2: IN clause
SELECT * FROM users WHERE id IN (1, 5, 12, 47, ...);

-- In ORMs:
-- Django: .select_related('author')   -- JOIN
-- Django: .prefetch_related('tags')   -- separate query + Python join
-- ActiveRecord: .includes(:user)
-- SQLAlchemy: joinedload(), selectinload()</pre>`},
    {freq:2,cos:['amazon','microsoft'],q:"Explain database transactions, isolation levels, and deadlocks.",tags:['theory','hard'],
     a:`<pre>BEGIN;
    UPDATE accounts SET balance = balance - 100 WHERE id = 1;
    UPDATE accounts SET balance = balance + 100 WHERE id = 2;
COMMIT;  -- or ROLLBACK

-- Isolation levels (each fixes more concurrency problems):
-- READ COMMITTED   â†’ prevents dirty reads
-- REPEATABLE READ  â†’ prevents non-repeatable reads
-- SERIALIZABLE     â†’ prevents phantom reads (slowest)

-- Deadlock: A locks row 1, wants row 2; B locks row 2, wants row 1
-- Prevention: always acquire locks in same order
-- Detection: DB kills one transaction, returns deadlock error
SELECT ... FOR UPDATE;   -- acquire row lock
SELECT ... FOR SHARE;    -- read lock (others can read, not write)</pre>`},
  ],

  system:[
    {must:true,freq:5,cos:['amazon','google','meta','microsoft'],q:"How would you design a URL shortener like bit.ly?",tags:['tech','medium'],
     a:`<p><strong>API:</strong> <code>POST /shorten {url}</code> â†’ <code>{short: "bit.ly/xK4mN"}</code>. <code>GET /xK4mN</code> â†’ 302 redirect.</p><p><strong>Key choices:</strong></p><ul><li><strong>Short code:</strong> Base-62 encode auto-increment DB ID. 6 chars = 56B possibilities.</li><li><strong>Storage:</strong> <code>short_code (PK) | long_url | created_at | user_id</code></li><li><strong>Cache:</strong> Redis (cache-aside). 80/20 â€” top 20% URLs get 80% traffic.</li><li><strong>301 vs 302:</strong> 302 hits your server each time (enables analytics). 301 cached by browser (faster but no tracking).</li><li><strong>Scale:</strong> Read-heavy â†’ read replicas. CDN for global. Rate limit per IP.</li></ul>`},
    {must:true,freq:5,cos:['amazon','meta','google'],q:"Design a social media news feed (Twitter/Facebook timeline).",tags:['tech','hard'],
     a:`<p><strong>Push (fanout on write):</strong> When User A posts, write to all followers' feed caches. Fast reads O(1). Expensive for celebrities (1M followers = 1M writes/post).</p><p><strong>Pull (fanout on read):</strong> When User B opens feed, query all followed users' posts and merge. Consistent but slower.</p><p><strong>Hybrid (Twitter's approach):</strong></p><ul><li>Normal users â†’ push to Redis sorted sets</li><li>Celebrities â†’ pull at read time and merge</li><li>Feed stored as sorted set scored by timestamp</li><li>Cursor-based pagination (not offset â€” offset is O(n))</li></ul>`},
    {must:true,freq:4,cos:['amazon','google','microsoft'],q:"Explain the CAP theorem with real examples.",tags:['theory','hard'],
     a:`<p>A distributed system can only guarantee 2 of: <strong>Consistency, Availability, Partition Tolerance</strong>. Since network partitions WILL happen, choose CP or AP:</p><ul><li><strong>CP:</strong> HBase, Zookeeper, MongoDB (default) â€” sacrifice availability during partition</li><li><strong>AP:</strong> Cassandra, DynamoDB (default) â€” serve potentially stale data during partition</li><li><strong>CA:</strong> Traditional RDBMS (single node) â€” not truly distributed</li></ul>`},
    {must:true,freq:4,cos:['amazon','google','microsoft','netflix'],q:"Design a distributed rate limiter for a public API.",tags:['tech','hard'],
     a:`<p><strong>Requirement:</strong> 1000 req/hour per API key across multiple servers.</p><p><strong>Sliding Window with Redis (atomic Lua script):</strong></p><pre>-- On each request:
ZREMRANGEBYSCORE key 0 (now - 3600000)  -- remove old entries
count = ZCARD key
if count < 1000:
    ZADD key now now   -- add this request
    return ALLOW
return REJECT</pre><p><strong>Headers:</strong> <code>X-RateLimit-Limit: 1000</code>, <code>X-RateLimit-Remaining: 847</code>, <code>Retry-After: 3542</code></p>`},
    {freq:4,cos:['amazon','google','netflix'],q:"How would you design YouTube or a video streaming platform?",tags:['tech','hard'],
     a:`<p><strong>Upload:</strong> Client â†’ pre-signed S3 URL directly â†’ S3 triggers SQS â†’ Transcoding workers â†’ multiple resolutions (360p/720p/1080p/4K) + thumbnails.</p><p><strong>Streaming:</strong> HLS (HTTP Live Streaming) â€” 10s segments, client picks quality based on bandwidth (adaptive bitrate). CDN for popular content, cold in S3.</p><p><strong>Scale:</strong> View counter via Redis INCR (batch flush). Comments in Cassandra. Recommendations via Kafka â†’ ML pipeline.</p>`},
    {freq:3,cos:['amazon','google'],q:"Design a real-time chat system like WhatsApp.",tags:['tech','hard'],
     a:`<p><strong>Components:</strong></p><ul><li><strong>WebSocket:</strong> Each client maintains persistent WS connection to a chat server. Long polling as fallback.</li><li><strong>Routing:</strong> Recipient online â†’ route to their server via Redis pub/sub. Offline â†’ push via APNs/FCM.</li><li><strong>Storage:</strong> Cassandra (write-heavy, time-series). Schema: <code>(conversation_id, timestamp) â†’ message</code></li><li><strong>Delivery:</strong> Sent âœ“ â†’ Delivered âœ“âœ“ â†’ Read âœ“âœ“(blue) tracked in status table.</li></ul>`},
    {freq:3,cos:['amazon','google','microsoft'],q:"SQL vs NoSQL â€” when do you choose each?",tags:['theory','medium'],
     a:`<p><strong>SQL when:</strong> Clear relationships, ACID transactions (financial, inventory), complex JOINs, stable schema.</p><p><strong>NoSQL when:</strong> Massive horizontal scale, unstructured/changing schema, specific patterns: document (MongoDB), key-value (Redis), column (Cassandra), graph (Neo4j).</p><p><strong>Often both:</strong> PostgreSQL (transactions) + Redis (cache) + Elasticsearch (search).</p>`},
    {freq:3,cos:['amazon','microsoft'],q:"What is consistent hashing and why is it used?",tags:['theory','hard'],
     a:`<p>Consistent hashing minimizes data reshuffling when nodes join/leave a cluster. Keys and servers both map to points on a ring; each key is served by the next clockwise server.</p><p><strong>Without it:</strong> Adding one server â†’ all keys reshuffle (<code>key % N</code> vs <code>key % (N+1)</code>).</p><p><strong>With it:</strong> Only ~K/N keys move to the new node.</p><p><strong>Virtual nodes:</strong> Each physical server maps to multiple ring points for even load distribution.</p><p><strong>Used by:</strong> Amazon DynamoDB, Cassandra, Redis Cluster, Memcached.</p>`},
    {freq:2,cos:['amazon','google','microsoft'],q:"What is a CDN? How does it work?",tags:['theory','easy'],
     a:`<p>CDN = distributed servers (PoPs) serving content from locations close to users.</p><p><strong>Flow:</strong> User requests â†’ DNS resolves to nearest edge â†’ cache hit: serve immediately / cache miss: fetch from origin, cache, serve.</p><p><strong>Cache:</strong> Static assets (JS, CSS, images), videos, API responses with <code>Cache-Control</code> headers.</p><p><strong>Invalidation:</strong> File versioning (<code>app.v2.js</code>) or CDN purge API on deploy.</p>`},
    {freq:2,cos:['amazon','google','meta'],q:"Microservices vs monolith â€” honest tradeoffs.",tags:['theory','medium'],
     a:`<p><strong>Monolith strengths:</strong> Simple dev/testing, no network latency, atomic deployments, easier debugging.</p><p><strong>Microservices strengths:</strong> Independent deploy/scale per service, fault isolation, team autonomy, polyglot.</p><p><strong>Microservices costs:</strong> Distributed tracing, eventual consistency, service discovery, much higher ops overhead.</p><p><strong>Rule:</strong> Start monolith. Extract services only when you have clear domain boundaries AND scaling needs that justify the operational cost.</p>`},
    {freq:3,cos:['amazon','google','netflix'],q:"Design a notification system for 1M+ users.",tags:['tech','hard'],
     a:`<p><strong>Pipeline:</strong> User action â†’ Kafka â†’ Notification service â†’ applies user preferences â†’ Fan-out service â†’ per-channel delivery workers (APNs/FCM, Email/SendGrid, SMS/Twilio, In-app).</p><p><strong>Key design choices:</strong></p><ul><li>Redis deduplication SET with TTL prevents duplicate notifications</li><li>Priority queues: transaction alerts > social > marketing</li><li>User preferences (DND, channel opt-ins) in Redis for fast lookups</li></ul>`},
    {freq:2,cos:['amazon','google','microsoft'],q:"How do you approach a system design interview?",tags:['theory','medium'],
     a:`<p><strong>Framework (45 minutes):</strong></p><ol><li><strong>Clarify (5 min):</strong> "Read-heavy or write-heavy?" "How many users?" "Latency requirement?" "What's in/out of scope?"</li><li><strong>Estimate scale (5 min):</strong> DAU, requests/sec, storage. Back-of-envelope math shows you think about scale.</li><li><strong>High-level design (10 min):</strong> Client â†’ CDN â†’ Load Balancer â†’ App Servers â†’ DB/Cache. Draw all major components.</li><li><strong>Deep dive (20 min):</strong> Pick 2-3 interesting parts. Schema, API design, consistency tradeoffs.</li><li><strong>Scale + bottlenecks (5 min):</strong> "Where does this break at 10x? How would you fix it?"</li></ol><p>Say assumptions out loud. Trade-off discussions show senior thinking.</p>`},
    {freq:2,cos:['amazon','google'],q:"What is eventual consistency? When is it acceptable?",tags:['theory','medium'],
     a:`<p>Eventual consistency: if no new updates, all replicas will converge â€” but reads immediately after a write may return stale data.</p><p><strong>Acceptable:</strong> Social media like counts, product view counts, shopping cart (brief inconsistency OK).</p><p><strong>NOT acceptable:</strong> Bank balance, inventory (can't oversell last item), authentication (password change must propagate instantly).</p><p><strong>Patterns:</strong> Read your own writes, monotonic reads, version vectors, CRDTs.</p>`},
    {freq:2,cos:['amazon','google','microsoft'],q:"Load balancing â€” algorithms explained.",tags:['theory','medium'],
     a:`<p><strong>Algorithms:</strong></p><ul><li><strong>Round robin:</strong> Rotate through servers. Simple, good for equal servers.</li><li><strong>Weighted round robin:</strong> Higher-capacity servers get more traffic.</li><li><strong>Least connections:</strong> Route to server with fewest active connections. Best for variable request duration.</li><li><strong>IP hash:</strong> Same client â†’ same server (sticky sessions). Useful when session can't be in shared storage.</li></ul><p><strong>L4 vs L7:</strong> L4 routes by IP/TCP (fast). L7 routes by HTTP content, headers, URLs (smart â€” enables A/B testing, auth at LB level).</p>`},
    {freq:2,cos:['amazon','google'],q:"What is database sharding and how do you choose a shard key?",tags:['theory','hard'],
     a:`<p>Sharding splits data horizontally across multiple database servers.</p><p><strong>Strategies:</strong></p><ul><li><strong>Range sharding:</strong> A-M on shard 1, N-Z on shard 2. Enables range queries. Hotspot risk.</li><li><strong>Hash sharding:</strong> <code>shard = hash(user_id) % N</code>. Even distribution. Hard to rebalance.</li><li><strong>Consistent hashing:</strong> Best for rebalancing â€” only ~1/N keys move when adding a shard.</li></ul><p><strong>Good shard key:</strong> High cardinality, even distribution, aligns with query patterns. Avoid: time-based keys (hotspots), keys causing cross-shard JOINs.</p>`},
    {freq:2,cos:['amazon','google','microsoft'],q:"Design search autocomplete / typeahead.",tags:['tech','hard'],
     a:`<p><strong>Data structure:</strong> Trie (prefix tree). Pre-computed top-K completions per prefix.</p><p><strong>System:</strong></p><ul><li>Log all queries â†’ Kafka â†’ Spark batch computes top-N per prefix</li><li>Store in Redis: <code>typeahead:pyth â†’ ["python","python tutorial"]</code></li><li>API: <code>GET /autocomplete?q=pyth</code> â†’ Redis lookup â†’ return top 5 in &lt;10ms</li><li>Ranking: frequency Ã— recency Ã— personalization</li><li>Scale: shard Redis by first 2 chars. CDN cache for popular 1-3 char prefixes.</li></ul>`},
    {freq:2,cos:['amazon','google','netflix'],q:"How do you design for high availability (HA)?",tags:['theory','medium'],
     a:`<p>99.9% = 8.7h/year downtime | 99.99% = 52min/year | 99.999% = 5min/year</p><p><strong>Strategies:</strong></p><ul><li><strong>Redundancy:</strong> No single points of failure. Multiple app servers, DB replicas, multi-AZ.</li><li><strong>Health checks + auto-healing:</strong> Load balancer removes unhealthy instances. K8s restarts failed pods.</li><li><strong>Graceful degradation:</strong> Recommendations down â†’ show default content, don't fail the page.</li><li><strong>Circuit breaker:</strong> Stop calling failing service, return fallback â€” prevents cascades.</li><li><strong>Blue-green deployment:</strong> Switch traffic instantly. Instant rollback.</li><li><strong>Multi-region:</strong> Active-active or active-passive for disaster recovery.</li></ul>`},
    {freq:2,cos:['amazon','google'],q:"Message queues â€” Kafka vs RabbitMQ vs SQS.",tags:['theory','medium'],
     a:`<p><strong>Kafka:</strong> Distributed log, messages retained days/weeks, consumers can replay. Millions/sec. For: event streaming, audit logs, real-time analytics, ML pipelines.</p><p><strong>RabbitMQ:</strong> Traditional broker, flexible routing, message deleted after ACK. For: task queues, RPC patterns, complex routing.</p><p><strong>SQS:</strong> Managed, at-least-once delivery, zero ops. FIFO variant for ordered. For: AWS-native apps needing a simple queue.</p>`},
    {freq:2,cos:['amazon','google'],q:"Caching patterns: Cache-aside, Read-through, Write-through, Write-back.",tags:['theory','medium'],
     a:`<p><strong>Cache-aside (Lazy):</strong> App checks cache â†’ miss: load from DB, write to cache. Most common. Can go stale â€” use TTL.</p><p><strong>Read-through:</strong> Cache fetches from DB automatically on miss. Transparent to app. Cold start is slow.</p><p><strong>Write-through:</strong> Every write goes to cache AND DB. Always consistent. Slow for write-heavy apps.</p><p><strong>Write-back:</strong> Write to cache only, async sync to DB later. Fastest writes. Risk: data loss if cache fails before sync.</p>`},
    {freq:2,cos:['amazon','meta'],q:"Design a leaderboard for a multiplayer game.",tags:['tech','medium'],
     a:`<p><strong>Redis Sorted Set â€” perfect fit:</strong></p><pre>ZADD leaderboard 9450 "user:alice"          # O(log N)
ZINCRBY leaderboard 50 "user:alice"         # increment  O(log N)
ZREVRANGE leaderboard 0 9 WITHSCORES        # top 10     O(log N + K)
ZREVRANK leaderboard "user:alice"           # user rank  O(log N)
ZSCORE leaderboard "user:alice"             # score      O(1)</pre><p><strong>Scale:</strong> Shard by game_id. Persist to PostgreSQL async. Redis TTL for seasonal leaderboards.</p>`},
  ],

  behavioral:[
    {must:true,freq:5,cos:['amazon','google','meta','microsoft'],q:"Tell me about yourself. (The 2-minute pitch)",tags:['behavioral','easy'],
     a:`<p><strong>Structure â€” Past â†’ Present â†’ Future:</strong></p><div class="star-box"><h5>Framework</h5><div class="star-row"><div class="star-label">PAST</div><div class="star-text">Brief, relevant background. "I'm a software engineer with 4 years of experience building scalable backend systems, most recently at [Company] where I led the API platform team."</div></div><div class="star-row"><div class="star-label">PRESENT</div><div class="star-text">Current role + proudest achievement. Be specific. "I own our checkout service handling $50M/month, and recently reduced latency by 40% through a Redis caching layer I designed."</div></div><div class="star-row"><div class="star-label">FUTURE</div><div class="star-text">Why this company. Show you've done research. "I'm excited about [Company]'s work on [specific product/mission] and believe my background in distributed systems aligns well with the challenges at your scale."</div></div></div>`},
    {must:true,freq:5,cos:['amazon','google','meta','microsoft'],q:"Tell me about a time you resolved a conflict with a teammate.",tags:['behavioral','medium'],
     a:`<div class="star-box"><h5>STAR Framework</h5><div class="star-row"><div class="star-label">Situation</div><div class="star-text">A senior teammate and I disagreed on the database schema for a new feature. They wanted a single denormalized table; I felt it would cause long-term maintenance issues.</div></div><div class="star-row"><div class="star-label">Task</div><div class="star-text">Align on a design without damaging the relationship or blocking our 2-week deadline.</div></div><div class="star-row"><div class="star-label">Action</div><div class="star-text">I asked for a 30-minute session where we each presented our approach with concrete criteria: query performance, ease of future migration, and team familiarity. I acknowledged the short-term benefits of their approach, then proposed a proof-of-concept with synthetic data to compare query speeds objectively. The data sided with the normalized approach; they agreed.</div></div><div class="star-row"><div class="star-label">Result</div><div class="star-text">We shipped on time with the normalized schema. Six months later we added a new entity type with no refactoring needed â€” I shared that win with the team.</div></div></div>`},
    {must:true,freq:5,cos:['amazon','google','meta','microsoft'],q:"Tell me about a time you worked under extreme pressure or a tight deadline.",tags:['behavioral','medium'],
     a:`<div class="star-box"><h5>STAR Framework</h5><div class="star-row"><div class="star-label">Situation</div><div class="star-text">Two days before a major product launch, our payment provider announced a breaking API change that would require rewriting our entire checkout integration.</div></div><div class="star-row"><div class="star-label">Task</div><div class="star-text">Complete a 3-week migration in 48 hours with zero payment downtime during the rollout.</div></div><div class="star-row"><div class="star-label">Action</div><div class="star-text">I immediately documented the breaking changes, broke the work into parallel tasks, and delegated based on team strengths. I communicated status to stakeholders every 4 hours. I used feature flags to gradually route traffic â€” starting with 1% of users â€” so we could catch issues early without impacting the full user base.</div></div><div class="star-row"><div class="star-label">Result</div><div class="star-text">Completed migration in 38 hours. 0.2% error rate during rollout (down to 0% within 2 hours). Product launched on schedule. Post-mortem led to a new vendor API change communication process.</div></div></div>`},
    {must:true,freq:5,cos:['amazon','google','meta'],q:"Tell me about a time you failed. What did you learn?",tags:['behavioral','medium'],
     a:`<div class="star-box"><h5>STAR Framework</h5><div class="star-row"><div class="star-label">Situation</div><div class="star-text">I underestimated the complexity of a real-time notification feature and committed to a 3-week timeline that should have been 8 weeks. I didn't want to push back in front of the leadership team.</div></div><div class="star-row"><div class="star-label">Task</div><div class="star-text">The sprint was failing two weeks in; we had committed to this feature for a marketing campaign.</div></div><div class="star-row"><div class="star-label">Action</div><div class="star-text">I owned the failure immediately â€” told my manager directly that I had misjudged and explained the technical blockers I hadn't anticipated. I came with a revised plan: delay two lower-priority features to focus the team, and presented a reduced MVP scope that would still satisfy the marketing goal.</div></div><div class="star-row"><div class="star-label">Result</div><div class="star-text">We hit the campaign date with the MVP. Since then, I use a "3-point estimation" approach (optimistic, realistic, pessimistic) and buffer estimates by 30% when unknown dependencies exist.</div></div></div>`},
    {must:true,freq:4,cos:['amazon','google','meta'],q:"Tell me about a project you're most proud of.",tags:['behavioral','medium'],
     a:`<div class="star-box"><h5>Framework</h5><div class="star-row"><div class="star-label">What</div><div class="star-text">Describe the project scope, your role, the technical challenges, and what made it significant. Focus on YOUR specific contributions, not the team's.</div></div><div class="star-row"><div class="star-label">Why hard</div><div class="star-text">Highlight the genuine difficulty â€” ambiguity, scale, time pressure, unknown territory. Interviewers want to see that you thrive in complex situations.</div></div><div class="star-row"><div class="star-label">Impact</div><div class="star-text">Quantify: users affected, latency reduced, revenue saved, time saved. "$X improvement" or "reduced by Y%" are far stronger than "significant improvement".</div></div><div class="star-row"><div class="star-label">Learnings</div><div class="star-text">What would you do differently? Shows growth mindset. "I'd do the database schema spike first, before writing any application code."</div></div></div>`},
    {must:true,freq:4,cos:['amazon','microsoft'],q:"Where do you see yourself in 5 years?",tags:['behavioral','easy'],
     a:`<p><strong>What interviewers actually want to know:</strong></p><ul><li>Are you ambitious but realistic?</li><li>Do your goals align with what this role can provide?</li><li>Are you likely to stay engaged and grow, not leave in 6 months?</li></ul><p><strong>Strong answer structure:</strong></p><ul><li>Short-term (1-2 years): master the skills of this role, establish trust, understand the product and users deeply</li><li>Medium-term (3-5 years): based on the company's track record, naturally grow into [senior/staff/lead] responsibilities â€” technically or across product areas</li><li>Optional: mention interest in mentorship, architecture decisions, cross-team influence</li></ul><p><strong>Avoid:</strong> "I want to be a manager" (unless this role leads there), "I want to start my own company" (screams short tenure), vague non-answers.</p>`},
    {freq:4,cos:['amazon','google','meta'],q:"How do you prioritize when you have too many tasks?",tags:['behavioral','medium'],
     a:`<div class="star-box"><h5>STAR Framework</h5><div class="star-row"><div class="star-label">Situation</div><div class="star-text">In Q4 I had 6 concurrent projects: 2 were my primary ownership, 2 were cross-team collaborations, and 2 were urgent escalations from support.</div></div><div class="star-row"><div class="star-label">Task</div><div class="star-text">Deliver reliably without burning out or dropping anything critical.</div></div><div class="star-row"><div class="star-label">Action</div><div class="star-text">I listed everything, then scored each item on impact Ã— urgency and had a 15-minute conversation with my manager to align on the top 3. For the lower-priority items, I set explicit expectations with stakeholders ("I'll pick this up in 2 weeks, does that work?"). I blocked 2 uninterrupted hours each morning for deep work on the highest-priority item.</div></div><div class="star-row"><div class="star-label">Result</div><div class="star-text">Delivered all three top-priority projects on time. Two lower-priority items were deprioritized with full stakeholder awareness â€” no surprises.</div></div></div>`},
    {freq:4,cos:['amazon','google'],q:"Tell me about a time you influenced without authority.",tags:['behavioral','hard'],
     a:`<div class="star-box"><h5>STAR Framework</h5><div class="star-row"><div class="star-label">Situation</div><div class="star-text">I noticed our mobile team and backend team were designing conflicting API contracts for the same feature. I had no authority over either team.</div></div><div class="star-row"><div class="star-label">Task</div><div class="star-text">Get alignment before two separate implementations caused a late-breaking refactor.</div></div><div class="star-row"><div class="star-label">Action</div><div class="star-text">I spent an afternoon building a quick API contract doc + a mock server, then sent it to both tech leads with a "would love your thoughts" tone â€” not "you're doing it wrong." I framed the business case: a misaligned API would cost roughly 3 weeks of rework at launch. Both leads appreciated the early flag and we had a 1-hour alignment session. I volunteered to own the contract doc going forward.</div></div><div class="star-row"><div class="star-label">Result</div><div class="star-text">Both teams adopted the aligned spec. Feature shipped with zero cross-team integration bugs. API contract process became our standard for new features.</div></div></div>`},
    {freq:3,cos:['amazon','microsoft'],q:"Describe a time you had to learn something new very quickly.",tags:['behavioral','medium'],
     a:`<div class="star-box"><h5>STAR Framework</h5><div class="star-row"><div class="star-label">Situation</div><div class="star-text">Inherited a critical Kubernetes cluster I had never operated, one week before a major product launch.</div></div><div class="star-row"><div class="star-label">Task</div><div class="star-text">Become productive enough to handle on-call escalations without putting the launch at risk.</div></div><div class="star-row"><div class="star-label">Action</div><div class="star-text">I set up a personal learning cluster the first day, spent evenings doing the official CKA prep material, and paired with the outgoing engineer for 2 hours each morning to go through runbooks together. I documented everything I learned in a shared wiki so the knowledge wouldn't be siloed again.</div></div><div class="star-row"><div class="star-label">Result</div><div class="star-text">Handled 3 escalations independently during the launch week. Wiki became team's primary K8s reference. I received the most positive peer review comments that quarter for proactive knowledge sharing.</div></div></div>`},
    {freq:3,cos:['amazon','meta'],q:"Tell me about a time you gave or received difficult feedback.",tags:['behavioral','medium'],
     a:`<div class="star-box"><h5>Giving Feedback Example</h5><div class="star-row"><div class="star-label">Situation</div><div class="star-text">A junior engineer on my team was submitting PRs that frequently lacked tests, slowing down the whole team's review cycle.</div></div><div class="star-row"><div class="star-label">Task</div><div class="star-text">Address the pattern without discouraging someone who was otherwise doing good work.</div></div><div class="star-row"><div class="star-label">Action</div><div class="star-text">I asked to pair on their next PR. I didn't mention the pattern â€” I just wrote tests together, explained my thinking out loud. Afterward in 1:1 I shared: "I noticed testing isn't always the first instinct â€” that's normal early on. Would it help to have a testing checklist before submitting?" They took the offer.</div></div><div class="star-row"><div class="star-label">Result</div><div class="star-text">Test coverage in their PRs went from ~30% to ~85% over the next 4 sprints. No defensiveness. They thanked me three months later.</div></div></div>`},
    {freq:3,cos:['amazon','google','meta'],q:"How do you handle ambiguity? Give an example.",tags:['behavioral','hard'],
     a:`<div class="star-box"><h5>STAR Framework</h5><div class="star-row"><div class="star-label">Situation</div><div class="star-text">Given a vague directive: "Improve the search experience." No success metrics, no scope, no timeline.</div></div><div class="star-row"><div class="star-label">Task</div><div class="star-text">Turn ambiguity into a defined project with measurable goals.</div></div><div class="star-row"><div class="star-label">Action</div><div class="star-text">I started with 1-week discovery: analytics (what do users search for? where do they abandon?), 5 user interviews, and a review of support tickets mentioning "search." I synthesized findings into a one-pager: 3 problem statements, 2 metrics (search-to-click rate, zero-result rate), and 3 proposed solutions ranked by effort vs. impact. Brought this to stakeholders for 30-minute alignment before writing a line of code.</div></div><div class="star-row"><div class="star-label">Result</div><div class="star-text">Got sign-off on scope in one meeting. Delivered top solution in 6 weeks. Search-to-click rate up 18%. Zero-result rate down 40%.</div></div></div>`},
    {freq:3,cos:['amazon','microsoft'],q:"Tell me about a time you improved a process or made something more efficient.",tags:['behavioral','medium'],
     a:`<div class="star-box"><h5>STAR Framework</h5><div class="star-row"><div class="star-label">Situation</div><div class="star-text">Our team's deployment process required 4 manual steps, a Slack message to DevOps, and 2 hours of waiting for approval â€” even for hotfixes.</div></div><div class="star-row"><div class="star-label">Task</div><div class="star-text">Reduce deployment friction without sacrificing safety.</div></div><div class="star-row"><div class="star-label">Action</div><div class="star-text">I mapped the existing process and identified that 80% of the wait time was approval for non-production deployments. I built a GitHub Actions pipeline that automated staging deploys and added automated smoke tests in place of manual checks. Worked with DevOps to create a tiered approval system: staging = no approval, production = 1 approval.</div></div><div class="star-row"><div class="star-label">Result</div><div class="star-text">Staging deploy time from 2 hours to 8 minutes. Production deploy from 2 hours to 20 minutes. Team shipped 3x more frequently the next quarter.</div></div></div>`},
    {freq:2,cos:['amazon','google'],q:"Describe a situation where you had to make a decision with incomplete information.",tags:['behavioral','hard'],
     a:`<div class="star-box"><h5>STAR Framework</h5><div class="star-row"><div class="star-label">Situation</div><div class="star-text">A production issue affecting 5% of users needed immediate mitigation. We had 30 minutes of logs and 2 plausible root causes â€” no way to definitively confirm either without a deeper investigation that would take hours.</div></div><div class="star-row"><div class="star-label">Task</div><div class="star-text">Make a call to restore service while root cause was still uncertain.</div></div><div class="star-row"><div class="star-label">Action</div><div class="star-text">I assessed which cause had a lower-risk mitigation and was more likely based on the evidence. I documented my reasoning in the incident Slack channel (for full transparency), implemented the mitigation, and set up monitoring to confirm it worked â€” while simultaneously asking a teammate to continue investigating the alternative cause.</div></div><div class="star-row"><div class="star-label">Result</div><div class="star-text">Service restored in 22 minutes. My hypothesis was correct. Post-mortem praise for clear decision-making under pressure. Added a new alert that would have caught this 4 hours earlier.</div></div></div>`},
    {freq:3,cos:['amazon','google','meta'],q:"Why do you want to work here? Why this company?",tags:['behavioral','easy'],
     a:`<p><strong>What NOT to say:</strong> "Great compensation." "Everyone knows you're a great company." "Job security." (Generic â†’ forgettable.)</p><p><strong>Strong answer = 3 authentic reasons:</strong></p><ol><li><strong>Product/mission alignment:</strong> Specific feature or initiative that genuinely excites you. "I've used [product] for X years and care deeply about the problem it solves."</li><li><strong>Technical challenge:</strong> A specific engineering problem this company faces at scale that you want to work on. Shows you've done research.</li><li><strong>People/culture:</strong> Something you've read or heard from employees â€” blog posts, conference talks, team members you've spoken to.</li></ol><p><strong>Closing:</strong> "I believe I can make a meaningful contribution to [specific area], and I want to grow in ways that this role uniquely enables."</p>`},
    {freq:2,cos:['amazon','microsoft'],q:"Tell me about a time you had a difficult manager or stakeholder.",tags:['behavioral','hard'],
     a:`<div class="star-box"><h5>STAR Framework â€” Tread carefully: never speak negatively</h5><div class="star-row"><div class="star-label">Situation</div><div class="star-text">A key stakeholder frequently changed requirements mid-sprint without going through the normal process, which was causing team morale issues and missed estimates.</div></div><div class="star-row"><div class="star-label">Task</div><div class="star-text">Maintain the relationship while protecting team capacity and delivery reliability.</div></div><div class="star-row"><div class="star-label">Action</div><div class="star-text">I requested a 1:1 with the stakeholder. I came with empathy first â€” "I want to make sure we're always delivering what matters most to you." Then I showed the impact data: 4 mid-sprint scope changes â†’ 2 missed sprint goals â†’ team frustration. I proposed a "change request" process with a 1-business-day turnaround for evaluation. I made it easy for them by creating a simple template.</div></div><div class="star-row"><div class="star-label">Result</div><div class="star-text">They adopted the process within 2 weeks. Mid-sprint changes dropped 80%. Sprint completion rate went from 60% to 90% that quarter.</div></div></div>`},
    {freq:3,cos:['amazon','google','meta','microsoft'],q:"What are your biggest strengths and weaknesses?",tags:['behavioral','easy'],
     a:`<p><strong>Strengths â€” pick 1-2 with concrete examples:</strong></p><ul><li>Systems thinking: "I naturally see how changes ripple across a system, which helps me write code that's robust to future changes."</li><li>Collaborative debugging: "I'm often the person called when others are stuck â€” I'm patient and ask the right questions."</li></ul><p><strong>Weaknesses â€” rules for a good answer:</strong></p><ul><li>REAL weakness (not "I work too hard")</li><li>Show self-awareness AND what you're actively doing about it</li><li>Not a core requirement of the role you're interviewing for</li></ul><p><strong>Example:</strong> "I used to avoid pushing back on scope creep because I wanted to be seen as someone who says yes. I've since learned to quantify trade-offs explicitly â€” 'We can add X, but it means Y slips by 2 weeks' â€” which makes the conversation objective, not personal."</p>`},
    {freq:2,cos:['amazon','google'],q:"Tell me about a time you advocated for users or customers.",tags:['behavioral','medium'],
     a:`<div class="star-box"><h5>STAR Framework</h5><div class="star-row"><div class="star-label">Situation</div><div class="star-text">We were about to launch a feature that looked great in demos but required 7 steps to complete the core task. Business metrics looked fine; no one was looking at task completion rates.</div></div><div class="star-row"><div class="star-label">Task</div><div class="star-text">Ensure the feature actually served users, not just business metrics.</div></div><div class="star-row"><div class="star-label">Action</div><div class="star-text">I ran 5 informal user tests with colleagues before launch. 4 out of 5 couldn't complete the task in under 5 minutes. I created a 2-minute demo video showing the pain points and presented it at the pre-launch review with a specific, low-effort proposal: reduce 7 steps to 3 by combining 4 confirmation screens into 1.</div></div><div class="star-row"><div class="star-label">Result</div><div class="star-text">Proposal accepted. 2-week delay. Post-launch: task completion rate 82% (our target was 70%). NPS on this feature: +34. Leadership cited user testing as a new standard for future features.</div></div></div>`},
    {freq:2,cos:['microsoft','amazon'],q:"How do you keep your technical skills current?",tags:['behavioral','easy'],
     a:`<p><strong>Strong answer elements:</strong></p><ul><li><strong>Active learning:</strong> "I dedicate 30-60 min/day to something not directly in my current work â€” currently working through the DDIA (Designing Data-Intensive Applications) book and building a small project with Go."</li><li><strong>Community:</strong> Follow key technical blogs/papers â€” Morning Paper, highscalability.com, specific company engineering blogs (Stripe, Netflix, Meta).</li><li><strong>Building:</strong> Side projects force you to encounter real problems. "I recently built a full-stack app with Next.js and Supabase purely to understand how RSC and server actions work in practice."</li><li><strong>Network:</strong> Attend meetups, conferences, or watch conference talks (StrangeLoop, QCon).</li></ul><p><strong>Avoid:</strong> "I take online courses" (passive, unverifiable). Show you actively <em>apply</em> what you learn.</p>`},
    {freq:2,cos:['amazon','google','meta'],q:"Tell me about a time you mentored someone.",tags:['behavioral','medium'],
     a:`<div class="star-box"><h5>STAR Framework</h5><div class="star-row"><div class="star-label">Situation</div><div class="star-text">Onboarded a junior engineer who was strong technically but struggled with cross-team communication, often getting frustrated when other teams had different priorities.</div></div><div class="star-row"><div class="star-label">Task</div><div class="star-text">Help them become effective in the collaborative, matrix environment we work in.</div></div><div class="star-row"><div class="star-label">Action</div><div class="star-text">We had weekly 1:1s where I'd roleplay difficult conversations before they happened. I shared the "frame as a business case" technique â€” instead of "can you help me?", try "if we prioritize this, here's the impact on metric X." I invited them into my stakeholder meetings as an observer, then gradually let them lead with me as backup.</div></div><div class="star-row"><div class="star-label">Result</div><div class="star-text">Within 3 months they independently secured cross-team buy-in on a new API design. Got promoted 6 months ahead of typical timeline. Mentoring them also sharpened my own communication instincts.</div></div></div>`},
  ],

};

// â”€â”€ DERIVED CATEGORY BUILDERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function buildMustPrepare() {
  const all = [];
  for (const [cat, qs] of Object.entries(IQ_ALL)) {
    qs.forEach(q => { if(q.must) all.push({...q,_cat:cat}); });
  }
  return all;
}

function buildMostAsked() {
  const all = [];
  for (const [cat, qs] of Object.entries(IQ_ALL)) {
    qs.forEach(q => { if(q.freq>=4) all.push({...q,_cat:cat}); });
  }
  return all.sort((a,b)=>b.freq-a.freq);
}

const IQ_CATEGORIES = {
  mustprepare: { label:'ğŸ”¥ Top 30 Must-Prepare', desc:'The 30 questions most likely to appear in any technical interview.', fn: buildMustPrepare },
  mostasked:   { label:'ğŸ“ˆ Most Asked 2025', desc:'Highest-frequency questions across all topics this year.', fn: buildMostAsked },
  python:      { label:'ğŸ Python', desc:'Core Python internals, OOP, memory, decorators, and more.', fn: ()=>IQ_ALL.python.map(q=>({...q,_cat:'python'})) },
  javascript:  { label:'âš¡ JavaScript', desc:'Closures, event loop, async, prototypes, modern JS patterns.', fn: ()=>IQ_ALL.javascript.map(q=>({...q,_cat:'javascript'})) },
  react:       { label:'âš›ï¸ React.js', desc:'Hooks, performance, state management, Server Components.', fn: ()=>IQ_ALL.react.map(q=>({...q,_cat:'react'})) },
  dsa:         { label:'ğŸ§  DSA / LeetCode', desc:'Arrays, trees, graphs, DP â€” with code and complexity analysis.', fn: ()=>IQ_ALL.dsa.map(q=>({...q,_cat:'dsa'})) },
  system:      { label:'ğŸ—ï¸ System Design', desc:'Scalable system architecture, distributed systems, tradeoffs.', fn: ()=>IQ_ALL.system.map(q=>({...q,_cat:'system'})) },
  sql:         { label:'ğŸ—„ï¸ SQL & Databases', desc:'Joins, indexes, window functions, transactions, optimization.', fn: ()=>IQ_ALL.sql.map(q=>({...q,_cat:'sql'})) },
  behavioral:  { label:'ğŸ¤ Behavioral / STAR', desc:'STAR-format answers for behavioral interviews.', fn: ()=>IQ_ALL.behavioral.map(q=>({...q,_cat:'behavioral'})) },
  theoretical: { label:'ğŸ“– Theoretical', desc:'Conceptual questions on CS fundamentals.', fn: ()=>Object.entries(IQ_ALL).flatMap(([cat,qs])=>qs.filter(q=>q.tags.includes('theory')).map(q=>({...q,_cat:cat}))) },
  technical:   { label:'ğŸ’» Technical / Coding', desc:'Hands-on coding and implementation questions.', fn: ()=>Object.entries(IQ_ALL).flatMap(([cat,qs])=>qs.filter(q=>q.tags.includes('tech')).map(q=>({...q,_cat:cat}))) },
};

let iqCurrentCat = 'mustprepare';
let iqCurrentType = 'all';
let iqOpenCards = new Set();
let iqXpAwarded = new Set();

function iqGetQuestions(cat, typeFilter='all') {
  const cfg = IQ_CATEGORIES[cat];
  if (!cfg) return [];
  let qs = cfg.fn();
  if (typeFilter !== 'all') {
    if (typeFilter === 'easy')   qs = qs.filter(q=>q.tags.includes('easy'));
    if (typeFilter === 'medium') qs = qs.filter(q=>q.tags.includes('medium'));
    if (typeFilter === 'hard')   qs = qs.filter(q=>q.tags.includes('hard'));
    if (typeFilter === 'must')   qs = qs.filter(q=>q.must);
  }
  return qs;
}

function iqShowCategory(cat, el) {
  iqCurrentCat = cat;
  iqCurrentType = 'all';
  document.querySelectorAll('.iq-sidebar-item').forEach(i=>i.classList.remove('active'));
  if(el) el.classList.add('active');
  renderIQContent(cat);
}

function iqSearch(query) {
  const q = query.trim().toLowerCase();
  const countEl = document.getElementById('iqSearchCount');
  if (!q) {
    countEl.textContent = '';
    renderIQContent(iqCurrentCat);
    return;
  }
  const all = Object.entries(IQ_ALL).flatMap(([cat,qs])=>qs.map(q=>({...q,_cat:cat})));
  const filtered = all.filter(item => item.q.toLowerCase().includes(q) || (item.a && item.a.replace(/<[^>]+>/g,'').toLowerCase().includes(q)));
  countEl.textContent = filtered.length + ' result' + (filtered.length!==1?'s':'') + ' for "' + query + '"';
  renderIQList(filtered, document.getElementById('iqContent'));
}

function renderIQContent(cat) {
  const el = document.getElementById('iqContent');
  if (!el) return;
  const cfg = IQ_CATEGORIES[cat] || IQ_CATEGORIES.mustprepare;
  const qs = iqGetQuestions(cat, iqCurrentType);
  document.getElementById('iqSearchCount').textContent = '';

  const mustBanner = cat === 'mustprepare' ? `
    <div class="must-banner">
      <div class="must-banner-icon">ğŸ”¥</div>
      <div class="must-banner-info">
        <h3>Top 30 Must-Prepare Questions â€” FAANG Level</h3>
        <p>Curated from thousands of real interview reports on Glassdoor, Blind, LeetCode Discuss, and Reddit. These questions appear in 70%+ of interviews at top companies. Master these before anything else.</p>
        <div class="company-tags">${coTags(['google','meta','amazon','microsoft','netflix'])}</div>
      </div>
    </div>` : '';

  const mostAskedChips = cat === 'mostasked' ? `
    <div class="most-asked-grid">
      ${[['ğŸ','Python','30','var(--accent)'],['âš¡','JavaScript','30','var(--yellow)'],['âš›ï¸','React','25','#61dafb'],['ğŸ§ ','DSA','25','#c084fc'],['ğŸ—ï¸','System Design','20','var(--green)'],['ğŸ—„ï¸','SQL','15','var(--accent2)']].map(([icon,name,count,color])=>`
        <div class="most-asked-chip" onclick="iqShowCategory('${name.toLowerCase().replace('.','').replace(' ','')}',document.querySelector('[onclick*=\\'${name.toLowerCase().replace('.','').replace(' ','')}\\']'))">
          <div class="mac-icon">${icon}</div>
          <div class="mac-label">${name}</div>
          <div class="mac-count">${count} questions</div>
          <div class="mac-freq" style="background:${color};opacity:0.5"></div>
        </div>`).join('')}
    </div>` : '';

  const typeTabs = `
    <div class="iq-type-tabs">
      ${[['all','All'],['must','Must Know'],['easy','Easy'],['medium','Medium'],['hard','Hard']].map(([v,l])=>`
        <button class="iq-type-tab${iqCurrentType===v?' active':''}" onclick="iqSetType('${v}')">${l}</button>`).join('')}
    </div>`;

  el.innerHTML = `
    <div class="iq-hero">
      <div class="iq-hero-eyebrow">ğŸ“š Interview Prep</div>
      <h2>${cfg.label}</h2>
      <p>${cfg.desc}</p>
      <div class="iq-hero-stats">
        <div class="iq-hero-stat"><strong>${qs.length}</strong> questions</div>
        <div class="iq-hero-stat"><strong>${qs.filter(q=>q.must).length}</strong> must-know</div>
        <div class="iq-hero-stat"><strong>${qs.filter(q=>q.tags.includes('hard')).length}</strong> hard</div>
      </div>
    </div>
    ${mustBanner}
    ${mostAskedChips}
    ${typeTabs}
    <div id="iqList"></div>`;

  renderIQList(qs, el.querySelector('#iqList'));
}

function renderIQList(qs, container) {
  if (!container) return;
  if (!qs.length) {
    container.innerHTML = '<div class="iq-empty"><div class="iq-empty-icon">ğŸ”</div><p>No questions match your filter. Try a different selection.</p></div>';
    return;
  }

  const catColors = {python:'var(--accent)',javascript:'var(--yellow)',react:'#61dafb',dsa:'#c084fc',system:'var(--green)',sql:'var(--accent2)',behavioral:'#f9a8d4'};

  container.innerHTML = '<div class="iq-questions">' + qs.map((q, i) => {
    const cardId = `iqc-${q._cat}-${i}`;
    const isOpen = iqOpenCards.has(cardId);
    const tags = [
      q.must ? '<span class="iq-tag must">ğŸ”¥ Must</span>' : '',
      q.tags.includes('theory') ? '<span class="iq-tag theory">Theory</span>' : '',
      q.tags.includes('tech') ? '<span class="iq-tag tech">Coding</span>' : '',
      q.tags.includes('behavioral') ? '<span class="iq-tag star">STAR</span>' : '',
      q.tags.includes('dsa') ? '<span class="iq-tag dsa">DSA</span>' : '',
      q.tags.includes('react') ? '<span class="iq-tag react">React</span>' : '',
      q.tags.includes('hard') ? '<span class="iq-tag hard">Hard</span>' : q.tags.includes('medium') ? '<span class="iq-tag medium">Medium</span>' : '<span class="iq-tag easy">Easy</span>',
    ].filter(Boolean).join('');

    const catDot = q._cat && catColors[q._cat] ? `<span style="display:inline-block;width:7px;height:7px;border-radius:50%;background:${catColors[q._cat]};margin-right:4px"></span>` : '';
    const catLabel = q._cat ? `<span style="font-family:'DM Mono',monospace;font-size:0.65rem;color:var(--muted)">${catDot}${q._cat}</span>` : '';

    return `<div class="iq-q-card${q.must?' must':''}${isOpen?' open':''}" id="${cardId}">
      <div class="iq-q-header" onclick="toggleIQCard('${cardId}')">
        <div class="iq-q-num">${i+1}</div>
        <div class="iq-q-body">
          <div class="iq-q-text">${q.q}</div>
          <div class="iq-q-meta">${tags}${catLabel}${q.freq?freqDots(q.freq):''}</div>
        </div>
        <a class="iq-share-icon" href="${buildTweetUrl(q.q, q._cat)}" target="_blank" rel="noopener" onclick="event.stopPropagation()" title="Tweet this question">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-4.714-6.231-5.401 6.231H2.742l7.73-8.835L1.254 2.25H8.08l4.259 5.631 5.905-5.631zm-1.161 17.52h1.833L7.084 4.126H5.117L17.083 19.77z"/></svg>
        </a>
        <div class="iq-q-arrow">â–¼</div>
      </div>
      <div class="iq-q-answer">
        ${q.a}
        <div class="iq-answer-footer">
          ${q.cos ? `<div class="co-tags">${coTags(q.cos)}</div>` : ''}
          <span>Asked at these companies</span>
          <div style="display:flex;gap:0.5rem;margin-left:auto;flex-wrap:wrap">
            <a class="iq-tweet-btn" href="${buildTweetUrl(q.q, q._cat)}" target="_blank" rel="noopener">
              <svg width="13" height="13" viewBox="0 0 24 24" fill="#1d9bf0"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-4.714-6.231-5.401 6.231H2.742l7.73-8.835L1.254 2.25H8.08l4.259 5.631 5.905-5.631zm-1.161 17.52h1.833L7.084 4.126H5.117L17.083 19.77z"/></svg>
              Tweet
            </a>
            <button class="iq-practice-btn" onclick="practiceWithAI('${q.q.replace(/'/g,'')}')">ğŸ™ Practice Now</button>
          </div>
        </div>
      </div>
    </div>`;
  }).join('') + '</div>';
}

function iqSetType(type) {
  iqCurrentType = type;
  renderIQContent(iqCurrentCat);
}

function toggleIQCard(id) {
  const card = document.getElementById(id);
  if (!card) return;
  const isOpen = card.classList.toggle('open');
  if (isOpen) iqOpenCards.add(id); else iqOpenCards.delete(id);
  // Award XP on first open
  if (isOpen && !iqXpAwarded.has(id)) {
    iqXpAwarded.add(id);
    addXP(2);
    if (typeof showXPToast === 'function') showXPToast(2, 'ğŸ“– Question opened');
  }
}

function buildTweetUrl(question, cat) {
  const catEmoji = {python:'ğŸ',javascript:'âš¡',react:'âš›ï¸',dsa:'ğŸ§ ',system:'ğŸ—ï¸',sql:'ğŸ—„ï¸',behavioral:'ğŸ¤'}[cat] || 'ğŸ’¡';
  const catLabel = {python:'#Python',javascript:'#JavaScript',react:'#ReactJS',dsa:'#DSA',system:'#SystemDesign',sql:'#SQL',behavioral:'#Behavioral'}[cat] || '#Interview';
  const short = question.length > 100 ? question.slice(0, 97) + 'â€¦' : question;
  const text = `${catEmoji} Interview Q: "${short}"\n\nCan you answer this? ğŸ‘‡\n\n${catLabel} #CodingInterview #TechJobs #LearnCraft`;
  return `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`;
}

function practiceWithAI(question) {
  showView('landing');
  setTimeout(() => {
    scrollToSection('interview');
    setTimeout(() => {
      const ai = document.getElementById('messagesArea');
      if (ai) {
        const welcome = document.getElementById('welcomeState');
        if (welcome) welcome.remove();
        addMsg('ai', `Let's practice this question:\n\n"${question}"\n\nTake your time and answer as you would in a real interview. I'll give you detailed feedback.`);
        iS.awaitingAnswer = true;
        const inp = document.getElementById('answerInput');
        if (inp) { inp.disabled = false; inp.placeholder = 'Type your answerâ€¦'; inp.focus(); }
        const sb = document.getElementById('sendBtn'); if (sb) sb.disabled = false;
        document.getElementById('startBtn').disabled = true;
        document.getElementById('sessionBadge').classList.add('visible');
        document.getElementById('resetBtn').style.display = 'block';
        document.getElementById('aiStatus').textContent = 'Listeningâ€¦';
      }
    }, 600);
  }, 300);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Patch showView to handle interview-questions init
const _origShowView = showView;
function showView(id) {
  document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
  const el = document.getElementById('view-' + id);
  if (el) el.classList.add('active');
  window.scrollTo(0, 0);
  if (id === 'dashboard') renderDashboard();
  if (id === 'assessment-select') renderAssessmentSelect();
  if (id === 'interview-questions') renderIQContent(iqCurrentCat);
}

window.addEventListener('load', () => {
  renderCatalog();
  renderAssessmentPromo();
  renderIQContent('mustprepare'); // pre-render

  // Scroll fade-in
  const obs = new IntersectionObserver(entries => {
    entries.forEach(e => { if(e.isIntersecting) e.target.classList.add('visible'); });
  }, {threshold:0.1,rootMargin:'0px 0px -50px 0px'});
  document.querySelectorAll('.fade-up').forEach((el,i) => {
    el.style.transitionDelay = (i%4*0.1)+'s';
    obs.observe(el);
  });
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CLERK + SUPABASE AUTH & PERSISTENCE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// â”€ Config (replace with your real keys) â”€â”€â”€â”€â”€â”€â”€
const CLERK_PUBLISHABLE_KEY =pk_test_ZnVuLWxhcmstOTguY2xlcmsuYWNjb3VudHMuZGV2JA;
const SUPABASE_URL          =https://drasirzlcosphbmefbkk.supabase.co ;
const SUPABASE_ANON_KEY     =eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRyYXNpcnpsY29zcGhibWVmYmtrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE3NzgxNTcsImV4cCI6MjA4NzM1NDE1N30.Ziqtf9PPLoetaUN_0F4g5zrmGOkAhpCTlt6udlVegHI ;

// â”€ Supabase client â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let sb = null;
function initSupabase() {
  if (typeof supabase === 'undefined') return;
  try {
    sb = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
  } catch(e) { console.warn('Supabase init failed:', e); }
}

// â”€ Save XP + progress to Supabase â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function saveProgressToSupabase() {
  if (!sb || !state.clerkUserId) return;
  try {
    await sb.from('user_progress').upsert({
      user_id: state.clerkUserId,
      xp: state.xp,
      updated_at: new Date().toISOString(),
    }, { onConflict: 'user_id' });
  } catch(e) { /* silent â€” offline OK */ }
}

// Load saved XP from Supabase on login
async function loadProgressFromSupabase(userId) {
  if (!sb || !userId) return;
  try {
    const { data } = await sb.from('user_progress').select('xp').eq('user_id', userId).single();
    if (data?.xp) { state.xp = data.xp; document.getElementById('xpBadge').textContent = `âš¡ ${state.xp} XP`; }
  } catch(e) { /* no saved data yet */ }
}

// â”€ Override updateXP to also save â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const _origUpdateXP = updateXP;
function updateXP(amount) {
  _origUpdateXP(amount);
  if (amount > 0) saveProgressToSupabase();
}

// â”€ Auth state helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function setLoggedInUI(user) {
  state.loggedIn = true;
  state.clerkUserId = user.id;
  const name = user.firstName || user.emailAddresses?.[0]?.emailAddress?.split('@')[0] || 'Learner';
  const email = user.emailAddresses?.[0]?.emailAddress || '';
  const initials = (user.firstName?.[0] || '') + (user.lastName?.[0] || name[1] || '');
  document.getElementById('navLinks').innerHTML = `
    <li><a onclick="showView('dashboard')">Dashboard</a></li>
    <li><a onclick="showView('interview-questions')" style="color:var(--yellow);font-weight:600">ğŸ”¥ Interview Qs</a></li>
    <li><a onclick="showView('assessment-select')">ğŸ“ Assessments</a></li>
    <li><a onclick="showView('landing');setTimeout(()=>scrollToSection('interview'),100)">ğŸ™ AI Interview</a></li>
  `;
  document.getElementById('navUser').classList.add('show');
  const av = document.getElementById('navAvatar');
  if (av) av.textContent = initials.toUpperCase() || 'LC';
  const ddName = document.getElementById('ddName');
  const ddEmail = document.getElementById('ddEmail');
  if (ddName) ddName.textContent = `${user.firstName || ''} ${user.lastName || ''}`.trim() || name;
  if (ddEmail) ddEmail.textContent = email;
  loadProgressFromSupabase(user.id);
}

function setLoggedOutUI() {
  state.loggedIn = false;
  state.clerkUserId = null;
  document.getElementById('navLinks').innerHTML = `
    <li><a onclick="showView('landing');scrollToSection('courses')">Courses</a></li>
    <li><a onclick="showView('landing');scrollToSection('platform')">Platform</a></li>
    <li><a onclick="showView('assessment-select')">ğŸ“ Assessments</a></li>
    <li><a onclick="showView('interview-questions')" style="color:var(--yellow);font-weight:600">ğŸ”¥ Interview Qs</a></li>
    <li><a onclick="showView('landing');scrollToSection('interview')">ğŸ™ AI Interview</a></li>
    <li><a onclick="showView('landing');scrollToSection('pricing')">Pricing</a></li>
    <li><a class="nav-cta" onclick="showView('signup')">Start Free</a></li>
  `;
  document.getElementById('navUser').classList.remove('show');
}

// â”€ Clerk initialization â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function initClerk() {
  initSupabase();
  if (CLERK_PUBLISHABLE_KEY ===pk_test_ZnVuLWxhcmstOTguY2xlcmsuYWNjb3VudHMuZGV2JA) {
    // Dev mode: wire up simulateLogin (no real Clerk)
    console.info('LearnCraft: Running in demo mode. Add your Clerk key to enable real auth.');
    return;
  }
  try {
    await window.Clerk?.load();
    if (window.Clerk?.user) {
      setLoggedInUI(window.Clerk.user);
    }
    window.Clerk?.addListener(({ user }) => {
      if (user) setLoggedInUI(user);
      else setLoggedOutUI();
    });
  } catch(e) {
    console.warn('Clerk init error:', e);
  }
}

// â”€ Auth handlers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function handleLogin() {
  const email = document.getElementById('loginEmail')?.value.trim();
  const password = document.getElementById('loginPassword')?.value;
  const btn = document.getElementById('loginBtn');
  const errEl = document.getElementById('loginError');
  if (!email || !password) { showAuthError(errEl, 'Please enter your email and password.'); return; }
  if (CLERK_PUBLISHABLE_KEY ===pk_test_ZnVuLWxhcmstOTguY2xlcmsuYWNjb3VudHMuZGV2JA) {
    // Demo mode: simulate login
    simulateLogin(); return;
  }
  btn.disabled = true;
  btn.innerHTML = '<span class="auth-spinner"></span>Signing inâ€¦';
  errEl.classList.remove('show');
  try {
    const signIn = await window.Clerk.client.signIn.create({ identifier: email, password });
    await window.Clerk.setActive({ session: signIn.createdSessionId });
    showView('dashboard');
  } catch(e) {
    showAuthError(errEl, e.errors?.[0]?.message || 'Invalid email or password. Please try again.');
    btn.disabled = false;
    btn.textContent = 'Sign in to LearnCraft';
  }
}

async function handleSignup() {
  const first = document.getElementById('signupFirst')?.value.trim();
  const last  = document.getElementById('signupLast')?.value.trim();
  const email = document.getElementById('signupEmail')?.value.trim();
  const pass  = document.getElementById('signupPassword')?.value;
  const btn   = document.getElementById('signupBtn');
  const errEl = document.getElementById('signupError');
  const sucEl = document.getElementById('signupSuccess');
  if (!email || !pass) { showAuthError(errEl, 'Please fill in all required fields.'); return; }
  if (pass.length < 8) { showAuthError(errEl, 'Password must be at least 8 characters.'); return; }
  if (CLERK_PUBLISHABLE_KEY === pk_test_ZnVuLWxhcmstOTguY2xlcmsuYWNjb3VudHMuZGV2JA) {
    simulateLogin(); return;
  }
  btn.disabled = true;
  btn.innerHTML = '<span class="auth-spinner"></span>Creating accountâ€¦';
  errEl.classList.remove('show');
  try {
    const signUp = await window.Clerk.client.signUp.create({
      emailAddress: email, password: pass,
      firstName: first, lastName: last,
    });
    await signUp.prepareEmailAddressVerification({ strategy: 'email_code' });
    sucEl.textContent = 'Check your email for a verification code!';
    sucEl.classList.add('show');
    btn.textContent = 'Account created! Check email â†’';
    // In production you'd show a code-entry step here
    setTimeout(() => { simulateLogin(); }, 1500);
  } catch(e) {
    showAuthError(errEl, e.errors?.[0]?.message || 'Could not create account. Please try again.');
    btn.disabled = false;
    btn.textContent = 'Create free account â†’';
  }
}

async function handleLogout() {
  closeUserMenu();
  if (window.Clerk?.user) {
    await window.Clerk.signOut();
  }
  setLoggedOutUI();
  state.xp = 0;
  document.getElementById('xpBadge').textContent = 'âš¡ 0 XP';
  showView('landing');
}

async function authWithGoogle() {
  if (CLERK_PUBLISHABLE_KEY === 'YOUR_CLERK_PUBLISHABLE_KEY') { simulateLogin(); return; }
  try {
    await window.Clerk.client.signIn.authenticateWithRedirect({
      strategy: 'oauth_google', redirectUrl: window.location.href, redirectUrlComplete: window.location.href,
    });
  } catch(e) { console.error(e); }
}

async function authWithGitHub() {
  if (CLERK_PUBLISHABLE_KEY ===pk_test_ZnVuLWxhcmstOTguY2xlcmsuYWNjb3VudHMuZGV2JA) { simulateLogin(); return; }
  try {
    await window.Clerk.client.signIn.authenticateWithRedirect({
      strategy: 'oauth_github', redirectUrl: window.location.href, redirectUrlComplete: window.location.href,
    });
  } catch(e) { console.error(e); }
}

async function handleForgotPassword() {
  const email = document.getElementById('loginEmail')?.value.trim();
  if (!email) { showAuthError(document.getElementById('loginError'), 'Enter your email address above first.'); return; }
  if (CLERK_PUBLISHABLE_KEY ===pk_test_ZnVuLWxhcmstOTguY2xlcmsuYWNjb3VudHMuZGV2JA) { alert('Demo mode: password reset not available.'); return; }
  try {
    await window.Clerk.client.signIn.create({ strategy: 'reset_password_email_code', identifier: email });
    showAuthError(document.getElementById('loginError'), ''); 
    const s = document.getElementById('loginError');
    s.style.background = 'rgba(45,204,135,0.1)';
    s.style.borderColor = 'rgba(45,204,135,0.3)';
    s.style.color = 'var(--green)';
    s.textContent = 'Password reset email sent! Check your inbox.';
    s.classList.add('show');
  } catch(e) { showAuthError(document.getElementById('loginError'), 'Could not send reset email.'); }
}

// â”€ UI helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showAuthError(el, msg) {
  if (!el) return;
  el.textContent = msg;
  el.classList.toggle('show', !!msg);
}

function toggleUserMenu() {
  document.getElementById('navDropdown')?.classList.toggle('open');
}
function closeUserMenu() {
  document.getElementById('navDropdown')?.classList.remove('open');
}
document.addEventListener('click', (e) => {
  if (!e.target.closest('.nav-user-menu')) closeUserMenu();
});

// â”€ Also hook state.clerkUserId â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
state.clerkUserId = null;

// â”€ Override simulateLogin to set proper UI â”€â”€â”€â”€â”€â”€
const _origSimulateLogin = simulateLogin;
function simulateLogin() {
  const mockUser = {
    id: 'demo-user-' + Date.now(),
    firstName: 'Demo',
    lastName: 'Learner',
    emailAddresses: [{ emailAddress: 'demo@learncraft.dev' }],
  };
  setLoggedInUI(mockUser);
  showView('dashboard');
}

// â”€ Run on page load â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
window.addEventListener('load', () => {
  initClerk();
});

</script>
</body>
</html>
